define("puzzle/directive/puzzle-div",["angularAMD"],function(angularAMD){angularAMD.directive("puzzleDiv",[function(){return{restrict:"E",templateUrl:"interaction/puzzle/directive/puzzle-div.html",link:function(scope,element){AddonThree2DPuzzle_create().initViewPrepareLessons(scope)}}}])}),define("puzzle/directive/puzzle.directive",["components/site-directive/assets-select/assets-select","components/site-directive/error-tip/error-tip","components/site-directive/edit-box/new-edit-box","components/site-directive/foot-tool/time-box/new-time-box","components/site-directive/foot-tool/foot-tool","threejs","addon-puzzle","puzzle/directive/puzzle-div"],function(){}),define(["app","puzzle/directive/puzzle.directive"],function(app){"use strict";app.controller("puzzle_ctrl",["$scope","skin_service","$stateParams","CustomEditorService","$rootScope","$filter",function($scope,skin_service,$stateParams,CustomEditorService,$rootScope,$filter){$rootScope.moduleScope=$scope,$scope.errorModel={},$scope.model={id:"",module_code:"nd_puzzle",title:"拼图",skin:{code:"wood",css_url:"",name:$filter("translate")("app.skin.wood"),package_url:""},timer:{timer_type:"sequence",time_minute:"0",time_second:"0"},properties:[{name:"question_id",display_name:"题目ID",type:"string",value:"",is_localized:!1},{name:"question_url",display_name:"题目内容",type:"jsonFile",value:"",is_localized:!1}],content:{test1:1}};var loadingData=function(id){$scope.isloadingData=!0,CustomEditorService.getQuestionInfoById(id).then(function(rtnData){if(console.log("start"),rtnData){""!=rtnData.skin.code?$scope.model=$scope.decodeData(rtnData,!0):$scope.model.id=rtnData.id;try{AddonThree2DPuzzle_create().initViewPre($scope.model.content.lengthArray)}catch(e){return}skin_service.set_skin_by_code($scope.model.skin.code,"v1"),$scope.errorModel.errorText="",$scope.isloadingData=!1}else $scope.errorModel.errorText=$filter("translate")("app.unvalidno")},function(error){$scope.errorModel.errorText=$filter("translate")("app.question.get.error")})};$stateParams.id?loadingData($stateParams.id):(skin_service.set_skin_by_code($scope.model.skin.code,"v1"),console.log($stateParams.id)),$scope.$on("changgedSkin",function(){$rootScope.scaleHtml()}),$scope.validPostData=function(){var length=AddonThree2DPuzzle_create().getLengthArray();return 0!=length||($scope.errorModel.errorText="当前未添加任何小棒!",!1)},$scope.encodeData=function(model){var addon=AddonThree2DPuzzle_create();return model.content.lengthArray=new Object,model.content.lengthArray=addon.getLengthArray(),model},$scope.decodeData=function(model,isInitLoad){return model}}])});