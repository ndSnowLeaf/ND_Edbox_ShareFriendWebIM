define(["angularAMD"],function(e){e.directive("timeSettingBtn",[function(){return{restrict:"EA",template:'<a href="javascript:;" class="mainlink" poptipbox-placement-disabled="true" poptipbox-class="toolpop"  poptipbox-data="model.timer" poptipbox="<time-setting-box></time-setting-box>">时间设置</a>',scope:!1,replace:!0}}]).directive("timeSettingBox",["$filter",function(e){return{restrict:"E",templateUrl:"interaction/components/site-directive/time-setting-box/time-setting-box.html",scope:!0,link:function(e){function t(t){return n[t]=0,function(i){if(i){var o=parseInt(i);o.toString().length==i.toString().length&&i.toString().length<=2&&o>=0&&o<60?n[t]=i:e.model[t]=n[t]}else n[t]="";console.log(t+":"+i)}}var i=e.$parent.originScope,n={};e.model=angular.extend({timer_type:"sequence",time_minute:0,time_second:10},i.model.timer),e.$watch("model.time_minute",t("time_minute")),e.$watch("model.time_second",t("time_second")),e.close_popup=function(){e.$parent.$parent.hide()},e.changgeType=function(t){if(e.model.timer_type=t,"countdown"==t){if(angular.element(window.event.target).hasClass("time_second"))return!1;(!e.model.time_minute||0==e.model.time_minute&&0==e.model.time_second)&&(e.model.time_minute=1,e.model.time_second=0)}else"sequence"==e.model.timer_type&&(e.model.time_minute=0,e.model.time_second=0)},e.cancel=function(){e.close_popup()},e.ok=function(){"countdown"==e.model.timer_type?((!e.model.time_minute||0==e.model.time_minute&&0==e.model.time_second)&&(e.model.time_minute=1),e.model.time_second||(e.model.time_second=0)):"sequence"==e.model.timer_type&&(e.model.time_minute=0,e.model.time_second=0),angular.extend(i.model.timer,e.model),e.close_popup(),i.model.timer.timer_type=e.model.timer_type}}}}])});