define(["angularAMD"],function(e){"use strict";e.service("CustomEditorService",["RestAngularCustomEditor","$stateParams","$filter","diskpathService",function(e,t,i,n){return{getSkins:function(n){var s=i("filterGetAPIRouteByWebRouteV2")(n||t.area);return e("v0.1/interaction").one("skins").one(s).getList()},getQuestionInfoById:function(s,o){var r=i("filterGetAPIRouteByWebRouteV2")(o||t.area);return e("v0.1/interaction").setRequestSuffix("?question_base="+(t.question_base||"")).one(r,s).get().then(function(e){if(!e.id){e.skin={code:"wood"};var i=$("<div/>").css({position:"absolute",top:"0",left:"0",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center","z-index":"999"}).css({display:"-webkit-flex","-webkit-align-items":"center","-webkit-justify-content":"center"}),s="";s=t.isPreview&&"false"!==t.isPreview?"<p>该范例无法预览</p>":"<p>当前习题暂不支持编辑</p>",$(s).css({padding:"20px","border-radius":"3px","font-size":"24px",color:"#fff","background-color":"rgba(0, 0, 0, 0.7)"}).appendTo(i),i.appendTo(document.body)}var o=e.physic_path;return delete e.physic_path,n.setFilepath(o),e})},getPreviewUrl:function(){return e("v1.3/questions").setRequestSuffix("?main_type=interaction&question_base="+(t.question_base||"")).one(t.id).one("qtiplayer").get()},addQuestion:function(n,s){var o=i("filterGetAPIRouteByWebRouteV2")(s||t.area),r="?question_base="+(t.question_base||"");return e("v0.1/interaction").setRequestSuffix(r).one(o).customPOST(n)},updateQuestion:function(n,s){var o=i("filterGetAPIRouteByWebRouteV2")(s||t.area),r="?question_base="+(t.question_base||"");return e("v0.1/interaction").setRequestSuffix(r).one(o,n.id).customPUT(n)},readQuestionAccessRecord:function(){return e("v0.1/archives").one("questions_access_record").get()},saveQuestionAccessRecord:function(t){var i=JSON.stringify(t);return e("v0.1/archives").one("questions_access_record").customPOST(i)}}}])});