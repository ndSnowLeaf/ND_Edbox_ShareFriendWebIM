define(["jquery","espService","i18n!"],function($,espService,i18n){function adjustData(metadata,type){return{id:metadata.identifier,title:metadata.title,description:metadata.description,metadata:metadata}}var questions=[];return function(title){return{name:"question",title:title||i18n.translate("common.question.orginaltype"),icon:"bundles/nd.esp.question/images/icon_basic_question.png",order:1,paging:15,getDataList:function(params){return espService.question.list($.extend({},params)).then(function(result){for(var items=[],i=0;i<result.items.length;i++)items.push(adjustData(result.items[i]));return{total_count:result.total_count,items:items}})},getTemplateList:function(){return questions},createByTemplate:function(template){return espService.question.create({title:template.title}).then(function(metadata){return adjustData(metadata)})},openEditor:function(workbench,data){workbench.openEditor({type:"question",key:data.metadata.identifier,data:data.metadata})}}}});