define(["angular","espSecurity","i18n!","css!./style.css"],function(angular,espSecurity,i18n){return function(){return{name:"nd.esp.workspace.HeaderView",title:i18n.translate("common.title.toptitle"),render:function(view){angular.quickstart(view.element,{templateUrl:"bundles/nd.esp.workspace/HeaderView/template.html",controller:["$scope",function($scope){$scope.authInfo=espSecurity.authInfo,espSecurity.on("login",function(authInfo){$scope.authInfo=authInfo,$scope.$apply()}),espSecurity.on("logout",function(){delete $scope.authInfo,$scope.$apply()}),$scope.logout=function(){espSecurity.logout().done(function(){view.workbench.switchPerspective("nd.esp.workspace.login")})}}]})}}}});