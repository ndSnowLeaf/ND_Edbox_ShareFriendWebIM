var mime=require("mime"),sizeOf=require("image-size"),path=require("path"),Q=require("q"),Fs=require("fs"),CONST={".bmp":{ndCode:"$RA0101"},".gif":{ndCode:"$RA0101"},".jpeg":{ndCode:"$RA0101"},".jpg":{ndCode:"$RA0101"},".png":{ndCode:"$RA0101"},".webp":{ndCode:"$RA0101"},".mp3":{ndCode:"$RA0102"},".mp4":{ndCode:"$RA0103"},".swf":{ndCode:"$RA0104"}},parseAsset=function(e){var d=Q.defer(),o={path:"",ndCode:"",mime:""},r=path.extname(e).toLowerCase();if(o.path=e,o.mime=mime.lookup(e),CONST[r]?o.ndCode=CONST[r].ndCode||"":o.ndCode="","$RA0101"===o.ndCode)sizeOf(e,function(e,r){if(e)return void d.reject(e);o.width=r.width,o.height=r.height,d.resolve(o)});else{var t=Fs.statSync(e).size;o.size=t,d.resolve(o)}return d.promise},getNdCode=function(e){var d=path.extname(e).toLowerCase();return CONST[d]?CONST[d].ndCode||"":""};module.exports.parseAsset=parseAsset,module.exports.getNdCode=getNdCode;