function encode(e,r){var t=[],n="";"string"==typeof r?r={section:r,whitespace:!1}:(r=r||{},r.whitespace=!0===r.whitespace);var a=r.whitespace?" = ":"=";return Object.keys(e).forEach(function(r,o,c){var s=e[r];s&&Array.isArray(s)?s.forEach(function(e){n+=safe(r+"[]")+a+safe(e)+"\n"}):s&&"object"==typeof s?t.push(r):n+=safe(r)+a+safe(s)+eol}),r.section&&n.length&&(n="["+safe(r.section)+"]"+eol+n),t.forEach(function(t,a,o){var c=dotSplit(t).join("\\."),s=(r.section?r.section+".":"")+c,i=encode(e[t],{section:s,whitespace:r.whitespace});n.length&&i.length&&(n+=eol),n+=i}),n}function dotSplit(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(e){return e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function decode(e){var r={},t=r,n=null;return e.split(/[\r\n]+/g).forEach(function(e,a,o){if(e&&!e.match(/^\s*[;#]/)){var c=e.match(/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i);if(c){if(void 0!==c[1])return n=unsafe(c[1]),void(t=r[n]=r[n]||{});var s=unsafe(c[2]),i=!c[3]||unsafe(c[4]||"");switch(i){case"true":case"false":case"null":i=JSON.parse(i)}s.length>2&&"[]"===s.slice(-2)&&(s=s.substring(0,s.length-2),t[s]?Array.isArray(t[s])||(t[s]=[t[s]]):t[s]=[]),Array.isArray(t[s])?t[s].push(i):t[s]=i}}}),Object.keys(r).filter(function(e,t,n){if(!r[e]||"object"!=typeof r[e]||Array.isArray(r[e]))return!1;var a=dotSplit(e),o=r,c=a.pop(),s=c.replace(/\\\./g,".");return a.forEach(function(e,r,t){o[e]&&"object"==typeof o[e]||(o[e]={}),o=o[e]}),(o!==r||s!==c)&&(o[s]=r[e],!0)}).forEach(function(e,t,n){delete r[e]}),r.getValue=function(e){var t=null;for(var n in r){var a=r[n];for(var o in a)o.toLowerCase()==e.toLowerCase()&&(t=a[o])}return t},r}function isQuoted(e){return'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1)}function safe(e){return"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&isQuoted(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function unsafe(e,r){if(e=(e||"").trim(),!isQuoted(e)){for(var t=!1,n="",a=0,o=e.length;a<o;a++){var c=e.charAt(a);if(t)-1!=="\\;#".indexOf(c)?n+=c:n+="\\"+c,t=!1;else{if(-1!==";#".indexOf(c))break;"\\"===c?t=!0:n+=c}}return t&&(n+="\\"),n}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(e){}return e}exports.parse=exports.decode=decode,exports.stringify=exports.encode=encode,exports.safe=safe,exports.unsafe=unsafe;var eol="win32"===process.platform?"\r\n":"\n";