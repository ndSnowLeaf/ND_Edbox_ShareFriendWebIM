function download(t){var e=t.code,n=t.latest_version;console.log(e,n),http.get(downloadPattern+"/"+e+"/versions",function(t,n){var o="";t.on("data",function(t){o+=t}),t.on("end",function(){var t=JSON.parse(o.toString());if(t.length>0){var n=t[0].zip_url;http.get(n,function(t){try{var n=unzip.Extract({path:"e:/templates/"+e});t.pipe(n)}catch(t){}})}})}).end()}var downloadPattern="http://esp-developer-service.edu.web.sdp.101.com/v0.1/templates",http=require("http"),fs=require("fs"),unzip=require("unzip");http.get("http://esp-developer-service.edu.web.sdp.101.com/v0.1/templates?page=0&size=1000&status=PUBLISHED,ONLINE",function(t){var e="";t.on("data",function(t){e+=t}),t.on("end",function(){for(var t=JSON.parse(e.toString()).items,n=0;n<t.length;n++){download(t[n])}})});var logError=function(t){t.stack?console.error(t.stack.split("\n")):console.log(t)};process.on("uncaughtException",function(t){logError(t)});