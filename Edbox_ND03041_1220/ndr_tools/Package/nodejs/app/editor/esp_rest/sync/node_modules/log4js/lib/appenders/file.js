"use strict";function fileAppender(e,n,o,r,t,i){e=path.normalize(e),n=n||layouts.basicLayout,r=void 0===r?5:r,r=0===r?1:r;var s=function(e,n,o){var r;return r=n?new streams.RollingFileStream(e,n,o,{compress:t}):fs.createWriteStream(e,{encoding:"utf8",mode:parseInt("0644",8),flags:"a"}),r.on("error",function(n){console.error("log4js.fileAppender - Writing to file %s, error happened ",e,n)}),r}(e,o,r);return openFiles.push(s),function(e){s.write(n(e,i)+eol,"utf8")}}function configure(e,n){var o;return e.layout&&(o=layouts.layout(e.layout.type,e.layout)),n&&n.cwd&&!e.absolute&&(e.filename=path.join(n.cwd,e.filename)),fileAppender(e.filename,o,e.maxLogSize,e.backups,e.compress,e.timezoneOffset)}function shutdown(e){var n,o=0,r=function(r){n=n||r,++o>=openFiles.length&&e(n)};if(!openFiles.length)return e();openFiles.forEach(function(e){e.write(eol,"utf-8")?e.end(r):e.once("drain",function(){e.end(r)})})}var layouts=require("../layouts"),path=require("path"),fs=require("fs"),streams=require("../streams/index"),os=require("os"),eol=os.EOL||"\n",openFiles=[],levels=require("../levels");process.on("exit",function(){openFiles.forEach(function(e){e.end()})}),exports.appender=fileAppender,exports.configure=configure,exports.shutdown=shutdown;