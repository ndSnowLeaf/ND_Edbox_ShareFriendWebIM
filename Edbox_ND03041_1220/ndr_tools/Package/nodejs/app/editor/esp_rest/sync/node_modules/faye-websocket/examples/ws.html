<!doctype html><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><title>WebSocket test</title></head><body><h1>WebSocket test</h1><ul></ul><script type="text/javascript">var logger=document.getElementsByTagName("ul")[0],Socket=window.MozWebSocket||window.WebSocket,protos=["foo","bar","xmpp"],socket=new Socket("ws://"+location.hostname+":"+location.port+"/",protos),index=0,log=function(o){logger.innerHTML+="<li>"+o+"</li>"};socket.addEventListener("open",function(){log("OPEN: "+socket.protocol),socket.send("Hello, world")}),socket.onerror=function(o){log("ERROR: "+o.message)},socket.onmessage=function(o){log("MESSAGE: "+o.data),setTimeout(function(){socket.send(++index+" "+o.data)},2e3)},socket.onclose=function(o){log("CLOSE: "+o.code+", "+o.reason)}</script></body></html>