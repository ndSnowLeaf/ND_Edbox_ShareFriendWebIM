"use strict";var vows=require("vows"),assert=require("assert"),fs=require("fs"),sandbox=require("sandboxed-module");vows.describe("../../lib/streams/BaseRollingFileStream").addBatch({"when node version < 0.10.0":{topic:function(){return sandbox.load("../../lib/streams/BaseRollingFileStream",{globals:{process:{version:"0.8.11"}},requires:{"readable-stream":{Writable:function(){}}}}).required},"it should use readable-stream to maintain compatibility":function(e){assert.ok(e["readable-stream"]),assert.ok(!e.stream)}},"when node version > 0.10.0":{topic:function(){return sandbox.load("../../lib/streams/BaseRollingFileStream",{globals:{process:{version:"0.10.1"}},requires:{stream:{Writable:function(){}}}}).required},"it should use the core stream module":function(e){assert.ok(e.stream),assert.ok(!e["readable-stream"])}},"when no filename is passed":{topic:require("../../lib/streams/BaseRollingFileStream"),"it should throw an error":function(e){try{new e,assert.fail("should not get here")}catch(e){assert.ok(e)}}},"default behaviour":{topic:function(){return new(require("../../lib/streams/BaseRollingFileStream"))("basetest.log")},teardown:function(){try{fs.unlink("basetest.log")}catch(e){console.error("could not remove basetest.log",e)}},"it should not want to roll":function(e){assert.isFalse(e.shouldRoll())},"it should not roll":function(e){var s=!1;e.roll("basetest.log",function(){s=!0}),assert.isTrue(s)}}}).exportTo(module);