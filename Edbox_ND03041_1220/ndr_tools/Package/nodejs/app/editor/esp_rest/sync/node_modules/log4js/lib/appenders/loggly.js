"use strict";function isAnyObject(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function numKeys(e){var a=0;for(var t in e)e.hasOwnProperty(t)&&a++;return a}function processTags(e){return(1===e.length?[e[0]]:Array.apply(null,e)).reduce(function(e,a,t,r){return isAnyObject(a)&&Array.isArray(a.tags)&&1==numKeys(a)?e.additionalTags=e.additionalTags.concat(a.tags):e.deTaggedData.push(a),e},{deTaggedData:[],additionalTags:[]})}function logglyAppender(e,a){var t=loggly.createClient(e);return a||(a=passThrough),function(e){var r=processTags(e.data),o=r.deTaggedData,n=r.additionalTags;e.data=o;var s=a(e);t.log({msg:s,level:e.level.levelStr,category:e.categoryName,hostname:os.hostname().toString()},n)}}function configure(e){var a;return e.layout&&(a=layouts.layout(e.layout.type,e.layout)),logglyAppender(e,a)}var layouts=require("../layouts"),loggly=require("loggly"),os=require("os"),passThrough=layouts.messagePassThroughLayout;exports.name="loggly",exports.appender=logglyAppender,exports.configure=configure;