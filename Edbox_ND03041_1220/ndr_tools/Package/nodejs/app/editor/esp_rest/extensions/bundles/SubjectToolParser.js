function loadTemplate(){var e=FileSys.readFileSync(PathSys.join(__dirname,"./tmpls/courseware-object/subject-tool-launcher.tmpl.json"));return e?e.toString():null}function generateMainXMLContent(e,a,t){return e.replace(/\$\{uuid\}/g,a).replace("${timestamp}",t)}function generateResult(e,a,t){var r=loadTemplate(),n={main:"",page:"",sdp_package:"",extend_files:[]},i=JSON.parse(r),s=(new Date).valueOf(),l=generateMainXMLContent(i.main,e,s),o=i.page.replace("${questionId}",e).replace("${toolName}",a).replace("${initModel}",JSON.stringify(t)),u=i.sdp_package;return n.main=l,n.page=o,n.sdp_package=u,n}function dataModelParser(e,a,t,r){var n=[{name:"question_id",displayName:"题目ID",type:"string",value:a,isLocalized:!1},{name:"question_url",displayName:"题目内容",type:"json",text:r?"{}":JSON.stringify(t),isLocalized:!1}];return r&&n.push(t),generateResult(a,e,n)}function diceDataModelParser(e,a,t){var r=[{name:"question_id",displayName:"题目ID",type:"string",value:e,isLocalized:!1},{name:"stat_mode",displayName:"统计模式",type:"string",value:"none",isLocalized:!1}];return t&&r.push(a),generateResult(e,TOOL_NAME_DICE,r)}var FileSys=require("fs"),PathSys=require("path"),TOOL_NAME_DICE="Dice",parser=function(e,a,t,r){var n=null;switch(e){case TOOL_NAME_DICE:n=diceDataModelParser(a,t,r);break;default:n=dataModelParser(e,a,t,r)}return n};exports.parser=parser;