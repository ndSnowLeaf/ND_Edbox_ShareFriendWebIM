var URL=require("url"),os=require("os"),log=require("./log"),Q=require("q"),thisMod=this,http=require("http"),bitsecond=10,LogicError=require("./errors").LogicError;String.prototype.format=function(r){var e=this;if(arguments.length>0)if(1==arguments.length&&"object"==typeof r){for(var t in r)if(void 0!=r[t]){var n=new RegExp("({"+t+"})","g");e=e.replace(n,r[t])}}else for(var i=0;i<arguments.length;i++)if(void 0!=arguments[i]){var n=new RegExp("({["+i+"]})","g");e=e.replace(n,arguments[i])}return e};var StringBuilder=function(r){this.cache=[],this.append(r)};StringBuilder.prototype={append:function(r){r&&this.cache.push(r)},clear:function(){this.cache.length=0},toString:function(){return this.cache.join("")}},exports.StringBuilder=StringBuilder,exports.getBase64=function(r){return new Buffer(r).toString("base64")},exports.getUnBase64=function(r){return new Buffer(r,"base64").toString()},exports.extend=function(){var r={};for(var e in arguments){var t=arguments[e];for(var n in t)r[n]=t[n]}return r},exports.isNullOrEmpty=function(r){return void 0==r||null==r||"string"==typeof r&&""==r},exports.urlMatching=function(r,e){if(!r||!e)return!1;for(var t=0;t<e.length;t++)if(new RegExp(e[t],"gi").test(r))return!0;return!1},exports.removeUrlParam=function(r,e){var t=r.indexOf("?"+e+"=");if(t<0&&(t=r.indexOf("&"+e+"=")),t<0)return r;var n=r.substr(0,t+1),i=r.substr(t+e.length+1),o=i.indexOf("&");return o<0?n:n+i.substr(o+1)};var NodeParam=function(r){this._url=r.url,this._query,this._body=r.body};NodeParam.prototype.get=function(r){this._query||(this._query=URL.parse(this._url,!0).query);var e=null;return e=this._query[r]?this._query[r]:this._body[r],e=null==e||void 0==e?e:e.toString()},exports.NodeParam=NodeParam;