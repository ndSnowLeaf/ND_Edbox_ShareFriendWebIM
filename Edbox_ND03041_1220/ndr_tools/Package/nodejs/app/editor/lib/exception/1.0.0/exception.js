define(["jquery"],function($){function Exception(code,message,cause){this._code=code,this._message=message,this._cause=cause}return Exception.prototype.code=function(){return this._code},Exception.prototype.message=function(){return this._message},Exception.prototype.cause=function(){return this._cause},Exception.prototype.toString=function(){var text=this._code+": "+this._message;if(this._cause){var causeText;causeText=this._cause.status&&this._cause.statusText?"Ajax Response Error: "+this._cause.statusText+"【"+this._cause.status+"】":this._cause.toString(),text+="<br/>&nbsp;&nbsp;->"+causeText}return text},Exception.prototype.as=function(message,cause){return message&&!$.isArray(message)&&(message=[message]),message&&(message=this._message.replace(/{(\d)+}/g,function(text,index){return message[index]})),new Exception(this._code,message||this._message,cause||this._cause)},Exception.prototype.asFail=function(asMessage,asCause){return $.proxy(function(cause){return this.as(asMessage,$.isFunction(asCause)?asCause(cause):asCause||cause)},this)},Exception.prototype.reject=function(asMessage,asCause){return $.Deferred().reject(asMessage||asCause?this.as(asMessage,asCause):this)},Exception.fail=function(ex,asMessage,asCause){return function(cause){return asMessage||asCause?ex.as(asMessage,$.isFunction(asCause)?asCause(cause):asCause||cause):ex}},Exception.codePrefix=function(prefix){function _Exception(code,message,cause){return new Exception(prefix+code,message,cause)}return _Exception.fail=Exception.fail,_Exception},Exception});