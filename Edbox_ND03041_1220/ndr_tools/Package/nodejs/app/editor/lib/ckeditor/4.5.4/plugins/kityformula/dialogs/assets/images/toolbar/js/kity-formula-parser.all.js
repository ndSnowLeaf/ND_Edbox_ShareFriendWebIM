!function(){function use(name){_p.r([moduleMapping[name]])}var _p={r:function(index){if(_p[index].inited)return _p[index].value;if("function"!=typeof _p[index].value)return _p[index].inited=!0,_p[index].value;var module={exports:{}},returnValue=_p[index].value(null,module.exports,module);if(_p[index].inited=!0,_p[index].value=returnValue,void 0!==returnValue)return returnValue;for(var key in module.exports)if(module.exports.hasOwnProperty(key))return _p[index].inited=!0,_p[index].value=module.exports,module.exports}};_p[0]={value:function(require){function Assembly(formula){this.formula=formula}function generateExpression(originTree,tree,objTree,mapping,selectInfo){var ConstructorProxy,currentOperand=null,exp=null,cursorLocation=[],operand=tree.operand||[],constructor=null;if(objTree.operand=[],-1===tree.name.indexOf("text")){for(var i=0,len=operand.length;i<len;i++)currentOperand=operand[i],currentOperand!==CURSOR_CHAR?currentOperand?"string"==typeof currentOperand?("brackets"===tree.name&&i<2?operand[i]=currentOperand:"function"===tree.name&&0===i?operand[i]=currentOperand:operand[i]=createObject("text",currentOperand),objTree.operand.push(operand[i])):"argument"===currentOperand.operandType?operand[i]=currentOperand:(objTree.operand.push({}),operand[i]=generateExpression(originTree.operand[i],currentOperand,objTree.operand[objTree.operand.length-1],mapping,selectInfo)):(operand[i]=createObject("empty"),objTree.operand.push(operand[i])):(cursorLocation.push(i),selectInfo.hasOwnProperty("startOffset")||(selectInfo.startOffset=i),selectInfo.endOffset=i,tree.attr&&tree.attr.id&&(selectInfo.groupId=tree.attr.id));for(2===cursorLocation.length&&(selectInfo.endOffset-=1);i=cursorLocation.length;)i=cursorLocation[i-1],operand.splice(i,1),cursorLocation.length--,originTree.operand.splice(i,1)}if(!(constructor=getConstructor(tree.name)))throw new Error("operator type error: not found "+tree.operator);ConstructorProxy=function(){},ConstructorProxy.prototype=constructor.prototype,exp=new ConstructorProxy,constructor.apply(exp,operand),objTree.func=exp;for(var fn in tree.callFn)tree.callFn.hasOwnProperty(fn)&&exp[fn]&&exp[fn].apply(exp,tree.callFn[fn]);return tree.attr&&(tree.attr.id&&(mapping[tree.attr.id]={objGroup:exp,strGroup:originTree}),tree.attr["data-root"]&&(mapping.root={objGroup:exp,strGroup:originTree}),exp.setAttr(tree.attr)),exp}function createObject(type,value){switch(type){case"empty":return new kf.EmptyExpression;case"text":return new kf.TextExpression(value)}}function getConstructor(name){return CONSTRUCT_MAPPING[name]||kf[name.replace(/^[a-z]/i,function(match){return match.toUpperCase()}).replace(/-([a-z])/gi,function(match,char){return char.toUpperCase()})+"Expression"]}function deepCopy(source){var target={};if("[object Array]"==={}.toString.call(source)){target=[];for(var i=0,len=source.length;i<len;i++)target[i]=doCopy(source[i])}else for(var key in source)source.hasOwnProperty(key)&&(target[key]=doCopy(source[key]));return target}function doCopy(source){return source?"object"!=typeof source?source:deepCopy(source):source}var CONSTRUCT_MAPPING={},CURSOR_CHAR="";return Assembly.prototype.generateBy=function(data){var tree=data.tree,objTree={},selectInfo={},mapping={};if("string"==typeof tree)throw new Error("Unhandled error");var exp=generateExpression(tree,deepCopy(tree),objTree,mapping,selectInfo);return this.formula.appendExpression(exp),{select:selectInfo,parsedTree:tree,tree:objTree,mapping:mapping}},Assembly.prototype.regenerateBy=function(data){return this.formula.clearExpressions(),this.generateBy(data)},Assembly}},_p[1]={value:function(require){return{toRPNExpression:_p.r(2),generateTree:_p.r(3)}}},_p[2]={value:function(require){function rpn(units){var signStack=[],currentUnit=null;for(units=processFunction(units);currentUnit=units.shift();)"combination"!==currentUnit.name||1!==currentUnit.operand.length||"brackets"!==currentUnit.operand[0].name&&currentUnit.operand[0].type!==TYPE.ENV||(currentUnit=currentUnit.operand[0]),Utils.isArray(currentUnit)?signStack.push(rpn(currentUnit)):signStack.push(currentUnit);return signStack}function processFunction(units){for(var processed=[],currentUnit=null;void 0!==(currentUnit=units.pop());)if(!currentUnit||"object"!=typeof currentUnit||!1!==currentUnit.sign&&"function"!==currentUnit.name)processed.push(currentUnit);else{var tt=currentUnit.handler(currentUnit,[],processed.reverse());processed.unshift(tt),processed.reverse()}return processed.reverse()}var Utils=_p.r(4),TYPE=_p.r(13);return rpn}},_p[3]={value:function(require){function generateTree(units){for(var currentUnit=null,tree=[],i=0,len=units.length;i<len;i++)Utils.isArray(units[i])&&(units[i]=generateTree(units[i]));for(;currentUnit=units.shift();)"object"==typeof currentUnit&&currentUnit.handler?tree.push(currentUnit.handler(currentUnit,tree,units)):tree.push(currentUnit);return mergeHandler(tree)}var mergeHandler=_p.r(15),Utils=_p.r(4);return generateTree}},_p[4]={value:function(require){var OPERATOR_LIST=_p.r(9),FUNCTION_LIST=_p.r(8),FUNCTION_HANDLER=_p.r(21),ENVIRONMENT_LIST=_p.r(7),Utils={getLatexType:function(str){return str=str.replace(/^\\/,""),OPERATOR_LIST[str]?"operator":FUNCTION_LIST[str]?"function":"text"},isArray:function(obj){return obj&&"[object Array]"===Object.prototype.toString.call(obj)},isEnvironment:function(type){return ENVIRONMENT_LIST.hasOwnProperty(type)},getDefine:function(str){return Utils.extend({},OPERATOR_LIST[str.replace("\\","")])},getFuncDefine:function(str){return{name:"function",params:str.replace(/^\\/,""),handler:FUNCTION_HANDLER}},getBracketsDefine:function(leftBrackets,rightBrackets){return Utils.extend({params:[leftBrackets,rightBrackets]},OPERATOR_LIST.brackets)},getEnvironmentDefine:function(type){return Utils.extend({environmentType:type},ENVIRONMENT_LIST[type])},extractArgumentsAndSubunit:function(define,subunits){return define.argumentExtractor?define.argumentExtractor(define,subunits):subunits},extend:function(target,sources){for(var key in sources)sources.hasOwnProperty(key)&&(target[key]=sources[key]);return target}};return Utils}},_p[5]={value:function(require){return{toString:function(obj){var string=[];if(null===obj)string.push(JSON.stringify(obj));else if("object"==typeof obj&&void 0===obj.join){string.push("{");for(var prop in obj)obj&&string.push(prop,": ",this.toString(obj[prop]),",");string.push("}")}else if("object"==typeof obj&&void 0!==obj.join){string.push("["),string.push("(");for(var prop in obj)isNaN(prop)&&string.push(prop,": ",this.toString(obj[prop]),",");string.push(")|");for(var i=0,len=obj.length;i<len;i++)string.push(this.toString(obj[i])),i<len-1&&string.push(",");string.push("]")}else"function"==typeof obj?string.push("[[function]]"):string.push(JSON.stringify(obj));return string.join("")},log:function(prefix,message){if(message){var outMessage=this.toString(message);console.log(prefix+" - "+outMessage)}else console.log(prefix)}}}},_p[6]={value:function(){var t=!0;return{".":t,"{":t,"}":t,"[":t,"]":t,"(":t,")":t,"|":t}}},_p[7]={value:function(require){var TYPE=_p.r(13);return{gathered:{name:"equations",type:TYPE.ENV,handler:_p.r(18)},gather:{name:"equations",type:TYPE.ENV,handler:_p.r(18)},"gather*":{name:"equations",type:TYPE.ENV,handler:_p.r(18)},align:{name:"equations",type:TYPE.ENV,handler:_p.r(18)},"align*":{name:"equations",type:TYPE.ENV,handler:_p.r(18)},aligned:{name:"equations",type:TYPE.ENV,handler:_p.r(18)},array:{name:"array",type:TYPE.ENV,handler:_p.r(17),argumentExtractor:_p.r(16)}}}},_p[8]={value:function(){return{sin:1,cos:1,arccos:1,cosh:1,det:1,inf:1,limsup:1,Pr:1,tan:1,arcsin:1,cot:1,dim:1,ker:1,ln:1,sec:1,tanh:1,arctan:1,coth:1,exp:1,lg:1,log:1,arg:1,csc:1,gcd:1,lim:1,max:1,sinh:1,deg:1,hom:1,liminf:1,min:1,sup:1}}},_p[9]={value:function(require){var scriptHandler=_p.r(29),TYPE=_p.r(13);return{"^":{name:"superscript",type:TYPE.OP,handler:scriptHandler},_:{name:"subscript",type:TYPE.OP,handler:scriptHandler},frac:{name:"fraction",type:TYPE.FN,sign:!1,handler:_p.r(20)},sqrt:{name:"radical",type:TYPE.FN,sign:!1,handler:_p.r(30)},sum:{name:"summation",type:TYPE.FN,traversal:"rtl",handler:_p.r(31)},int:{name:"integration",type:TYPE.FN,traversal:"rtl",handler:_p.r(22)},brackets:{name:"brackets",type:TYPE.FN,handler:_p.r(14)},mathcal:{name:"mathcal",type:TYPE.FN,sign:!1,handler:_p.r(26)},mathfrak:{name:"mathfrak",type:TYPE.FN,sign:!1,handler:_p.r(27)},mathbb:{name:"mathbb",type:TYPE.FN,sign:!1,handler:_p.r(25)},mathrm:{name:"mathrm",type:TYPE.FN,sign:!1,handler:_p.r(28)},xrightarrow:{name:"xrightarrow",type:TYPE.OP,handler:_p.r(19)}}}},_p[10]={value:function(require){return{int:_p.r(33),quot:_p.r(34),squareBrackets:_p.r(35)}}},_p[11]={value:function(require){return{combination:_p.r(37),fraction:_p.r(41),function:_p.r(42),integration:_p.r(43),subscript:_p.r(50),superscript:_p.r(52),script:_p.r(48),radical:_p.r(49),summation:_p.r(51),brackets:_p.r(36),mathcal:_p.r(45),mathfrak:_p.r(46),mathbb:_p.r(44),mathrm:_p.r(47),equations:_p.r(39),array:_p.r(38),xrightarrow:_p.r(40)}}},_p[12]={value:function(){return{"#":1,$:1,"%":1,_:1,"&":1,"{":1,"}":1,"^":1,"~":1}}},_p[13]={value:function(){return{OP:1,FN:2,ENV:3}}},_p[14]={value:function(require){var BRACKETS_TYPE=_p.r(6);return function(info,processedStack,unprocessedStack){for(var i=0,len=info.params.length;i<len;i++)if(!(info.params[i]in BRACKETS_TYPE))throw new Error("Brackets: invalid params");return info.operand=info.params,info.params[2]=unprocessedStack.shift(),delete info.handler,delete info.params,info}}},_p[15]={value:function(){return function(){return{name:"combination",operand:arguments[0]||[]}}}},_p[16]={value:function(require){function extractTableLocation(define,subunits){var end=subunits.indexOf("]");return"["===subunits[0]&&end>-1&&(define.tableLocation=joinArray(subunits.slice(0,end+1),!1)),subunits.slice(end+1)}function extractColClass(define,subunits){var subunit=subunits.shift();return subunit&&(define.colClass=isArray(subunit)?joinArray(subunit,!0):subunit),subunits}function joinArray(array,wrapped){for(var i=0,len=array.length;i<len;i++)isArray(array[i])&&(array[i]=joinArray(array[i],wrapped));return wrapped?"{"+array.join("")+"}":array.join("")}function isArray(obj){return obj&&"[object Array]"===Object.prototype.toString.call(obj)}return function(define,subunits){return subunits&&subunits.length>0?extractColClass(define,extractTableLocation(define,subunits)):subunits}}},_p[17]={value:function(require){function isColSeparator(item){return"string"==typeof item&&"&"==item}function isRowSeparator(item){return"string"==typeof item&&/\\+/.test(item)}var mergeHandler=_p.r(15);return function(info,processedStack,unprocessedStack){info.operand=[{operandType:"argument",tableLocation:info.tableLocation,colClass:info.colClass}];for(var originalOperands=unprocessedStack.shift().operand,matrixItem=[],originalOperand=null,i=0,len=originalOperands.length;i<len;i++){originalOperand=originalOperands[i];var rowSeparator=isRowSeparator(originalOperand);isColSeparator(originalOperand)||rowSeparator?(info.operand.push(mergeHandler(matrixItem)),rowSeparator&&info.operand.push(""),matrixItem=[]):(matrixItem.push(originalOperand),i==len-1&&info.operand.push(mergeHandler(matrixItem)))}return delete info.handler,info}}},_p[18]={value:function(require){function isIgnoredOperand(operand){return-1!=ignoreOperands.indexOf(operand)}function isRowSeparator(item){return"string"==typeof item&&/^\\+$/.test(item)}var mergeHandler=_p.r(15),ignoreOperands=["\\hfill\\","&"];return function(info,processedStack,unprocessedStack){info.operand=[{operandType:"argument",equationsType:info.environmentType}];for(var originalOperands=unprocessedStack.shift().operand,matrixItem=[],i=0,len=originalOperands.length;i<len;i++){var originalOperand=originalOperands[i];isIgnoredOperand(originalOperand)?i==len-1&&info.operand.push(mergeHandler(matrixItem)):isRowSeparator(originalOperand)?(info.operand.push(mergeHandler(matrixItem)),matrixItem=[]):(matrixItem.push(originalOperand),i==len-1&&info.operand.push(mergeHandler(matrixItem)))}return delete info.handler,info}}},_p[19]={value:function(require){var optionalArgumentExtractor=_p.r(23);return function(info,processedStack,unprocessedStack){info.operand=[info.name];var downOperand=optionalArgumentExtractor(unprocessedStack);return downOperand&&(info.operand[2]=downOperand),info.operand[1]=unprocessedStack.shift(),delete info.handler,info}}},_p[20]={value:function(){return function(info,processedStack,unprocessedStack){var numerator=unprocessedStack.shift(),denominator=unprocessedStack.shift();if(void 0===numerator||void 0===denominator)throw new Error("Frac: Syntax Error");return info.operand=[numerator,denominator],delete info.handler,info}}},_p[21]={value:function(require){var ScriptExtractor=_p.r(24);return function(info,processedStack,unprocessedStack){var params=ScriptExtractor.exec(unprocessedStack);return info.operand=[info.params,params.expr,params.superscript,params.subscript],delete info.params,delete info.handler,info}}},_p[22]={value:function(require){var ScriptExtractor=_p.r(24);return function(info,processedStack,unprocessedStack){var count=unprocessedStack.shift(),params=ScriptExtractor.exec(unprocessedStack);return info.operand=[params.expr,params.superscript,params.subscript],info.callFn={setType:[0|count]},delete info.handler,info}}},_p[23]={value:function(){return function(units){if("["===units[0]){units.shift();var optionalArgument=units.shift();return units.shift(),optionalArgument}}}},_p[24]={value:function(){function extractScript(stack){var scriptGroup=extract(stack),nextGroup=null,result={superscript:null,subscript:null};if(!scriptGroup)return result;if(nextGroup=extract(stack),result[scriptGroup.type]=scriptGroup.value||null,nextGroup){if(nextGroup.type===scriptGroup.type)throw new Error("Script: syntax error!");result[nextGroup.type]=nextGroup.value||null}return result}function extract(stack){var forward=stack.shift();return forward?"subscript"===forward.name||"superscript"===forward.name?{type:forward.name,value:stack.shift()}:(stack.unshift(forward),null):null}return{exec:function(stack){var result=extractScript(stack),expr=stack.shift();if(expr&&expr.name&&-1!==expr.name.indexOf("script"))throw new Error("Script: syntax error!");return result.expr=expr||null,result}}}},_p[25]={value:function(){return function(info,processedStack,unprocessedStack){var chars=unprocessedStack.shift();return"object"==typeof chars&&"combination"===chars.name&&(chars=chars.operand.join("")),info.name="text",info.attr={_reverse:"mathbb"},info.callFn={setFamily:["KF AMS BB"]},info.operand=[chars],delete info.handler,info}}},_p[26]={value:function(){return function(info,processedStack,unprocessedStack){var chars=unprocessedStack.shift();return"object"==typeof chars&&"combination"===chars.name&&(chars=chars.operand.join("")),info.name="text",info.attr={_reverse:"mathcal"},info.callFn={setFamily:["KF AMS CAL"]},info.operand=[chars],delete info.handler,info}}},_p[27]={value:function(){return function(info,processedStack,unprocessedStack){var chars=unprocessedStack.shift();return"object"==typeof chars&&"combination"===chars.name&&(chars=chars.operand.join("")),info.name="text",info.attr={_reverse:"mathfrak"},info.callFn={setFamily:["KF AMS FRAK"]},info.operand=[chars],delete info.handler,info}}},_p[28]={value:function(){return function(info,processedStack,unprocessedStack){var chars=unprocessedStack.shift();return"object"==typeof chars&&"combination"===chars.name&&(chars=chars.operand.join("")),info.name="text",info.attr={_reverse:"mathrm"},info.callFn={setFamily:["KF AMS ROMAN"]},info.operand=[chars],delete info.handler,info}}},_p[29]={value:function(){return function(info,processedStack,unprocessedStack){var base=processedStack.pop(),script=unprocessedStack.shift()||null;if(!script)throw new Error("Missing script");if(base=base||"",base.name===info.name||"script"===base.name)throw new Error("script error");return"subscript"===base.name?(base.name="script",base.operand[2]=base.operand[1],base.operand[1]=script,base):"superscript"===base.name?(base.name="script",base.operand[2]=script,base):(info.operand=[base,script],delete info.handler,info)}}},_p[30]={value:function(require){var mergeHandler=_p.r(15);return function(info,processedStack,unprocessedStack){var exponent=unprocessedStack.shift(),tmp=null,radicand=null;if("["===exponent){for(exponent=[];(tmp=unprocessedStack.shift())&&"]"!==tmp;)exponent.push(tmp);exponent=0===exponent.length?null:mergeHandler(exponent),radicand=unprocessedStack.shift()}else radicand=exponent,exponent=null;return info.operand=[radicand,exponent],delete info.handler,info}}},_p[31]={value:function(require){var ScriptExtractor=_p.r(24);return function(info,processedStack,unprocessedStack){var params=ScriptExtractor.exec(unprocessedStack);return info.operand=[params.expr,params.superscript,params.subscript],delete info.handler,info}}},_p[32]={value:function(require){function parseStruct(str){if(isSpecialCharacter(str))return str.substring(1);switch(Utils.getLatexType(str)){case"operator":return Utils.getDefine(str);case"function":return Utils.getFuncDefine(str);default:return transformSpecialCharacters(str)}}function transformSpecialCharacters(char){return 0===char.indexOf("\\")?char+"\\":char}function isSpecialCharacter(char){return 0===char.indexOf("\\")&&!!SPECIAL_LIST[char.substring(1)]}function clearEmpty(data){return data.replace(/\\\s+/,"").replace(/\s*([^a-z0-9\s])\s*/gi,function(match,symbol){return symbol})}var Parser=_p.r(54).Parser,LatexUtils=_p.r(1),PRE_HANDLER=_p.r(10),serialization=_p.r(53),OP_DEFINE=_p.r(9),REVERSE_DEFINE=_p.r(11),SPECIAL_LIST=_p.r(12),Utils=_p.r(4),DebugUtils=_p.r(5),clearCharPattern=new RegExp("￸|￼","g"),leftCharPattern=new RegExp("￸","g"),rightCharPattern=new RegExp("￼","g");Parser.register("latex",Parser.implement({parse:function(data){DebugUtils.log("input",data);var units=this.split(this.format(data));DebugUtils.log("units",units),units=this.parseToGroup(units),DebugUtils.log("parseToGroup",units),units=this.parseToStruct(units),DebugUtils.log("parseToStruct",units);var tree=this.generateTree(units);return DebugUtils.log("tree",tree),tree},serialization:function(tree,options){return serialization(tree,options)},expand:function(expandObj){var parseObj=expandObj.parse,formatKey=null,preObj=expandObj.pre,reverseObj=expandObj.reverse;for(var key in parseObj)parseObj.hasOwnProperty(key)&&(formatKey=key.replace(/\\/g,""),OP_DEFINE[formatKey]=parseObj[key]);for(var key in reverseObj)reverseObj.hasOwnProperty(key)&&(REVERSE_DEFINE[key.replace(/\\/g,"")]=reverseObj[key]);if(preObj)for(var key in preObj)preObj.hasOwnProperty(key)&&(PRE_HANDLER[key.replace(/\\/g,"")]=preObj[key])},format:function(input){input=input.replace(/\s+[\\]+\s+/g,"￰"),console.log("formatNewlineChar:"+input),input=clearEmpty(input),console.log("clearEmpty:"+input),input=input.replace(clearCharPattern,"").replace(/\\{/gi,"￸").replace(/\\}/gi,"￼");for(var key in PRE_HANDLER)PRE_HANDLER.hasOwnProperty(key)&&(input=PRE_HANDLER[key](input));return console.log("formatted input:"+input),input},split:function(data){var units=[],pattern=/(?:\\[^a-z]\s*)|(?:\\[a-z]+\s*)|(?:[{}]\s*)|(?:[^\\{}]\s*)/gi,match=null;for(data=data.replace(/^\s+|\s+$/g,"");match=pattern.exec(data);)(match=match[0].replace(/^\s+|\s+$/g,""))&&("￰"===match?units.push("\\\\"):units.push(match));return units},generateTree:function(units){for(var tree=[],currentUnit=null;currentUnit=units.shift();)Utils.isArray(currentUnit)?tree.push(this.generateTree(currentUnit)):tree.push(currentUnit);return tree=LatexUtils.toRPNExpression(tree),LatexUtils.generateTree(tree)},parseToGroup:function(units){for(var group=[],groupStack=[group],groupCount=0,bracketsCount=0,environmentConunt=0,i=0,len=units.length;i<len;i++)switch(units[i]){case"{":groupCount++,groupStack.push(group),group.push([]),group=group[group.length-1];break;case"}":groupCount--,group=groupStack.pop();break;case"\\left":bracketsCount++,groupStack.push(group),group.push([[]]),group=group[group.length-1][0],group.type="brackets",i++,group.leftBrackets=units[i].replace(leftCharPattern,"{").replace(rightCharPattern,"}");break;case"\\right":bracketsCount--,i++,group.rightBrackets=units[i].replace(leftCharPattern,"{").replace(rightCharPattern,"}"),group=groupStack.pop();break;case"\\begin":environmentConunt++,groupStack.push(group),group.push([[]]),group=group[group.length-1][0],group.type="environment",group.environmentType=this.extractEnvironmentType(i,units),i+=group.environmentType.length+2;break;case"\\end":environmentConunt--,group=groupStack.pop(),i+=this.extractEnvironmentType(i,units).length+2;break;default:group.push(units[i].replace(leftCharPattern,"\\{").replace(rightCharPattern,"\\}"))}if(0!==groupCount)throw new Error("Group Error!");if(0!==bracketsCount)throw new Error("Brackets Error!");if(0!==environmentConunt)throw new Error("Environment Error!");return groupStack[0]},extractEnvironmentType:function(start,units){var end=units.indexOf("}",start);return units.slice(start+2,end).join("")},parseToStruct:function(units){for(var structs=[],i=0,len=units.length;i<len;i++)if(Utils.isArray(units[i]))if("brackets"===units[i].type)structs.push(Utils.getBracketsDefine(units[i].leftBrackets,units[i].rightBrackets)),structs.push(this.parseToStruct(units[i]));else if("environment"===units[i].type&&Utils.isEnvironment(units[i].environmentType)){var define=Utils.getEnvironmentDefine(units[i].environmentType),subunits=Utils.extractArgumentsAndSubunit(define,units[i]);structs.push(define),structs.push(this.parseToStruct(subunits))}else structs.push(this.parseToStruct(units[i]));else structs.push(parseStruct(units[i]));return structs}}))}},_p[33]={value:function(){return function(input){return input.replace(/\\(i+)nt(\b|[^a-zA-Z])/g,function(match,sign,suffix){return"\\int "+sign.length+suffix})}}},_p[34]={value:function(){return function(input){return input.replace(/``/g,"“")}}},_p[35]={value:function(){return function(input){return input.replace(/\[/g,"[{").replace(/\]/g,"}]")}}},_p[36]={value:function(){return function(operands){return"{"!==operands[0]&&"}"!==operands[0]||(operands[0]="\\"+operands[0]),"{"!==operands[1]&&"}"!==operands[1]||(operands[1]="\\"+operands[1]),["\\left",operands[0],operands[2],"\\right",operands[1]].join(" ")}}},_p[37]={value:function(){return function(operands){return this.attr["data-root"]||this.attr["data-placeholder"]?operands.join(""):"{"+operands.join("")+"}"}}},_p[38]={value:function(){return function(operands){var args=operands[0],argsString="";args.tableLocation&&(argsString+=args.tableLocation),args.colClass&&(argsString+=args.colClass);for(var items=["\\begin{array}"+argsString],i=1,len=operands.length;i<len;i++){operands[i]?(items.push(operands[i]),i<len-1&&items.push("&")):(items.pop(),items.push("\\\\"))}return items.push("\\end{array}"),items.join(" ")}}},_p[39]={value:function(){return function(operands){for(var equationsType=operands[0].equationsType,items=["\\begin{"+equationsType+"}"],i=1,len=operands.length;i<len;i++)items.push(operands[i]),i<len-1&&items.push("\\\\");return items.push("\\end{"+equationsType+"}"),items.join(" ")}}},_p[40]={value:function(){return function(operands){var items=["\\"+operands[0]];return operands.length>2&&items.push("["+operands[2]+"]"),items.push(operands[1]),items.join("")}}},_p[41]={value:function(){return function(operands){return"\\frac "+operands[0]+" "+operands[1]}}},_p[42]={value:function(){return function(operands){var result=["\\"+operands[0]];return operands[2]&&result.push("^"+operands[2]),operands[3]&&result.push("_"+operands[3]),operands[1]&&result.push(" "+operands[1]),result.join("")}}},_p[43]={value:function(){return function(operands){var result=["\\int "];if(this.callFn&&this.callFn.setType){result=["\\"];for(var i=0,len=this.callFn.setType;i<len;i++)result.push("i");result.push("nt ")}return operands[1]&&result.push("^"+operands[1]),operands[2]&&result.push("_"+operands[2]),operands[0]&&result.push(" "+operands[0]),result.join("")}}},_p[44]={value:function(){return function(operands){return"\\mathbb{"+operands[0]+"}"}}},_p[45]={value:function(){return function(operands){return"\\mathcal{"+operands[0]+"}"}}},_p[46]={value:function(){return function(operands){return"\\mathfrak{"+operands[0]+"}"}}},_p[47]={value:function(){return function(operands){return"\\mathrm{"+operands[0]+"}"}}},_p[48]={value:function(){return function(operands){return operands[0]+"^"+operands[1]+"_"+operands[2]}}},_p[49]={value:function(){return function(operands){var result=["\\sqrt"];return operands[1]&&result.push("["+operands[1]+"]"),result.push(" "+operands[0]),result.join("")}}},_p[50]={value:function(){return function(operands){return operands[0]+"_"+operands[1]}}},_p[51]={value:function(){return function(operands){var result=["\\sum "];return operands[1]&&result.push("^"+operands[1]),operands[2]&&result.push("_"+operands[2]),operands[0]&&result.push(" "+operands[0]),result.join("")}}},_p[52]={value:function(){return function(operands){return operands[0]+"^"+operands[1]}}},_p[53]={value:function(require){function reverseParse(tree,options){var operands=[],reverseHandlerName=null,originalOperands=null;if("object"!=typeof tree)return isSpecialCharacter(tree)?"\\"+tree+" ":tree.replace(specialCharPattern,function(match,group){return group+" "});if("argument"===tree.operandType)return tree;"combination"===tree.name&&1===tree.operand.length&&"combination"===tree.operand[0].name&&(tree=tree.operand[0]),originalOperands=tree.operand;for(var i=0,len=originalOperands.length;i<len;i++)originalOperands[i]?operands.push(reverseParse(originalOperands[i])):operands.push(originalOperands[i]);return reverseHandlerName=tree.attr&&tree.attr._reverse?tree.attr._reverse:tree.name,reverseHandlerTable[reverseHandlerName].call(tree,operands,options)}function isSpecialCharacter(char){return!!SPECIAL_LIST[char]}var reverseHandlerTable=_p.r(11),SPECIAL_LIST=_p.r(12),specialCharPattern=/(\\(?:[\w]+)|(?:[^a-z]))\\/gi;return function(tree,options){return reverseParse(tree,options)}}},_p[54]={value:function(require,exports,module){function ParserProxy(ParserImpl){this.impl=new ParserImpl,this.conf={}}function ParserInterface(){this.conf={}}var CONF={},IMPL_POLL={},Utils={extend:function(target,sources){var source=null;sources=[].slice.call(arguments,1);for(var i=0,len=sources.length;i<len;i++){source=sources[i];for(var key in source)source.hasOwnProperty(key)&&(target[key]=source[key])}},setData:function(container,key,value){if("string"==typeof key)container[key]=value;else{if("object"!=typeof key)throw new Error("invalid option");for(value in key)key.hasOwnProperty(value)&&(container[value]=key[value])}}},Parser={use:function(type){if(!IMPL_POLL[type])throw new Error("unknown parser type");return this.proxy(IMPL_POLL[type])},config:function(key,value){return Utils.setData(CONF,key,value),this},register:function(type,parserImpl){return IMPL_POLL[type.toLowerCase()]=parserImpl,this},implement:function(parser){var Impl=function(){},constructor=parser.constructor||function(){},result=function(){ParserInterface.call(this),constructor.call(this)};Impl.prototype=ParserInterface.prototype,result.prototype=new Impl,delete parser.constructor;for(var key in parser)"constructor"!==key&&parser.hasOwnProperty(key)&&(result.prototype[key]=parser[key]);return result},proxy:function(parserImpl){return new ParserProxy(parserImpl)}};Utils.extend(ParserProxy.prototype,{config:function(key,value){Utils.setData(this.conf,key,value)},set:function(key,value){this.impl.set(key,value)},parse:function(data){var result={config:{},tree:this.impl.parse(data)};return Utils.extend(result.config,CONF,this.conf),result},serialization:function(tree,options){return this.impl.serialization(tree,options)},expand:function(obj){this.impl.expand(obj)}}),Utils.extend(ParserInterface.prototype,{set:function(key,value){Utils.extend(this.conf,key,value)},parse:function(){throw new Error("Abstract function")}}),module.exports={Parser:Parser,ParserInterface:ParserInterface}}},_p[55]={value:function(require){var Parser=_p.r(54).Parser;_p.r(32),window.kf.Parser=Parser,window.kf.Assembly=_p.r(0)}};var moduleMapping={"kf.start":55};!function(global){try{use("kf.start")}catch(e){}}()}();