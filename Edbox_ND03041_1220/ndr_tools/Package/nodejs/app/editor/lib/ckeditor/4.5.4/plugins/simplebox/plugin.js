CKEDITOR.plugins.add("simplebox",{requires:"widget",icons:"simplebox",init:function(editor){editor.widgets.add("simplebox",{allowedContent:"div(!simplebox,align-left,align-right,align-center){width};div(!simplebox-content); div(!simplebox-title)",requiredContent:"div(simplebox)",editables:{title:{selector:".simplebox-title",allowedContent:"br strong em"}},template:'<div class="simplebox"><div class="simplebox-title"></div></div>',button:"填空项",upcast:function(element,data){var match="div"==element.name&&element.hasClass("simplebox");if(match)return data.value=data.value||"",console.log("upcast "+data.value),console.log(element.children[0]),element.children[0].value=data.value,match},downcast:function(el){return console.log("downcast "),this.data.value=el.children[0].getHtml(),el},edit:function(){console.log("edit ");var selected=editor.getSelection(!0).getSelectedText();this.data.value=selected,$(this.element.$).find(".simplebox-title").html(this.data.value)},init:function(){console.log("init")},data:function(){console.log("data "+this.data.value),console.log($(this.element.$).find(".simplebox-title"))}})}});