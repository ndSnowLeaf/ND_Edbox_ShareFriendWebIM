function isImage(editor,el){if("1"==el.getAttribute("data-cke-widget-wrapper")){var image=el.getChild(0);return image&&"img"==image.getName()}return null}CKEDITOR.editorConfig=function(config){config.entities=!1,config.basicEntities=!0,config.removePlugins="resize",CKEDITOR.env.needsNbspFiller=!0,CKEDITOR.removePlugins="magicline",config.dialog_noConfirmCancel=!0,CKEDITOR.dtd.$editable.span=1,config.linkShowAdvancedTab=!1,config.linkShowTargetTab=!1,config.fillEmptyBlocks=!0,config.disallowedContent="a",config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},config.font_forestyle={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]},config.fontSize_forestyle={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},config.title=!1,CKEDITOR.config=config};var setTextEntrySequence=function(editor){for(var images=(CKEDITOR.basePath,editor.container.getElementsByTag("img")),sequence=0,i=0;i<images.count();i++){var image=images.getItem(i);if(image.hasClass("cke_textEntryInteraction")||image.hasClass("cke_inlinechoiceinteraction")){sequence++;var cssClass=(editor.restoreRealElement(image),sequence<=50?"no"+sequence:"other");$(image.$).attr("class",""),$(image.$).addClass("cke_textEntryInteraction"),$(image.$).addClass(cssClass)}}};$(function(){function add_event_listener(editor,commandname,stylename){var style=new CKEDITOR.style(stylename);editor.attachStyleStateChange(style,function(state){"function"==typeof window.setButtonStatus&&window.setButtonStatus(commandname,state)})}CKEDITOR.on("instanceReady",function(event){var editor=event.editor;editor.readOnly&&editor.setReadOnly(!1),setTextEntrySequence(event.editor),event.editor.on("focus",function(){CKEDITOR.last_editor=this}),event.editor.on("saveSnapshot",function(){}),event.editor.on("selectionChange",function(event){var selection=editor.getSelection(),selectImage=selection.getSelectedElement();if(window.disableButtons2)if(selectImage){var image=isImage(editor,selectImage);window.disableButtons2(!image)}else window.disableButtons2(!0)}),event.editor.on("paste",function(evt){for(var text=evt.data.dataValue,div=CKEDITOR.dom.element.createFromHtml("<div>"+text+"</div>"),entrys=div.find("img"),i=0;i<entrys.count();i++){var image=entrys.getItem(i);if(image.hasClass("cke_textEntryInteraction")){var entry=editor.restoreRealElement(image);entry.setAttribute("responseidentifier",auto_id());var fake=editor.createFakeElement(entry,"cke_textEntryInteraction","textEntryInteraction",!1);image.setAttribute("data-cke-realelement",fake.getAttribute("data-cke-realelement"))}}evt.data.dataValue=div.getHtml()}),event.editor.on("key",function(evt){if(30==evt.data.keyCode){evt.data.domEvent.stopPropagation()}});for(var config=editor.config,buttons=[{name:"Bold",stylename:config.coreStyles_bold},{name:"Italic",stylename:config.coreStyles_italic},{name:"Underline",stylename:config.coreStyles_underline},{name:"Strike",stylename:config.coreStyles_strike},{name:"Subscript",stylename:config.coreStyles_subscript},{name:"Superscript",stylename:config.coreStyles_superscript}],i=0;i<buttons.length;i++)add_event_listener(editor,buttons[i].name,buttons[i].stylename);CKEDITOR.last_editor||(CKEDITOR.last_editor=event.editor)})});