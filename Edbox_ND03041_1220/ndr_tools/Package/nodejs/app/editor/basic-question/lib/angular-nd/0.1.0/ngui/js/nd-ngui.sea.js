define(["require","angular"],function(e,t){return document.createElement("accordion"),document.createElement("accordion-group"),document.createElement("accordion-heading"),document.createElement("accordion-transclude"),document.createElement("bind-html-unsafe"),document.createElement("nd-breadcrumb"),document.createElement("btn-radio"),document.createElement("btn-checkbox"),document.createElement("carousel"),document.createElement("slide"),document.createElement("collapse"),document.createElement("multimenu"),document.createElement("navstep"),document.createElement("daypicker"),document.createElement("monthpicker"),document.createElement("yearpicker"),document.createElement("datepicker-popup"),document.createElement("datepicker-popup-wrap"),document.createElement("nd-dropdown"),document.createElement("nd-loginbox"),document.createElement("modal-backdrop"),document.createElement("modal-window"),document.createElement("modal-transclude"),document.createElement("nd-notice"),document.createElement("nd-notices-container"),document.createElement("dismiss-on-timeout"),document.createElement("pagination"),document.createElement("pager"),document.createElement("progress"),document.createElement("bar"),document.createElement("progressbar"),document.createElement("rating"),document.createElement("as-sortable"),document.createElement("as-sortable-item-handle"),document.createElement("as-sortable-item"),document.createElement("stepper"),document.createElement("tabset"),document.createElement("tab"),document.createElement("tab-heading-transclude"),document.createElement("tab-content-transclude"),document.createElement("nd-tagfilter"),document.createElement("timepicker"),document.createElement("nd-treeview-popup"),document.createElement("nd-treeview"),document.createElement("treeview"),document.createElement("typeahead"),document.createElement("typeahead-popup"),document.createElement("typeahead-match"),document.createElement("bind-html-unsafe"),document.createElement("typeahead-async"),t.module("nd.ngui",["nd.ngui.tpls","nd.ngui.accordion","nd.ngui.bindHtml","nd.ngui.breadcrumb","nd.ngui.buttons","nd.ngui.carousel","nd.ngui.collapse","nd.ngui.components","nd.ngui.dateparser","nd.ngui.datepicker","nd.ngui.dropdown","nd.ngui.loading","nd.ngui.locale","nd.ngui.loginbox","nd.ngui.modal","nd.ngui.notice","nd.ngui.pagination","nd.ngui.position","nd.ngui.progressbar","nd.ngui.rating","nd.ngui.sortable","nd.ngui.stepper","nd.ngui.tabs","nd.ngui.tagfilter","nd.ngui.timepicker","nd.ngui.tooltip","nd.ngui.transition","nd.ngui.treeview","nd.ngui.typeahead"]),t.module("nd.ngui.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/breadcrumb/breadcrumb.html","template/carousel/carousel.html","template/carousel/slide.html","template/components/layout.html","template/components/layoutRow.html","template/components/multimenu.html","template/components/navstep.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/dropdown/basic.html","template/loginbox/loginbox.html","template/modal/alert.html","template/modal/backdrop.html","template/modal/confirm.html","template/modal/window.html","template/notice/notice.html","template/notice/notices.html","template/pagination/pager.html","template/pagination/pagination.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/stepper/stepper.html","template/tabs/tab.html","template/tabs/tabset.html","template/tagfilter/tagfilter.html","template/timepicker/timepicker.html","template/tooltip/popover.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/treeview/ndTreeview.html","template/treeview/ndTreeviewPopup.html","template/typeahead/typeahead-async.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),t.module("nd.ngui.accordion",["nd.ngui.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,n,a){this.groups=[],this.closeOthers=function(i){(t.isDefined(n.closeOthers)?e.$eval(n.closeOthers):a.closeOthers)&&t.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?",theme:"@"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,a){a.addGroup(e),e.$watch("isOpen",function(t){t&&a.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,a,i){a.setHeading(i(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,a){e.$watch(function(){return a[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),t.module("nd.ngui.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),t.module("nd.ngui.breadcrumb",[]).directive("ndBreadcrumb",[function(){return{scope:{path:"=",onChange:"&"},restrict:"AE",templateUrl:"template/breadcrumb/breadcrumb.html",replace:!0,link:function(e,t,n){}}}]),t.module("nd.ngui.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,n,a,i){var o=i[0],l=i[1];l.$render=function(){n.toggleClass(o.activeClass,t.equals(l.$modelValue,e.$eval(a.btnRadio)))},n.bind(o.toggleEvent,function(){var i=n.hasClass(o.activeClass);(!i||t.isDefined(a.uncheckable))&&e.$apply(function(){l.$setViewValue(i?null:e.$eval(a.btnRadio)),l.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,n,a,i){function o(){return r(a.btnCheckboxTrue,!0)}function l(){return r(a.btnCheckboxFalse,!1)}function r(n,a){var i=e.$eval(n);return t.isDefined(i)?i:a}var s=i[0],c=i[1];c.$render=function(){n.toggleClass(s.activeClass,t.equals(c.$modelValue,o()))},n.bind(s.toggleEvent,function(){e.$apply(function(){c.$setViewValue(n.hasClass(s.activeClass)?l():o()),c.$render()})})}}}),t.module("nd.ngui.carousel",["nd.ngui.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,n,a,i){function o(){l();var t=+e.interval;!isNaN(t)&&t>0&&(s=a(r,t))}function l(){s&&(a.cancel(s),s=null)}function r(){var t=+e.interval;c&&!isNaN(t)&&t>0?e.next():e.pause()}var s,c,d=this,u=d.slides=e.slides=[],p=-1;d.currentSlide=null;var f=!1;d.select=e.select=function(a,l){function r(){f||(d.currentSlide&&t.isString(l)&&!e.noTransition&&a.$element?(a.$element.addClass(l),a.$element[0].offsetWidth,t.forEach(u,function(e){t.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),t.extend(a,{direction:l,active:!0,entering:!0}),t.extend(d.currentSlide||{},{direction:l,leaving:!0}),e.$currentTransition=i(a.$element,{}),function(t,n){e.$currentTransition.then(function(){s(t,n)},function(){s(t,n)})}(a,d.currentSlide)):s(a,d.currentSlide),d.currentSlide=a,p=c,o())}function s(n,a){t.extend(n,{direction:"",active:!0,leaving:!1,entering:!1}),t.extend(a||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var c=u.indexOf(a);void 0===l&&(l=c>p?"next":"prev"),a&&a!==d.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),n(r)):r())},e.$on("$destroy",function(){f=!0}),d.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var t=(p+1)%u.length;return e.$currentTransition?void 0:d.select(u[t],"next")},e.prev=function(){var t=0>p-1?u.length-1:p-1;return e.$currentTransition?void 0:d.select(u[t],"prev")},e.isActive=function(e){return d.currentSlide===e},e.$watch("interval",o),e.$on("$destroy",l),e.play=function(){c||(c=!0,o())},e.pause=function(){e.noPause||(c=!1,l())},d.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(d.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},d.removeSlide=function(e){var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?d.select(t>=u.length?u[t-1]:u[t]):p>t&&p--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,a){a.addSlide(e,t),e.$on("$destroy",function(){a.removeSlide(e)}),e.$watch("active",function(t){t&&a.select(e)})}}}),t.module("nd.ngui.collapse",["nd.ngui.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,a){function i(t){function a(){c===i&&(c=void 0)}var i=e(n,t);return c&&c.cancel(),c=i,i.then(a,a),i}function o(){d?(d=!1,l()):(n.removeClass("collapse").addClass("collapsing"),i({height:n[0].scrollHeight+"px"}).then(l))}function l(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function r(){d?(d=!1,s(),n.css({height:0})):(n.css({height:n[0].scrollHeight+"px"}),n[0].offsetWidth,n.removeClass("collapse in").addClass("collapsing"),i({height:0}).then(s))}function s(){n.removeClass("collapsing"),n.addClass("collapse")}var c,d=!0;t.$watch(a.collapse,function(e){e?r():o()})}}}]),t.module("nd.ngui.components",[]).directive("multimenu",[function(){return{templateUrl:"template/components/multimenu.html",link:function(e,t,n,a){}}}]).directive("navstep",[function(){return{templateUrl:"template/components/navstep.html",link:function(e,t,n,a){}}}]).directive("nd-layout",[function(){return{templateUrl:"template/components/layout.html",link:function(e,t,n,a){}}}]).directive("nd-layoutRow",[function(){return{templateUrl:"template/components/layoutRow.html",link:function(e,t,n,a){}}}]),t.module("nd.ngui.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,n){function a(e){var a=[],i=e.split("");return t.forEach(o,function(t,n){var o=e.indexOf(n);if(o>-1){e=e.split(""),i[o]="("+t.regex+")",e[o]="$";for(var l=o+1,r=o+n.length;r>l;l++)i[l]="",e[l]="$";e=e.join(""),a.push({index:o,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:n(a,"index")}}function i(e,t,n){return 1===t&&n>28?29===n&&(e%4==0&&e%100!=0||e%400==0):3!==t&&5!==t&&8!==t&&10!==t||31>n}this.parsers={};var o={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(n,o){if(!t.isString(n)||!o)return n;o=e.DATETIME_FORMATS[o]||o,this.parsers[o]||(this.parsers[o]=a(o));var l=this.parsers[o],r=l.regex,s=l.map,c=n.match(r);if(c&&c.length){for(var d,u={year:1900,month:0,date:1,hours:0},p=1,f=c.length;f>p;p++){var m=s[p-1];m.apply&&m.apply.call(u,c[p])}return i(u.year,u.month,u.date)&&(d=new Date(u.year,u.month,u.date,u.hours)),d}}}]),t.module("nd.ngui.datepicker",["nd.ngui.dateparser","nd.ngui.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!1,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,n,a,i,o,l,r,s){var c=this,d={$setViewValue:t.noop};this.modes=["day","month","year"],t.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(a,o){c[a]=t.isDefined(n[a])?8>o?i(n[a])(e.$parent):e.$parent.$eval(n[a]):s[a]}),t.forEach(["minDate","maxDate"],function(t){n[t]?e.$parent.$watch(a(n[t]),function(e){c[t]=e?new Date(e):null,c.refreshView()}):c[t]=s[t]?new Date(s[t]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=t.isDefined(n.initDate)?e.$parent.$eval(n.initDate):new Date,e.isActive=function(t){return 0===c.compare(t.date,c.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(e){d=e,d.$render=function(){c.render()}},this.render=function(){if(d.$modelValue){var e=new Date(d.$modelValue),t=!isNaN(e);t?this.activeDate=e:l.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),d.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=d.$modelValue?new Date(d.$modelValue):null;d.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=d.$modelValue?new Date(d.$modelValue):null;return{date:e,label:r(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(t){return this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||n.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===c.minMode){var n=d.$modelValue?new Date(d.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),d.$setViewValue(n),d.$render()}else c.activeDate=t,e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=c.activeDate.getFullYear()+e*(c.step.years||0),n=c.activeDate.getMonth()+e*(c.step.months||0);c.activeDate.setFullYear(t,n,1),c.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===c.maxMode&&1===t||e.datepickerMode===c.minMode&&-1===t||(e.datepickerMode=c.modes[c.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){o(function(){c.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(c.isDisabled(c.activeDate))return;e.select(c.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(c.handleKeyDown(n,t),c.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(n,a,i,o){function l(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?c[t]:29}function r(e,t){var n=new Array(t),a=new Date(e),i=0;for(a.setHours(12);t>i;)n[i++]=new Date(a),a.setDate(a.getDate()+1);return n}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}n.showWeeks=o.showWeeks,o.step={months:1},o.element=a;var c=[31,28,31,30,31,30,31,31,30,31,30,31];o._refreshView=function(){var a=o.activeDate.getFullYear(),i=o.activeDate.getMonth(),l=new Date(a,i,1),c=o.startingDay-l.getDay(),d=c>0?7-c:-c,u=new Date(l);d>0&&u.setDate(1-d);for(var p=r(u,42),f=0;42>f;f++)p[f]=t.extend(o.createDateObject(p[f],o.formatDay),{secondary:p[f].getMonth()!==i,uid:n.uniqueId+"-"+f});n.labels=new Array(7);for(var m=0;7>m;m++)n.labels[m]={abbr:e(p[m].date,o.formatDayHeader),full:e(p[m].date,"EEEE")};if(n.title=e(o.activeDate,o.formatDayTitle),n.rows=o.split(p,7),n.showWeeks){n.weekNumbers=[];for(var g=s(n.rows[0][0].date),h=n.rows.length;n.weekNumbers.push(g++)<h;);}},o.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},o.handleKeyDown=function(e,t){var n=o.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var a=o.activeDate.getMonth()+("pageup"===e?-1:1);o.activeDate.setMonth(a,1),n=Math.min(l(o.activeDate.getFullYear(),o.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=l(o.activeDate.getFullYear(),o.activeDate.getMonth()));o.activeDate.setDate(n)},o.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(n,a,i,o){o.step={years:1},o.element=a,o._refreshView=function(){for(var a=new Array(12),i=o.activeDate.getFullYear(),l=0;12>l;l++)a[l]=t.extend(o.createDateObject(new Date(i,l,1),o.formatMonth),{uid:n.uniqueId+"-"+l});n.title=e(o.activeDate,o.formatMonthTitle),n.rows=o.split(a,3)},o.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},o.handleKeyDown=function(e,t){var n=o.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var a=o.activeDate.getFullYear()+("pageup"===e?-1:1);o.activeDate.setFullYear(a)}else"home"===e?n=0:"end"===e&&(n=11);o.activeDate.setMonth(n)},o.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,n,a,i){function o(e){return parseInt((e-1)/l,10)*l+1}var l=i.yearRange;i.step={years:l},i.element=n,i._refreshView=function(){for(var n=new Array(l),a=0,r=o(i.activeDate.getFullYear());l>a;a++)n[a]=t.extend(i.createDateObject(new Date(r+a,0,1),i.formatYear),{uid:e.uniqueId+"-"+a});e.title=[n[0].label,n[l-1].label].join(" - "),e.rows=i.split(n,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e,t){var n=i.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*i.step.years:"home"===e?n=o(i.activeDate.getFullYear()):"end"===e&&(n=o(i.activeDate.getFullYear())+l-1),i.activeDate.setFullYear(n)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"今天",clearText:"重置",closeText:"确定",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,n,a,i,o,l,r){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(s,c,d,u){function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function f(e){if(e){if(t.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(t.isString(e)){var n=l.parse(e,m)||new Date(e);return isNaN(n)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),n)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var m,g=t.isDefined(d.closeOnDateSelection)?s.$parent.$eval(d.closeOnDateSelection):r.closeOnDateSelection,h=t.isDefined(d.datepickerAppendToBody)?s.$parent.$eval(d.datepickerAppendToBody):r.appendToBody;s.showButtonBar=t.isDefined(d.showButtonBar)?s.$parent.$eval(d.showButtonBar):r.showButtonBar,s.getText=function(e){return s[e+"Text"]||r[e+"Text"]},d.$observe("datepickerPopup",function(e){m=e||r.datepickerPopup,u.$render()});var v=t.element("<div datepicker-popup-wrap><div datepicker></div></div>");v.attr({"ng-model":"date","ng-change":"dateSelection()"});var b=t.element(v.children()[0]);d.datepickerOptions&&t.forEach(s.$parent.$eval(d.datepickerOptions),function(e,t){b.attr(p(t),e)}),s.watchData={},t.forEach(["minDate","maxDate","datepickerMode"],function(e){if(d[e]){var t=n(d[e]);if(s.$parent.$watch(t,function(t){s.watchData[e]=t}),b.attr(p(e),"watchData."+e),"datepickerMode"===e){var a=t.assign;s.$watch("watchData."+e,function(e,t){e!==t&&a(s.$parent,e)})}}}),d.dateDisabled&&b.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(f),s.dateSelection=function(e){t.isDefined(e)&&(s.date=e),u.$setViewValue(s.date),u.$render(),g&&(s.isOpen=!1,c[0].focus())},c.bind("input change keyup",function(){s.$apply(function(){s.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?o(u.$viewValue,m):"";c.val(e),s.date=f(u.$modelValue)};var y=function(e){s.isOpen&&e.target!==c[0]&&s.$apply(function(){s.isOpen=!1})},$=function(e,t){s.keydown(e)};c.bind("keydown",$),s.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=h?i.offset(c):i.position(c),s.position.top=s.position.top+c.prop("offsetHeight"),a.bind("click",y)):a.unbind("click",y)}),s.select=function(e){if("today"===e){var n=new Date;t.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate())):e=new Date(n.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,c[0].focus()};var w=e(v)(s);v.remove(),h?a.find("body").append(w):c.after(w),s.$on("$destroy",function(){w.remove(),c.unbind("keydown",$),a.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),t.module("nd.ngui.dropdown",[]).directive("ndDropdown",["$document",function(e){return{scope:{options:"=",withFilter:"@"},require:"ngModel",restrict:"AE",templateUrl:"template/dropdown/basic.html",replace:!0,link:function(t,n,a,i){function o(e){e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1,t.listFilter=void 0})}var l=i;t.isOpen=!1,t.selectedItem=null,t.withFilter=!!t.withFilter,t.listFilter=void 0,t.toggle=function(){t.isOpen=!t.isOpen},t.$watch("isOpen",function(t,n){t?e.bind("click",o):e.unbind("click",o)}),t.selectItem=function(e){l.$setViewValue(e),t.isOpen=!1,t.selectedItem=l.$viewValue},l.$render=function(){t.selectedItem=l.$viewValue}}}}]),t.module("nd.ngui.loading",[]).service("ndLoading",[function(){this.start=function(){},this.complete=function(){},this.dismiss=function(){}}]),t.module("nd.ngui.locale",[],["$provide",function(e){var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],MONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d ah:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"ah:mm:ss",short:"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,macFrac:0,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,macFrac:0,maxFrac:2,minFrac:2,minInt:1,negPre:"(¤",negSuf:")",posPre:"¤",posSuf:""}]},id:"zh-cn",pluralCat:function(e){return t.OTHER}})}]),t.module("nd.ngui.loginbox",[]).constant("loginboxConfig",{title:"用户登录",labelLogin:"登录",labelRegister:"注册"}).controller("LoginboxController",["$scope","$attrs","loginboxConfig",function(e,n,a){!function(){t.forEach(a,function(i,o){e[o]=t.isDefined(n[o])?e.$parent.$eval(n[o]):a[o]})}()}]).directive("ndLoginbox",function(){return{restrict:"EA",controller:"LoginboxController",templateUrl:"template/loginbox/loginbox.html",transclude:!0,replace:!0,scope:{doLogin:"&",doRegister:"&"},link:function(e,t,n,a){e.password=null,e.username=null,e.login=function(){e.doLogin({username:e.username,password:e.password})}}}}),t.module("nd.ngui.modal",["nd.ngui.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,a=0;a<e.length;a++)if(t==e[a].key){n=a;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,a){t.backdropClass=a.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,a,i){a.addClass(i.windowClass||""),n.size=i.size,t(function(){n.animate=!0,a[0].querySelectorAll("[autofocus]").length||a[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,a,i){i(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,n,a,i,o,l){function r(){for(var e=-1,t=m.keys(),n=0;n<t.length;n++)m.get(t[n]).value.backdrop&&(e=n);return e}function s(e){var t=a.find("body").eq(0),n=m.get(e).value;m.remove(e),d(n.modalDomEl,n.modalScope,300,function(){n.modalScope.$destroy(),t.toggleClass(f,m.length()>0),c()})}function c(){if(u&&-1==r()){var e=p;d(u,p,150,function(){e.$destroy(),e=null}),u=void 0,p=void 0}}function d(t,a,i,o){function l(){l.done||(l.done=!0,t.remove(),o&&o())}a.animate=!1;var r=e.transitionEndEventName;if(r){var s=n(l,i);t.bind(r,function(){n.cancel(s),l(),a.$apply()})}else n(l)}var u,p,f="modal-open",m=l.createNew(),g={};return o.$watch(r,function(e){p&&(p.index=e)}),a.bind("keydown",function(e){var t;27===e.which&&(t=m.top())&&t.value.keyboard&&(e.preventDefault(),o.$apply(function(){g.dismiss(t.key,"escape key press")}))}),g.open=function(e,n){m.add(e,{deferred:n.deferred,modalScope:n.scope,backdrop:n.backdrop,keyboard:n.keyboard});var l=a.find("body").eq(0),s=r();if(s>=0&&!u){p=o.$new(!0),p.index=s;var c=t.element("<div modal-backdrop></div>");c.attr("backdrop-class",n.backdropClass),u=i(c)(p),l.append(u)}var d=t.element("<div modal-window></div>");d.attr({"template-url":n.windowTemplateUrl,"window-class":n.windowClass,size:n.size,index:m.length()-1,animate:"animate"}).html(n.content);var g=i(d)(n.scope);m.top().value.modalDomEl=g,l.append(g),l.addClass(f)},g.close=function(e,t){var n=m.get(e);n&&(n.value.deferred.resolve(t),s(e))},g.dismiss=function(e,t){var n=m.get(e);n&&(n.value.deferred.reject(t),s(e))},g.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},g.getTop=function(){return m.top()},g}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(n,a,i,o,l,r,s){function c(e){return e.template?i.when(e.template):o.get(t.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:l}).then(function(e){return e.data})}function d(e){var a=[];return t.forEach(e,function(e){(t.isFunction(e)||t.isArray(e))&&a.push(i.when(n.invoke(e)))}),a}var u={};return u.open=function(n){var o=i.defer(),l=i.defer(),u={result:o.promise,opened:l.promise,close:function(e){s.close(u,e)},dismiss:function(e){s.dismiss(u,e)}};if(n=t.extend({},e.options,n),n.resolve=n.resolve||{},!n.template&&!n.templateUrl)throw new Error("One of template or templateUrl options is required.");var p=i.all([c(n)].concat(d(n.resolve)));return p.then(function(e){var i=(n.scope||a).$new();i.$close=u.close,i.$dismiss=u.dismiss;var l,c={},d=1;n.controller&&(c.$scope=i,c.$modalInstance=u,t.forEach(n.resolve,function(t,n){c[n]=e[d++]}),l=r(n.controller,c),n.controllerAs&&(i[n.controllerAs]=l)),s.open(u,{scope:i,deferred:o,content:e[0],backdrop:n.backdrop,keyboard:n.keyboard,backdropClass:n.backdropClass,windowClass:n.windowClass,windowTemplateUrl:n.windowTemplateUrl,size:n.size})},function(e){o.reject(e)}),p.then(function(){l.resolve(!0)},function(){l.reject(!1)}),u},u}]};return e}).constant("modalDelegatorConfigs",{animationsEnabled:!0}).service("modalDelegator",["$modal","modalDelegatorConfigs","$sce",function(e,n,a){var i=n.animationsEnabled;this.addConfirm=function(n){var a={title:null,content:null,description:null,ok:t.noop,cancel:t.noop,size:"sm"};n=t.extend(a,n),e.open({animation:i,templateUrl:"template/modal/confirm.html",controller:function(e,a){t.extend(e,n),e.ok=function(){n.ok(),a.close()},e.cancel=function(){n.cancel(),a.dismiss("cancel")}},size:n.size||"sm"})},this.addAlert=function(n){var a={title:null,content:null,description:null,type:"default",size:"sm"};n=t.extend(a,n),e.open({animation:i,templateUrl:"template/modal/alert.html",controller:function(e,a){t.extend(e,n),e.close=function(){a.dismiss("cancel")}},size:n.size||"sm"})}}]).filter("to_trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),t.module("nd.ngui.notice",[]).controller("NoticeController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("ndNotice",function(){return{restrict:"EA",controller:"NoticeController",templateUrl:"template/notice/notice.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).service("ndNoticeService",["$timeout",function(e){var t=[];this.closeNotice=function(e){t.splice(e,1)},this.getNotices=function(){return t},this.addNotice=function(n,a,i){if(n){var o={type:a||"notice",content:n};t.push(o),o.close=function(){var e=t.indexOf(o);t.splice(e,1)},parseInt(i)&&e(function(){o.close()},parseInt(i))}},this.clear=function(){t.splice(0,t.length)}}]).directive("ndNoticesContainer",["ndNoticeService",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/notice/notices.html",link:function(t,n,a){t.notices=e.getNotices()}}}]).directive("dismissOnTimeout",["$timeout",function(e){return{
require:"ndNotice",link:function(t,n,a,i){e(function(){i.close()},parseInt(a.dismissOnTimeout,10))}}}]),t.module("nd.ngui.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,n,a){var i=this,o={$setViewValue:t.noop},l=n.numPages?a(n.numPages).assign:t.noop;this.init=function(t,l){if(o=t,this.config=l,o.$render=function(){i.render()},e.withSummary){var r=e.itemsPerPage||l.itemsPerPage;l.itemsPerPageOptions.indexOf(r)<0&&(r=l.itemsPerPageOptions[0]),this.itemsPerPage=r,e.itemsPerPage=r,e.itemsPerPageOptions=l.itemsPerPageOptions,e.totalPages=i.calculateTotalPages(),e.itemsPerPageChange=function(t){i.itemsPerPage=t,e.itemsPerPage=t,e.totalPages=i.calculateTotalPages(),e.itemsPerPageChanged({value:t})}}else n.itemsPerPage?e.$parent.$watch(a(n.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,l.itemsPerPage),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=l.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(o.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(o.$setViewValue(t),o.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){l(e.$parent,t),e.page>t?e.selectPage(t):o.$render()})}]).constant("paginationConfig",{itemsPerPage:10,itemsPerPageOptions:[10,20,50],boundaryLinks:!1,directionLinks:!0,firstText:"<<",previousText:"<",nextText:">",lastText:">>",totalItemPrefixText:"共",totalItemSuffixText:"条数据,",itemPerPagePrefixText:"每页显示",itemPerPageSuffixText:"条",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,n){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",withSummary:"@",itemsPerPage:"=",itemsPerPageChanged:"&"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(a,i,o,l){function r(e,t,n){return{number:e,text:t,active:n}}function s(e,n){var a=[],i=1,o=n,l=t.isDefined(u)&&n>u;l&&(p?(i=Math.max(e-Math.floor(u/2),1),(o=i+u-1)>n&&(o=n,i=o-u+1)):(i=(Math.ceil(e/u)-1)*u+1,o=Math.min(i+u-1,n)));for(var s=i;o>=s;s++){var c=r(s,s,s===e);a.push(c)}if(l&&!p){if(i>1){var d=r(i-1,"...",!1);a.unshift(d)}if(n>o){var f=r(o+1,"...",!1);a.push(f)}}return a}var c=l[0],d=l[1];if(d){var u=t.isDefined(o.maxSize)?a.$parent.$eval(o.maxSize):n.maxSize,p=t.isDefined(o.rotate)?a.$parent.$eval(o.rotate):n.rotate;a.boundaryLinks=t.isDefined(o.boundaryLinks)?a.$parent.$eval(o.boundaryLinks):n.boundaryLinks,a.directionLinks=t.isDefined(o.directionLinks)?a.$parent.$eval(o.directionLinks):n.directionLinks,a.withSummary=a.withSummary||!1,a.itemsPerPageChanged=a.itemsPerPageChanged||t.noop,c.init(d,n),o.maxSize&&a.$parent.$watch(e(o.maxSize),function(e){u=parseInt(e,10),c.render()});var f=c.render;c.render=function(){f(),a.page>0&&a.page<=a.totalPages&&(a.pages=s(a.page,a.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« 上一页",nextText:"下一页 »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(n,a,i,o){var l=o[0],r=o[1];r&&(n.align=t.isDefined(i.align)?n.$parent.$eval(i.align):e.align,l.init(r,e))}}}]),t.module("nd.ngui.position",[]).factory("$position",["$document","$window",function(e,n){function a(e,t){return e.currentStyle?e.currentStyle[t]:n.getComputedStyle?n.getComputedStyle(e)[t]:e.style[t]}function i(e){return"static"===(a(e,"position")||"static")}var o=function(t){for(var n=e[0],a=t.offsetParent||n;a&&a!==n&&i(a);)a=a.offsetParent;return a||n};return{position:function(n){var a=this.offset(n),i={top:0,left:0},l=o(n[0]);l!=e[0]&&(i=this.offset(t.element(l)),i.top+=l.clientTop-l.scrollTop,i.left+=l.clientLeft-l.scrollLeft);var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:a.top-i.top,left:a.left-i.left}},offset:function(t){var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:a.top+(n.pageYOffset||e[0].documentElement.scrollTop),left:a.left+(n.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,a){var i,o,l,r,s=n.split("-"),c=s[0],d=s[1]||"center";i=a?this.offset(e):this.position(e),o=t.prop("offsetWidth"),l=t.prop("offsetHeight");var u={center:function(){return i.left+i.width/2-o/2},left:function(){return i.left},right:function(){return i.left+i.width}},p={center:function(){return i.top+i.height/2-l/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":r={top:p[d](),left:u[c]()};break;case"left":r={top:p[d](),left:i.left-o};break;case"bottom":r={top:p[c](),left:u[d]()};break;default:r={top:i.top-l,left:u[d]()}}return r}}}]),t.module("nd.ngui.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,n,a){var i=this,o=t.isDefined(n.animate)?e.$parent.$eval(n.animate):a.animate;this.bars=[],e.max=t.isDefined(n.max)?e.$parent.$eval(n.max):a.max,this.addBar=function(t,n){o||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,a){a.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,n,a,i){i.addBar(e,t.element(n.children()[0]))}}}),t.module("nd.ngui.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,n,a){var i={$setViewValue:t.noop};this.init=function(o){i=o,i.$render=this.render,this.stateOn=t.isDefined(n.stateOn)?e.$parent.$eval(n.stateOn):a.stateOn,this.stateOff=t.isDefined(n.stateOff)?e.$parent.$eval(n.stateOff):a.stateOff;var l=t.isDefined(n.ratingStates)?e.$parent.$eval(n.ratingStates):new Array(t.isDefined(n.max)?e.$parent.$eval(n.max):a.max);e.range=this.buildTemplateObjects(l)},this.buildTemplateObjects=function(e){for(var n=0,a=e.length;a>n;n++)e[n]=t.extend({index:n},{stateOn:this.stateOn,stateOff:this.stateOff},e[n]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o)}}}),t.module("nd.ngui.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden"}).factory("$helper",["$document","$window",function(e,t){return{height:function(e){return e.prop("offsetHeight")},width:function(e){return e.prop("offsetWidth")},offset:function(n,a){var i=n[0].getBoundingClientRect();return a||(a=e[0].documentElement),{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||a.scrollTop-a.offsetTop),left:i.left+(t.pageXOffset||a.scrollLeft-a.offsetLeft)}},eventObj:function(e){var t=e;return void 0!==e.targetTouches?t=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(t=e.originalEvent.targetTouches.item(0)),t},isTouchInvalid:function(e){var t=!1;return void 0!==e.touches&&e.touches.length>1?t=!0:void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&e.originalEvent.touches.length>1&&(t=!0),t},pageX:function(e){return e.pageX||e.clientX+document.body.scrollLeft},pageY:function(e){return e.pageY||e.clientY+document.body.scrollTop},positionStarted:function(e,t,n){var a={},i=this.pageX(e),o=this.pageY(e);return a.offsetX=i-this.offset(t,n).left,a.offsetY=o-this.offset(t,n).top,a.startX=a.lastX=i,a.startY=a.lastY=o,a.nowX=a.nowY=a.distX=a.distY=a.dirAx=0,a.dirX=a.dirY=a.lastDirX=a.lastDirY=a.distAxX=a.distAxY=0,a},calculatePosition:function(e,t){var n=this.pageX(t),a=this.pageY(t);e.lastX=e.nowX,e.lastY=e.nowY,e.nowX=n,e.nowY=a,e.distX=e.nowX-e.lastX,e.distY=e.nowY-e.lastY,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1;var i=Math.abs(e.distX)>Math.abs(e.distY)?1:0;e.dirAx!==i?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=i},movePosition:function(e,t,n,a,i,o){var l,r="relative"===i,s=this.pageX(e),c=this.pageY(e);t.x=s-n.offsetX,t.y=c-n.offsetY,a&&(l=this.offset(a,o),r&&(t.x-=l.left,t.y-=l.top,l.left=0,l.top=0),t.x<l.left?t.x=l.left:t.x>=l.width+l.left-this.offset(t).width&&(t.x=l.width+l.left-this.offset(t).width),t.y<l.top?t.y=l.top:t.y>=l.height+l.top-this.offset(t).height&&(t.y=l.height+l.top-this.offset(t).height)),t.css({left:t.x?t.x+"px":"",top:t.y?t.y+"px":""}),this.calculatePosition(n,e)},dragItem:function(e){return{index:e.index(),parent:e.sortableScope,source:e,sourceInfo:{index:e.index(),itemScope:e.itemScope,sortableScope:e.sortableScope},moveTo:function(e,t){this.parent=e,this.isSameParent()&&this.source.index()<t&&(t-=1),this.index=t},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(e){return void 0!==e.attr("no-drag")||void 0!==e.attr("data-no-drag")}}}]).controller("ui.sortable.sortableController",["$scope",function(e){this.scope=e,e.modelValue=null,e.callbacks=null,e.type="sortable",e.options={},e.isDisabled=!1,e.insertItem=function(t,n){e.safeApply(function(){e.modelValue.splice(t,0,n)})},e.removeItem=function(t){var n=null;return t>-1&&e.safeApply(function(){n=e.modelValue.splice(t,1)[0]}),n},e.isEmpty=function(){return e.modelValue&&0===e.modelValue.length},e.accept=function(t,n,a){return e.callbacks.accept(t,n,a)},e.safeApply=function(e){var t=this.$root.$$phase;"$apply"===t||"$digest"===t?e&&"function"==typeof e&&e():this.$apply(e)}}]).directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"ui.sortable.sortableController",link:function(e,n,a,i){var o,l;(o=i)&&(o.$render=function(){o.$modelValue&&t.isArray(o.$modelValue)||o.$setViewValue([]),e.modelValue=o.$modelValue},e.element=n,l={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragCancel:null,dragEnd:null},l.accept=function(e,t,n){return!0},l.orderChanged=function(e){},l.itemMoved=function(e){},l.dragStart=function(e){},l.dragCancel=function(e){},l.dragEnd=function(e){},e.$watch(a.asSortable,function(n,a){t.forEach(n,function(t,n){l[n]?"function"==typeof t&&(l[n]=t):e.options[n]=t}),e.callbacks=l},!0),t.isDefined(a.isDisabled)&&e.$watch(a.isDisabled,function(n,a){t.isUndefined(n)||(e.isDisabled=n)},!0))}}}).controller("ui.sortable.sortableItemHandleController",["$scope",function(e){this.scope=e,e.itemScope=null,e.type="handle"}]).directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(e,n,a,i){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"ui.sortable.sortableItemHandleController",link:function(o,l,r,s){function c(e,t){e[0].parentNode.insertBefore(f[0],e[0]),h.moveTo(t.sortableScope,t.index())}function d(e,t){e.after(f),h.moveTo(t.sortableScope,t.index()+1)}function u(){m.replaceWith(o.itemScope.element),f.remove(),p.remove(),p=null,V=!1,v.css("cursor","")}var p,f,m,g,h,v,b,y,$,w,x,k,D,C,E,M,T,P,S,O,A,V,I=!1;A=a.hasOwnProperty&&a.hasOwnProperty("ontouchstart"),e.handleClass&&l.addClass(e.handleClass),o.itemScope=s.scope,o.$watch("sortableScope.isDisabled",function(e){I!==e&&(I=e,I?P():T())}),y=function(e){var a,o=function(){t.element(i).unbind("mousemove",r),t.element(i).unbind("touchmove",r),l.unbind("mouseup",o),l.unbind("touchend",o),l.unbind("touchcancel",o)},r=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=n.eventObj(t);a||(a={clientX:i.clientX,clientY:i.clientY}),Math.abs(i.clientX-a.clientX)+Math.abs(i.clientY-a.clientY)>10&&(o(),w(e))};t.element(i).bind("mousemove",r),t.element(i).bind("touchmove",r),l.bind("mouseup",o),l.bind("touchend",o),l.bind("touchcancel",o)},w=function(a){var l,r;if((A||2!==a.button&&3!==a.which)&&!(A&&n.isTouchInvalid(a)||V)&&C(a)){V=!0,a.preventDefault?a.preventDefault():a.returnValue=!1,l=n.eventObj(a);var s=i[0].querySelector(o.sortableScope.options.scrollableContainer);$=s&&t.element(s).length>0?s:i[0].documentElement;var c=i[0].querySelector(o.sortableScope.options.containment);v=t.element(c&&t.element(c).length>0?c:i[0].body),v.css("cursor","move"),b=o.sortableScope.options.containerPositioning||"absolute",h=n.dragItem(o),r=o.itemScope.element.prop("tagName"),p=t.element(i[0].createElement(o.sortableScope.element.prop("tagName"))).addClass(o.sortableScope.element.attr("class")).addClass(e.dragClass),p.css("width",n.width(o.itemScope.element)+"px"),p.css("height",n.height(o.itemScope.element)+"px"),f=t.element(i[0].createElement(r)).addClass(e.placeHolderClass).addClass(o.sortableScope.options.additionalPlaceholderClass),f.css("width",n.width(o.itemScope.element)+"px"),f.css("height",n.height(o.itemScope.element)+"px"),m=t.element(i[0].createElement(r)),e.hiddenClass&&m.addClass(e.hiddenClass),g=n.positionStarted(l,o.itemScope.element,$),o.itemScope.element.after(f),o.itemScope.element.after(m),p.append(o.itemScope.element),v.append(p),n.movePosition(l,p,g,v,b,$),o.sortableScope.dragElement=p,o.sortableScope.$apply(function(){o.callbacks.dragStart(h.eventArgs())}),S()}},C=function(e){var a,i,o;for(a=t.element(e.target),i=a.scope(),o=!1;!o&&void 0!==i;)i.type&&"handle"===i.type?o=!0:i=i.$parent;for(;o&&a[0]!==l[0];)n.noDrag(a)&&(o=!1),a=a.parent();return o},x=function(l){var r,s,u,m,y;if((!A||!n.isTouchInvalid(l))&&V&&p){l.preventDefault?l.preventDefault():l.returnValue=!1,r=n.eventObj(l),n.movePosition(r,p,g,v,b,$);var w=n.pageX(r),x=n.pageY(r);if(s=w-i[0].documentElement.scrollLeft,u=x-(a.pageYOffset||i[0].documentElement.scrollTop),p.addClass(e.hiddenClass),i[0].elementFromPoint(s,u),y=t.element(i[0].elementFromPoint(s,u)),p.removeClass(e.hiddenClass),!(m=y.scope())||!m.type)return;if("handle"===m.type&&(m=m.itemScope),"item"!==m.type&&"sortable"!==m.type)return;"item"===m.type&&(y=m.element,m.sortableScope.accept(o,m.sortableScope,m)&&(g.dirAx&&o.itemScope.sortableScope.$id===m.sortableScope.$id?(g.distAxX=0,g.distX<0?c(y,m):g.distX>0&&d(y,m)):E(r,y)?c(y,m):d(y,m))),"sortable"===m.type&&m.accept(o,m)&&y[0].parentNode!==m.element[0]&&(M(y)||(y[0].appendChild(f[0]),h.moveTo(m,m.modelValue.length)))}},M=function(n){var a,i,o;for(a=n.children(),o=0;o<a.length;o+=1)if(t.element(a[o]).hasClass(e.placeHolderClass)){i=!0;break}return i},E=function(e,t){var a;return!1,a=n.offset(t),n.offset(f).top>a.top?n.offset(p).top<a.top+n.height(t)/2:e.pageY<a.top},k=function(e){V&&(e.preventDefault?e.preventDefault():e.returnValue=!1,p&&(u(),h.apply(),o.sortableScope.$apply(function(){h.isSameParent()?h.isOrderChanged()&&o.callbacks.orderChanged(h.eventArgs()):o.callbacks.itemMoved(h.eventArgs())}),o.sortableScope.$apply(function(){o.callbacks.dragEnd(h.eventArgs())}),h=null),O())},D=function(e){V&&(e.preventDefault?e.preventDefault():e.returnValue=!1,p&&(u(),o.sortableScope.$apply(function(){o.callbacks.dragCancel(h.eventArgs())}),h=null),O())},T=function(){l.bind("touchstart",y),l.bind("mousedown",y)},P=function(){l.unbind("touchstart",y),l.unbind("mousedown",y)},T(),t.element(i[0].body).bind("keydown",function(e){27===e.keyCode&&D(e)}),S=function(){t.element(i).bind("touchmove",x),t.element(i).bind("touchend",k),t.element(i).bind("touchcancel",D),t.element(i).bind("mousemove",x),t.element(i).bind("mouseup",k)},O=function(){t.element(i).unbind("touchend",k),t.element(i).unbind("touchcancel",D),t.element(i).unbind("touchmove",x),t.element(i).unbind("mouseup",k),t.element(i).unbind("mousemove",x)}}}}]).controller("ui.sortable.sortableItemController",["$scope",function(e){this.scope=e,e.sortableScope=null,e.modelValue=null,e.type="item",e.index=function(){var t=e.sortableScope.modelValue;if(t.indexOf)return t.indexOf(e.modelValue);for(var n=0;n<t.length;n++)if(e.modelValue===t[n])return n;return-1},e.itemData=function(){return e.sortableScope.modelValue[e.$index]}}]).directive("asSortableItem",["sortableConfig",function(e){return{require:"^asSortable",restrict:"A",controller:"ui.sortable.sortableItemController",link:function(t,n,a,i){e.itemClass&&n.addClass(e.itemClass),t.sortableScope=i.scope,t.modelValue=i.scope.modelValue[t.$index],t.element=n}}}]),t.module("nd.ngui.stepper",[]).directive("stepper",["$parse",function(e){return{scope:{max:"=",min:"=",step:"="},require:"ngModel",restrict:"AE",templateUrl:"template/stepper/stepper.html",replace:!0,link:function(n,a,i,o){function l(e){n.stepValue=Number(n.stepValue),n.stepValue+=e;var t=/\.(\d+)/g.exec(n.step);t&&(n.stepValue=n.stepValue.toFixed(t[1].length))}var r=o,s=e(i.ngModel);n.stepValue=s(n.$parent),n.add=function(){l(n.step||1)},n.minus=function(){l(-n.step||-1)},n.$watch("stepValue",function(){t.isDefined(n.max)&&n.stepValue>n.max&&(n.stepValue=n.max),t.isDefined(n.min)&&n.stepValue<n.min&&(n.stepValue=n.min),r.$setViewValue(Number(n.stepValue))})}}}]),t.module("nd.ngui.tabs",[]).controller("TabsetController",["$scope",function(e){var n=this,a=n.tabs=e.tabs=[];n.select=function(e){t.forEach(a,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},n.addTab=function(e){a.push(e),1===a.length?e.active=!0:e.active&&n.select(e)},n.removeTab=function(e){var t=a.indexOf(e);if(e.active&&a.length>1&&!i){var o=t==a.length-1?t-1:t+1;n.select(a[o])}a.splice(t,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,n,a){e.vertical=!!t.isDefined(a.vertical)&&e.$parent.$eval(a.vertical),e.justified=!!t.isDefined(a.justified)&&e.$parent.$eval(a.justified)}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,a){return function(t,n,i,o){t.$watch("active",function(e){e&&o.select(t)}),t.disabled=!1,i.disabled&&t.$parent.$watch(e(i.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},o.addTab(t),t.$on("$destroy",function(){o.removeTab(t)}),t.$transcludeFn=a}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,a){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(n,a,i){var o=n.$eval(i.tabContentTransclude);o.$transcludeFn(o.$parent,function(n){t.forEach(n,function(t){e(t)?o.headingElement=t:a.append(t)})})}}}),t.module("nd.ngui.tagfilter",[]).directive("ndTagfilter",[function(){return{scope:{options:"=",title:"=",expandable:"@"},require:"ngModel",restrict:"AE",templateUrl:"template/tagfilter/tagfilter.html",replace:!0,link:function(e,t,n,a){function i(){for(var t=o.$viewValue,n=-1,a=0;a<e.options.length;a++)(t==e.options[a]||t==e.options[a].value)&&(n=a);return n}var o=a;e.selectedIdx=void 0,e.expandable=e.expandable||!1,e.expand=!1,e.selectItem=function(t,n){e.selectedIdx!=n&&(o.$setViewValue(t),e.selectedIdx=n)},e.toggleExpand=function(){e.expand=!e.expand},o.$render=function(){o.$viewValue||o.$setViewValue(e.options[0].value||e.options[0]),e.selectedIdx=i()}}}}]),t.module("nd.ngui.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,n,a,i,o,l){function r(){var t=parseInt(e.hours,10);return(e.showMeridian?t>0&&13>t:t>=0&&24>t)?(e.showMeridian&&(12===t&&(t=0),e.meridian===h[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function c(e){return t.isDefined(e)&&e.toString().length<2?"0"+e:e}function d(e){u(),g.$setViewValue(new Date(m)),p(e)}function u(){g.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function p(t){var n=m.getHours(),a=m.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:c(n),e.minutes="m"===t?a:c(a),e.meridian=m.getHours()<12?h[0]:h[1]}function f(e){var t=new Date(m.getTime()+6e4*e);m.setHours(t.getHours(),t.getMinutes()),d()}var m=new Date,g={$setViewValue:t.noop},h=t.isDefined(n.meridians)?e.$parent.$eval(n.meridians):l.meridians||o.DATETIME_FORMATS.AMPMS;this.init=function(a,i){g=a,g.$render=this.render;var o=i.eq(0),r=i.eq(1);(t.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):l.mousewheel)&&this.setupMousewheelEvents(o,r),e.readonlyInput=t.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):l.readonlyInput,this.setupInputEvents(o,r)};var v=l.hourStep;n.hourStep&&e.$parent.$watch(a(n.hourStep),function(e){v=parseInt(e,10)});var b=l.minuteStep;n.minuteStep&&e.$parent.$watch(a(n.minuteStep),function(e){b=parseInt(e,10)}),e.showMeridian=l.showMeridian,n.showMeridian&&e.$parent.$watch(a(n.showMeridian),function(n){if(e.showMeridian=!!n,g.$error.time){var a=r(),i=s();t.isDefined(a)&&t.isDefined(i)&&(m.setHours(a),d())}else p()}),this.setupMousewheelEvents=function(t,n){var a=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(a(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(a(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(n,a){if(e.readonlyInput)return e.updateHours=t.noop,void(e.updateMinutes=t.noop);var i=function(n,a){g.$setViewValue(null),g.$setValidity("time",!1),t.isDefined(n)&&(e.invalidHours=n),t.isDefined(a)&&(e.invalidMinutes=a)};e.updateHours=function(){var e=r();t.isDefined(e)?(m.setHours(e),d("h")):i(!0)},n.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours)})}),e.updateMinutes=function(){var e=s();t.isDefined(e)?(m.setMinutes(e),d("m")):i(void 0,!0)},a.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})})},this.render=function(){var e=g.$modelValue?new Date(g.$modelValue):null;isNaN(e)?(g.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(m=e),u(),p())},e.incrementHours=function(){f(60*v)},e.decrementHours=function(){f(60*-v)},e.incrementMinutes=function(){f(b)},e.decrementMinutes=function(){f(-b)},e.toggleMeridian=function(){f(720*(m.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,a){var i=a[0],o=a[1];o&&i.init(o,t.find("input"))}}}),t.module("nd.ngui.tooltip",["nd.ngui.position","nd.ngui.bindHtml"]).provider("$tooltip",function(){function e(e){return e.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})}var n={placement:"top",animation:!0,popupDelay:0},a={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){t.extend(i,e)},this.setTriggers=function(e){t.extend(a,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(o,l,r,s,c,d){return function(o,u,p){function f(e){var t=e||m.trigger||p;return{show:t,hide:a[t]||t}}var m=t.extend({},n,i),g=e(o),h=d.startSymbol(),v=d.endSymbol(),b="<div "+g+'-popup title="'+h+"title"+v+'" content="'+h+"content"+v+'" placement="'+h+"placement"+v+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,n){var a=l(b);return function(e,n,i){function l(){P.isOpen?p():d()}function d(){(!T||e.$eval(i[u+"Enable"]))&&(y(),P.popupDelay?C||(C=r(g,P.popupDelay,!1),C.then(function(e){e()})):g()())}function p(){e.$apply(function(){h()})}function g(){return C=null,D&&(r.cancel(D),D=null),P.content?(v(),x.css({top:0,left:0,display:"block"}),E?s.find("body").append(x):n.after(x),S(),P.isOpen=!0,P.$digest(),S):t.noop}function h(){P.isOpen=!1,r.cancel(C),C=null,P.animation?D||(D=r(b,500)):b()}function v(){x&&b(),k=P.$new(),x=a(k,t.noop)}function b(){D=null,x&&(x.remove(),x=null),k&&(k.$destroy(),k=null)}function y(){$(),w()}function $(){var e=i[u+"Placement"];P.placement=t.isDefined(e)?e:m.placement}function w(){var e=i[u+"PopupDelay"],t=parseInt(e,10);P.popupDelay=isNaN(t)?m.popupDelay:t}var x,k,D,C,E=!!t.isDefined(m.appendToBody)&&m.appendToBody,M=f(void 0),T=t.isDefined(i[u+"Enable"]),P=e.$new(!0),S=function(){var e=c.positionElements(n,x,P.placement,E);e.top+="px",e.left+="px",x.css(e)};P.isOpen=!1,i.$observe(o,function(e){P.content=e,!e&&P.isOpen&&h()}),i.$observe(u+"Title",function(e){P.title=e});var O=function(){n.unbind(M.show,d),n.unbind(M.hide,p)};!function(){var e=i[u+"Trigger"];O(),M=f(e),M.show===M.hide?n.bind(M.show,l):(n.bind(M.show,d),n.bind(M.hide,p))}();var A=e.$eval(i[u+"Animation"]);P.animation=t.isDefined(A)?!!A:m.animation;var V=e.$eval(i[u+"AppendToBody"]);E=t.isDefined(V)?V:E,E&&e.$on("$locationChangeSuccess",function(){P.isOpen&&h()}),e.$on("$destroy",function(){r.cancel(D),r.cancel(C),O(),b(),P=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),t.module("nd.ngui.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,n,a){function i(e){for(var t in e)if(void 0!==l.style[t])return e[t]}var o=function(i,l,r){r=r||{};var s=e.defer(),c=o[r.animation?"animationEndEventName":"transitionEndEventName"],d=function(e){a.$apply(function(){i.unbind(c,d),s.resolve(i)})};return c&&i.bind(c,d),n(function(){t.isString(l)?i.addClass(l):t.isFunction(l)?l(i):t.isObject(l)&&i.css(l),c||s.resolve(i)}),s.promise.cancel=function(){c&&i.unbind(c,d),s.reject("Transition cancelled")},s.promise},l=document.createElement("trans"),r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return o.transitionEndEventName=i(r),o.animationEndEventName=i(s),o}]),t.module("nd.ngui.treeview",[]).filter("array2path",function(){return function(e){return t.isArray(e)?e.join(" > "):e}}).directive("ndTreeviewPopup",["$parse",function(e){return{scope:{treeList:"=",nodeChange:"&",nodeLabel:"@",nodeChildren:"@",title:"@"},require:"ngModel",restrict:"E",templateUrl:"template/treeview/ndTreeviewPopup.html",replace:!0,link:function(n,a,i,o){function l(){var e=n.tree.fullPath,a=n.treeList,i=void 0,o=0,l=n.nodeLabel,r=n.nodeChildren;do{i=void 0,t.forEach(a,function(t){t[l]==e[o]&&t[r]&&(a=t[r]||null,i=t)}),o++}while(o<e.length&&i);return i}n.title=n.title||"请选择..",function(){n.nodeChange=n.nodeChange||t.noop;var a=e(i.ngModel);n.tree.fullPath=a(n.$parent),n.tree.currentNode=l(),n.tree.currentNode&&(n.tree.currentNode.selected="selected"),n.nodeChange({fullpath:n.tree.fullPath,currentNode:n.tree.currentNode})}(),n.cancel=function(){n.tree.fullPath=o.$viewValue,n.showPanel=!1},n.open=function(){n.showPanel=!0},n.save=function(){o.$setViewValue(n.tree.fullPath),n.nodeChange({fullpath:n.tree.fullPath,currentNode:n.tree.currentNode}),n.cancel()}}}}]).directive("ndTreeview",["$parse",function(e){return{scope:{treeList:"=",nodeChange:"&",nodeLabel:"@",nodeChildren:"@",title:"@"},require:"ngModel",restrict:"E",templateUrl:"template/treeview/ndTreeview.html",replace:!0,link:function(n,a,i,o){function l(){var e=n.tree.fullPath,a=n.treeList,i=void 0,o=0,l=n.nodeLabel,r=n.nodeChildren;do{i=void 0,t.forEach(a,function(t){t[l]==e[o]&&t[r]&&(a=t[r]||null,i=t)}),o++}while(o<e.length&&i);return i}(function(){n.nodeChange=n.nodeChange||t.noop;var a=e(i.ngModel);n.tree.fullPath=a(n.$parent),n.tree.currentNode=l(),n.tree.currentNode&&(n.tree.currentNode.selected="selected")})(),n.$watch("tree.fullPath",function(e,t){o.$setViewValue(e),n.nodeChange({fullpath:n.tree.fullPath,currentNode:n.tree.currentNode})})}}}]).directive("treeview",["$compile",function(e){return{restrict:"A",link:function(n,a,i){function o(e,t){var n=[],a=e;do{n.unshift(a.node[t]),a=a.$parent||null}while(a.node&&void 0!=a.node[t]);return n}
var l=i.treeId,r=i.treeModel,s=i.nodeId||"id",c=i.nodeLabel||"label",d=i.nodeChildren||"children",u='<ul class="tree-model nd-treeview"><li class="{{node.type ? \'node-\'+node.type : null}}" ng-repeat="node in '+r+'"><i class="collapsed" ng-show="node.'+d+'.length && node.collapsed" ng-click="'+l+'.selectNodeHead(node)"></i><i class="expanded" ng-show="node.'+d+'.length && !node.collapsed" ng-click="'+l+'.selectNodeHead(node)"></i><i class="normal" ng-hide="node.'+d+'.length"></i> <span ng-class="node.selected" ng-click="'+l+'.selectNodeLabel(node,this)">{{node.'+c+'}}</span><div ng-hide="node.collapsed" treeview tree-id="'+l+'" tree-model="node.'+d+'" node-id='+s+" node-label="+c+" node-children="+d+"></div></li></ul>";l&&r&&(n[l]=n[l]||{},n[l].selectNodeHead=n[l].selectNodeHead||function(e){e.collapsed=!e.collapsed},n[l].selectNodeLabel=n[l].selectNodeLabel||function(e,a){t.element(e);var i=o(a,c);n[l].currentNode&&n[l].currentNode.selected&&(n[l].currentNode.selected=void 0),e.selected="selected",n[l].currentNode=e,n[l].fullPath=i},a.html("").append(e(u)(n)))}}}]),t.module("nd.ngui.typeahead",["nd.ngui.position","nd.ngui.bindHtml"]).factory("typeaheadParser",["$parse",function(e){return{parse:function(t){var n=t.match(/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+t+'".');return{itemName:n[3],source:e(n[4]),viewMapper:e(n[2]||n[1]),modelMapper:e(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,n,a,i,o,l,r){var s=[9,13,27,38,40];return{require:"ngModel",link:function(c,d,u,p){var f,m=c.$eval(u.typeaheadMinLength)||0,g=c.$eval(u.typeaheadWaitMs)||0,h=!1!==c.$eval(u.typeaheadEditable),v=n(u.typeaheadLoading).assign||t.noop,b=n(u.typeaheadOnSelect),y=u.typeaheadInputFormatter?n(u.typeaheadInputFormatter):void 0,$=!!u.typeaheadAppendToBody&&c.$eval(u.typeaheadAppendToBody),w=!1!==c.$eval(u.typeaheadFocusFirst),x=c.$eval(u.typeaheadFocusShowAll)||!1,k=n(u.ngModel).assign,D=r.parse(u.typeahead),C=c.$new();c.$on("$destroy",function(){C.$destroy()});var E="typeahead-"+C.$id+"-"+Math.floor(1e4*Math.random());d.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":E});var M=t.element("<div typeahead-popup></div>");M.attr({id:E,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),t.isDefined(u.typeaheadTemplateUrl)&&M.attr("template-url",u.typeaheadTemplateUrl);var T=function(){C.matches=[],C.activeIdx=-1,d.attr("aria-expanded",!1)},P=function(e){return E+"-option-"+e};C.$watch("activeIdx",function(e){0>e?d.removeAttr("aria-activedescendant"):d.attr("aria-activedescendant",P(e))});var S=function(e){var t={$viewValue:e};v(c,!0),D.source(c,t),a.when(D.source(c,t)).then(function(n){var a=e===p.$viewValue;if(a&&f)if(n.length>0){C.activeIdx=w?0:-1,C.matches.length=0;for(var i=0;i<n.length;i++)t[D.itemName]=n[i],C.matches.push({id:P(i),label:D.viewMapper(C,t),model:n[i]});C.query=e,C.position=$?l.offset(d):l.position(d),C.position.top=C.position.top+d.prop("offsetHeight"),d.attr("aria-expanded",!0)}else T();a&&v(c,!1)},function(){T(),v(c,!1)})};T(),C.query=void 0;var O,A=function(e){O=i(function(){S(e)},g)},V=function(){O&&i.cancel(O)};p.$parsers.unshift(function(e){return f=!0,e&&e.length>=m||x?g>0?(V(),A(e)):S(e):(v(c,!1),V(),T()),h?e:e?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),e)}),p.$formatters.push(function(e){var t,n,a={};return y?(a.$model=e,y(c,a)):(a[D.itemName]=e,t=D.viewMapper(c,a),a[D.itemName]=void 0,n=D.viewMapper(c,a),t!==n?t:e)}),C.select=function(e){var t,n,a={};a[D.itemName]=n=C.matches[e].model,t=D.modelMapper(c,a),k(c,t),p.$setValidity("editable",!0),b(c,{$item:n,$model:t,$label:D.viewMapper(c,a)}),T(),i(function(){d[0].focus()},0,!1)},d.bind("focus",function(){x&&!d.val()&&p.$setViewValue(d.val())}),d.bind("keydown",function(e){0!==C.matches.length&&-1!==s.indexOf(e.which)&&(-1!=C.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(C.activeIdx=(C.activeIdx+1)%C.matches.length,C.$digest()):38===e.which?(C.activeIdx=(C.activeIdx>0?C.activeIdx:C.matches.length)-1,C.$digest()):13===e.which||9===e.which?C.$apply(function(){C.select(C.activeIdx)}):27===e.which&&(e.stopPropagation(),T(),C.$digest()))}),d.bind("blur",function(e){f=!1});var I=function(e){d[0]!==e.target&&(T(),C.$digest())};o.bind("click",I),c.$on("$destroy",function(){o.unbind("click",I),$&&N.remove()});var N=e(M)(C);$?o.find("body").append(N):d.after(N)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,a){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,o,l){var r=a(l.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";e.get(r,{cache:t}).success(function(e){o.replaceWith(n(e.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}).directive("typeaheadAsync",["$http",function(e){return{require:"ngModel",restrict:"AE",templateUrl:"template/typeahead/typeahead-async.html",link:function(e,t,n,a){}}}]),t.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel nd-accordion-group" ng-class="theme?\'panel-\'+theme:\'panel-default\'">\n    <div class="panel-heading">\n        <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n    </div>\n    <div class="panel-collapse" collapse="!isOpen">\n        <div class="panel-body" ng-transclude></div>\n    </div>\n</div>\n')}]),t.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group nd-accordion" ng-transclude></div>')}]),t.module("template/breadcrumb/breadcrumb.html",[]).run(["$templateCache",function(e){e.put("template/breadcrumb/breadcrumb.html",'<ol class="breadcrumb nd-breadcrumb">\n\t<li ng-repeat="part in path" ng-class="{\'active\':$last}">\n\t\t<a ng-if="!$last" ng-href="{{part.path}}" ng-click="onChange({\'path\':part.path})">{{part.label}}</a>\n\t\t<span ng-if="$last">{{part.label}}</span>\n\t</li>\n</ol>')}]),t.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),t.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),t.module("template/components/layout.html",[]).run(["$templateCache",function(e){e.put("template/components/layout.html",'<h4>固定宽度的列，尺寸有smaller,small,default,large,larger五种</h4>\n<div class="nd-layout-col">\n    <div class="col-left col-small" style="height:100px; background-color:blue;"></div>\n    <div class="col-right col-large" style="height:100px; background-color:green;"></div>\n    <div class="col-right col-larger" style="height:100px; background-color:red;"></div>\n</div>\n<h4>百分比于父容器宽度的列，命名类似bs的栅格化系统，分为12列</h4>\n<div class="nd-layout-col">\n    <div class="col-left col-relative-2" style="height:100px; background-color:purple;"></div>\n</div>\n<h4>占满余下宽度的列,仅有一个，且一定要放最后</h4>\n<div class="nd-layout-col">\n    <div class="col-compatible" style="background-color:gray;">\n        <p>fdsfsdfsdf fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd fdfgdfdsfsdfsdf gsdfgdsfsd</p>\n    </div>\n</div>\n')}]),t.module("template/components/layoutRow.html",[]).run(["$templateCache",function(e){e.put("template/components/layoutRow.html",'<div class="nd-layout-row header-fixed-small footer-fixed-default" style="height:500px;">\n    <div class="row-header" style="background-color:red;"></div>\n    <div class="row-compatible" style="background-color:blue; color:#fff; text-align:center; font-size:20px;">\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n        <p>test</p>\n    </div>\n    <div class="row-footer" style="background-color:yellow;"></div>\n</div>')}]),t.module("template/components/multimenu.html",[]).run(["$templateCache",function(e){e.put("template/components/multimenu.html",'<ul class="nd-multimenu list-unstyled">\n    <li>\n        <div class="menu-head">\n            <button type="button" class="btn btn-link">建立子集</button>\n            <button type="button" class="btn btn-link">删除</button>\n            <a href="javascript:;" class="menu-title">\n                <span class="txtorder">第一章</span>\n                <span class="txttit" contenteditable="true">有理数</span>\n            </a>\n        </div>\n        <ul class="menu-body list-unstyled in">\n            <li>\n                <div class="menu-head">\n                    <button type="button" class="btn btn-link">建立子集</button>\n                    <button type="button" class="btn btn-link">删除</button>\n                    <a href="javascript:;" class="menu-title">\n                        <span class="txtorder">1.1</span>\n                        <span class="txttit" contenteditable="true">正数与负数</span>\n                    </a>\n                </div>\n                <ul class="menu-body list-unstyled in">\n                    <li>\n                        <div class="menu-head">\n                            <button type="button" class="btn btn-link">删除</button>\n                            <a href="javascript:;" class="menu-title">\n                                <span class="txtorder">1.1.1</span>\n                                <span class="txttit" contenteditable="true">有理数的加法有理数的加法有理数的加法有理数的加法有理数的加法有理数的加法有理数的加法</span>\n                            </a>\n                        </div>\n                    </li>\n                    <li>\n                        <div class="menu-head">\n                            <button type="button" class="btn btn-link">删除</button>\n                            <a href="javascript:;" class="menu-title">\n                                <span class="txtorder">1.1.2</span>\n                                <span class="txttit" contenteditable="true">绝对值与相反数</span>\n                            </a>\n                        </div>\n                    </li>\n                </ul>\n            </li>\n        </ul>\n    </li>\n    <li>\n        <div class="menu-head">\n            <button type="button" class="btn btn-link">建立子集</button>\n            <button type="button" class="btn btn-link">删除</button>\n            <a href="javascript:;" class="menu-title">\n                <span class="txtorder">第二章</span>\n                <span class="txttit" contenteditable="true">有理数</span>\n            </a>\n        </div>\n    </li>\n</ul>\n')}]),t.module("template/components/navstep.html",[]).run(["$templateCache",function(e){e.put("template/components/navstep.html",'<div class="nd-navstep grid-center">\n    <a href="javascript:;" class="on">\n        <span class="num">1</span>\n        <p class="txt">添加教材</p>\n    </a>\n    <a href="javascript:;">\n        <span class="num">2</span>\n        <p class="txt">添加章节目录</p>\n    </a>\n    <a href="javascript:;">\n        <span class="num">3</span>\n        <p class="txt">添加章节目录</p>\n    </a>\n    <a href="javascript:;">\n        <span class="num">4</span>\n        <p class="txt">添加章节目录</p>\n    </a>\n</div>\n')}]),t.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),t.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),t.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),t.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),t.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),t.module("template/dropdown/basic.html",[]).run(["$templateCache",function(e){e.put("template/dropdown/basic.html",'<div class="btn-group nd-dropdown" ng-class="{\'ng-dropdown-open\':isOpen}">\n    <button type="button" class="btn btn-default dropdown-toggle" ng-click="toggle()">\n        {{selectedItem.label || selectedItem || \'请选择..\'}} <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu">\n        <li ng-show="withFilter" class="search">\n            <input type="text" ng-model="listFilter" placeholder="可搜索关键字..">\n        </li>\n        <li ng-repeat="option in filtedOptions = (options | filter:listFilter)"><a href="javascript:;" ng-click="selectItem(option)">{{option.label || option}}</a></li>\n        <li class="no-result" ng-if="filtedOptions.length === 0">搜索无结果</li>\n    </ul>\n</div>\n')}]),t.module("template/loginbox/loginbox.html",[]).run(["$templateCache",function(e){e.put("template/loginbox/loginbox.html",'<div class="w-loginbox">\n    <h2>{{title}}</h2>\n    <div class="login_form">\n        <p>\n            <ins class="ico-user"></ins>\n            <input type="text" ng-model="username" placeholder="用户名" />\n        </p>\n        <p class="last">\n            <ins class="ico-pswd"></ins>\n            <input type="password" ng-model="password" placeholder="密码" />\n        </p>\n    </div>\n    <button class="login_btn" ng-click="login()">{{labelLogin}}</button>\n    <button class="login_btn" ng-if="doRegister" ng-click="doRegister()">{{labelRegister}}</button>\n</div>\n')}]),t.module("template/modal/alert.html",[]).run(["$templateCache",function(e){e.put("template/modal/alert.html",'<div ng-class="type?\'modal-\'+type:\'modal-default\'" class="nd-modal">\n    <div class="modal-header">\n        <button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" ng-bind-html="title || content | to_trusted"></h4>\n    </div>\n    <div class="modal-body">\n        <div class="txt">\n            <h6 ng-bind-html="content | to_trusted"></h6>\n            <p ng-if="description" ng-bind-html="description | to_trusted"></p>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-lg btn-default" ng-click="close()">返回</button>\n    </div>\n</div>\n')}]),t.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),t.module("template/modal/confirm.html",[]).run(["$templateCache",function(e){e.put("template/modal/confirm.html",'<div class="nd-modal modal-confirm">\n    <div class="modal-header">\n        <button type="button" class="close" ng-click="cancel()" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title" ng-bind-html="title || content | to_trusted"></h4>\n    </div>\n    <div class="modal-body">\n        <div class="txt">\n            <h6 ng-bind-html="content | to_trusted"></h6>\n            <p ng-if="description" ng-bind-html="description | to_trusted"></p>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <button type="button" class="btn btn-lg btn-primary" ng-click="ok()">确认</button>\n        <button type="button" class="btn btn-lg btn-default" ng-click="cancel()">取消</button>\n    </div>\n</div>\n')}]),t.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),t.module("template/notice/notice.html",[]).run(["$templateCache",function(e){e.put("template/notice/notice.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),t.module("template/notice/notices.html",[]).run(["$templateCache",function(e){e.put("template/notice/notices.html",'<div class="nd-notices">\n\t<nd-notice ng-repeat="notice in notices" type="{{notice.type}}" close="notice.close()">{{notice.content}}</nd-notice>\n</div>')}]),t.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),t.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<div class="nd-pagination" ng-class="{\'nd-pagination-summary\':withSummary}">\n    <div class="summary" ng-if="withSummary">\n       {{getText(\'totalItemPrefix\')}}{{totalItems}}{{getText(\'totalItemSuffix\')}}{{getText(\'itemPerPagePrefix\')}}\n        <select ng-model="itemsPerPage" ng-options="option for option in itemsPerPageOptions" ng-change="itemsPerPageChange(itemsPerPage)">\n        </select>{{getText(\'itemPerPageSuffix\')}}\n    </div>\n    <ul class="pagination">\n        <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n        <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n        <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n        <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n        <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n    </ul>\n</div>\n')}]),t.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),t.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),t.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),t.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),t.module("template/stepper/stepper.html",[]).run(["$templateCache",function(e){e.put("template/stepper/stepper.html",'<div class="nd-stepper">\n\t<a href="javascript:;" ng-click="add();">+</a>\n\t<a href="javascript:;" ng-click="minus();">-</a>\n\t<input type="text" ng-model="stepValue"/>\n</div>')}]),t.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),t.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),t.module("template/tagfilter/tagfilter.html",[]).run(["$templateCache",function(e){e.put("template/tagfilter/tagfilter.html",'<div class="nd-tagfilter" ng-class="{\'nd-tagfilter-collapse\':!expand}">\n    <h4 class="title" ng-if="title!=undefined">{{title}}:</h4>\n    <a class="more-tags" ng-show="expandable" ng-click="toggleExpand()" href="javascript:;">{{expand ? "收起":"展开"}}</a>\n    <div class="tags">\n        <label class="label label-primary" ng-class="{\'selected\':selectedIdx == $index}" ng-click="selectItem(option.value || option,$index)" ng-repeat="option in options">{{ option.label || option }}</label>\n    </div>\n</div>\n')}]),t.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),t.module("template/tooltip/popover.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),
t.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),t.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),t.module("template/treeview/ndTreeview.html",[]).run(["$templateCache",function(e){e.put("template/treeview/ndTreeview.html",'<div class="nd-treeview">\n    <div treeview tree-id="tree" tree-model="treeList" node-label="{{nodeLabel}}" node-children="{{nodeChildren}}"></div>\n</div>')}]),t.module("template/treeview/ndTreeviewPopup.html",[]).run(["$templateCache",function(e){e.put("template/treeview/ndTreeviewPopup.html",'<div class="nd-layout-col g_complex_input nd-treeview">\n    <div class="col-right com_ml20">\n        <button type="button" class="btn btn-primary" ng-click="open()">选择</button>\n    </div>\n    <div class="col-compatible">\n        <p class="tree-result">{{tree.fullPath | array2path }}</p>\n    </div>\n    <div class="modal-content" ng-show="showPanel">\n        <div class="modal_choose">\n            <div class="modal-header">{{title}}</div>\n            <div class="modal-body">\n                <div treeview tree-id="tree" tree-model="treeList" node-label="{{nodeLabel}}" node-children="{{nodeChildren}}"></div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-primary" ng-click="save()">保存</button>\n                <button type="button" class="btn btn-default" ng-click="cancel()">取消</button>\n            </div>\n        </div>\n    </div>\n</div>\n')}]),t.module("template/typeahead/typeahead-async.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-async.html",'<div class="typeahead-async">\n    <input type="text" ng-model="value" class="form-control">\n    <ul class="dropdown-menu">\n        <li ng-repeat="result in results">\n            <a href="javascript:;" ng-click="setValue(result)">{{result.label || result}}</a>\n        </li>\n    </ul>\n</div>\n')}]),t.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),t.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),t});