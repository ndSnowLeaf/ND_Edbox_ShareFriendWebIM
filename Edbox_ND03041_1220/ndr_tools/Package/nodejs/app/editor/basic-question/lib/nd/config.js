define(function(e){return e("lib/ndrest/cors_custom"),["$httpProvider","$consoleProvider",function(e,r){r.fullModalParentSelector=".body-warp",e.defaults.headers.common["Content-Type"]="application/json; charset=utf-8",e.interceptors.push(["$injector","$q","$urlHelper",function(e,r,t){return{request:function(r){var t=r.headers;if(t||(t=r.headers={}),!t.Authorization){var n=e.get("$auth");n.generateAuthHeader(r.url,r.method)}return r},responseError:function(t){var n=e.get("$console"),o=e.get("$i18n"),a=t.status;return"403"==a?n.error(o("common.hint.http.403")):"401"==a?n.error(o("common.hint.http.401")):n.error(o("common.hint.http.error",t.data?t.data.message:"")),r.reject(t)}}}]),e.interceptors.push(["$q","$rootScope","$location","$timeout",function(e,r,t,n){var o=CORSCustom.isIELower(),a=function(e){r.loadingDataTimer&&n.cancel(r.loadingDataTimer),r.loadingDataTimer=n(function(){r.loadingData=e},300)};return{request:function(t){a(!0);var n=t.url&&-1!==t.url.indexOf("http"),u=[t.url.split("//")[0],"//",t.url.split("/")[2]].join("");if(n&&angular.isDefined(r.userObj)){t.params&&1==t.params.unAuth||(t.headers=angular.extend({"Content-Type":"application/json","Accept-Charset":"utf-8"},t.headers))}return n&&o&&CORSCustom.isXDomain(t.url)&&(t.data=CORSCustom.encodeData(t.method,t.data,angular.extend({Host:u.replace("http://","").replace("https://","")},t.headers))),t.params&&delete t.params.unAuth,t||e.when(t)},response:function(e){return a(!1),e},requestError:function(r){return a(!1),e.reject(r)},responseError:function(r){return a(!1),e.reject(r)}}}])}]});