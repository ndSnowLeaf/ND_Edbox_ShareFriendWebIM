define(["require"],function(e){var t=e("angular");return t.module("gettext",[]),t.module("gettext").constant("gettext",function(e){return e}),t.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(e,a,r,n,s){function c(){s.$broadcast("gettextLanguageChanged")}var u,i='<span id="test" title="test" class="tested">test</span>',l=t.element("<span>"+i+"</span>").html()!==i,o=function(e){return u.debug&&u.currentLanguage!==u.baseLanguage?u.debugPrefix+e:e},g=function(e){return u.showTranslatedMarkers?u.translatedMarkerPrefix+e+u.translatedMarkerSuffix:e};return u={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:r("strings"),setCurrentLanguage:function(e){this.currentLanguage=e,c()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(e,a){this.strings[e]||(this.strings[e]={});for(var r in a){var n=a[r];if(l&&(r=t.element("<span>"+r+"</span>").html()),t.isString(n)||t.isArray(n)){var s={};s.$$noContext=n,n=s}for(var u in n){var i=n[u];n[u]=t.isArray(i)?i:[i]}this.strings[e][r]=n}c()},getStringForm:function(e,t,a){return(((this.strings[this.currentLanguage]||{})[e]||{})[a||"$$noContext"]||[])[t]},getString:function(e,t,a){return e=this.getStringForm(e,0,a)||o(e),e=t?n(e)(t):e,g(e)},getPlural:function(t,a,r,s,c){var u=e(this.currentLanguage,t);return a=this.getStringForm(a,u,c)||o(1===t?a:r),s&&(s.$count=t,a=n(a)(s)),g(a)},loadRemote:function(e){return a({method:"GET",url:e,cache:u.cache}).success(function(e){for(var t in e)u.setStrings(t,e[t])})}}}]),t.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(e,a,r,n,s){function c(e,t,a){if(!e)throw new Error("You should add a "+t+" attribute whenever you add a "+a+" attribute.")}var u=function(){return String.prototype.trim?function(e){return"string"==typeof e?e.trim():e}:function(e){return"string"==typeof e?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}(),i=parseInt((/msie (\d+)/.exec(t.lowercase(s.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(s,l){c(!l.translatePlural||l.translateN,"translate-n","translate-plural"),c(!l.translateN||l.translatePlural,"translate-plural","translate-n");var o=u(s.html()),g=l.translatePlural,f=l.translateContext;return i<=8&&"\x3c!--IE fix--\x3e"===o.slice(-13)&&(o=o.slice(0,-13)),{post:function(s,c,i){function l(){var a;g?(s=h||(h=s.$new()),s.$count=d(s),a=e.getPlural(s.$count,o,g,null,f)):a=e.getString(o,null,f);var i=c.contents();if(0!==i.length){if(a===u(i.html()))return void(m&&n(i)(s));var l=t.element("<span>"+a+"</span>");n(l.contents())(s);var x=l.contents();r.enter(x,c),r.leave(i)}}var d=a(i.translateN),h=null,m=!0;i.translateN&&s.$watch(i.translateN,l),s.$on("gettextLanguageChanged",l),l(),m=!1}}}}}]),t.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,a){return e.getString(t,null,a)}return t.$stateful=!0,t}]),t.module("gettext").factory("gettextPlurals",function(){return function(e,t){switch(e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!=t?1:0;case"mk":return 1==t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!=t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return 0==t?0:1==t?1:2;case"ro":return 1==t?0:0==t||t%100>0&&t%100<20?1:2;case"pl":return 1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1==t?0:t>=2&&t<=4?1:2;case"sl":return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0;case"mt":return 1==t?0:0==t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return 1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3;case"cy":return 1==t?0:2==t?1:8!=t&&11!=t?2:3;case"kw":return 1==t?0:2==t?1:3==t?2:3;case"ga":return 1==t?0:2==t?1:t<7?2:t<11?3:4;case"ar":return 0==t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return 1!=t?1:0}}}),t});