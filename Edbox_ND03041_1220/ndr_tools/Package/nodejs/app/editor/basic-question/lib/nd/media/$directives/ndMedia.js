define(function(e){return e("/lib/plu/mediaelement/build/mediaelementplayer.min.css"),e("/lib/plu/mediaelement/build/mejs-skins.css"),e("jquery-mediaelement"),["$compile",function(e){var i=function(e,i){return-1!=i.indexOf("video/")?(e.addClass("video-player no-svg"),'<video controls="controls"></video>'):-1!=i.indexOf("audio/")?(e.addClass("audio-player no-svg"),"<audio controls='controls'></audio>"):void 0};return{template:"<div></div>",restrict:"EA",replace:!0,scope:{media:"=config"},controller:["$scope",function(e){e.mediaObj=null,e.mediaEl=null,e.media.play=function(){e.mediaObj&&e.mediaObj.play()},e.media.pause=function(){e.mediaObj&&e.mediaObj.pause()},e.media.init=function(i){e.media.src=i,e.init()},e.init=function(){var i=e.media||{},t=i.width||300,a=i.height||200;i.type;e.mediaEl.attr("id",e.media.id),e.mediaEl.attr("src",e.media.src),e.mediaEl.attr("type",e.media.type),e.mediaEl.attr("width",t),e.mediaEl.attr("height",a),$("#"+i.id).mediaelementplayer({defaultVideoWidth:t,defaultVideoHeight:a,videoWidth:t,videoHeight:a,audioWidth:t,audioHeight:30,startVolume:.8,loop:!1,enableAutosize:!1,features:["playpause","progress","current","duration","volume","fullscreen"],alwaysShowControls:!0,alwaysShowHours:!1,showTimecodeFrameCount:!0,framesPerSecond:25,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[],success:function(t,a){e.mediaObj=t,i.initSuccess&&i.initSuccess(),t.addEventListener("timeupdate",function(e){i.timeEscape&&i.timeEscape(e)},!1),e.autoPlay&&t.play()},error:function(){i.initError&&i.initError()}})}}],link:function(e,t,a){var d=t,n=e.media||{},o=n.type,l=void 0===n.autoInit,r=i(d,o);d.html(r),e.mediaEl=d.children(0),l&&e.init()}}}]});