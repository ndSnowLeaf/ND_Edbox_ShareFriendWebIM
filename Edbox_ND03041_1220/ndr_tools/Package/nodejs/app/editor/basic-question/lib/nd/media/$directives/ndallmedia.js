define(function(e){var i=e("angular");e("jquery-mediaelement"),i.module("ndmedia.directives",[]).directive("ndMedia",function(){var e=function(e,i){return-1!=i.indexOf("video/")?(e.addClass("video-player no-svg"),'<video controls="controls"></video>'):-1!=i.indexOf("audio/")?(e.addClass("audio-player no-svg"),"<audio controls='controls'></audio>"):void 0};return{template:"<div></div>",restrict:"EA",replace:!0,scope:{media:"=config"},controller:["$scope",function(e){e.mediaObj=null,e.media.play=function(){e.mediaObj&&e.mediaObj.play()},e.media.pause=function(){e.mediaObj&&e.mediaObj.pause()}}],link:function(i,a,t){var d=a,o=i.media||{},r=o.width||300,n=o.height||200,s=void 0===o.autoPlay,u=o.type,l=e(d,u);d.html(l);var c=d.children(0);c.attr("id",o.id),c.attr("src",o.src),c.attr("type",o.type),c.attr("width",r),c.attr("height",n),$("#"+o.id).mediaelementplayer({defaultVideoWidth:r,defaultVideoHeight:n,videoWidth:r,videoHeight:n,audioWidth:r,audioHeight:30,startVolume:.8,loop:!1,enableAutosize:!1,features:["playpause","progress","current","duration","volume","fullscreen"],alwaysShowControls:!0,alwaysShowHours:!1,showTimecodeFrameCount:!0,framesPerSecond:25,enableKeyboard:!0,pauseOtherPlayers:!0,keyActions:[],success:function(e,a){i.mediaObj=e,i.media.initSuccess&&i.media.initSuccess(),e.addEventListener("timeupdate",function(e){i.media.timeEscape&&i.media.timeEscape(e)},!1),s&&e.play()},error:function(){i.media.initError&&i.media.initError()}})}}})});