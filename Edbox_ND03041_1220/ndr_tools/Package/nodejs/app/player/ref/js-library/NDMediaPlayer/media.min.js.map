{"version":3,"sources":["media.min.js"],"names":["window","document","__Q","typeUndefined","String","prototype","trim","this","replace","Array","forEach","callback","i","length","item","apply","addEventListener","target","type","handler","attachEvent","removeEventListener","flag","detachEvent","getStyle","domObj","attribute","style","currentStyle","defaultView","getComputedStyle","_q","selector","context","body","_selector","_dom","substring","indexOf","getElementById","querySelectorAll","each","fn","dom","get","show","display","hide","isShow","css","toggle","name","value","find","bind","event","on","addClass","clsName","classValue","getAttribute","cls","split","newCls","j","c","setAttribute","hasClass","hasCls","removeClass","toggleClass","attr","val","removeAttr","removeAttribute","text","txt","Error","innerText","width","arguments","offsetWidth","parseInt","height","offsetHeight","offset","docElem","win","box","top","left","elem","doc","ownerDocument","documentElement","getBoundingClientRect","nodeType","parentWindow","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","events","that","eventName","support","touch","qpTap","off","before","ele","$temp","createElement","html","parentNode","appendChild","children","len","remove","insertBefore","innerHTML","removeChild","closest","clsSelector","cur","nodeName","toLocaleLowerCase","contains","childNode","compareDocumentPosition","data","key","id","utils","getRandomId","cache","noop","isMobile","navigator","userAgent","match","isiOS","checkHover","getEvent","e","relatedTarget","fromElement","toElement","isWhitePad","sourceCapabilities","firesTouchEvents","stopPropagation","returnValue","preventDefault","Math","random","Date","getMilliseconds","toString","resize","oWidth","oHeight","maxW","maxH","minW","minH","w","h","scale","toFixed","getRequest","sSearch","location","search","oParam","substr","params","paramExpr","param","decodeURIComponent","sParamName","getBasePath","path","hashIndex","lastIndexOf","queryIndex","slashIndex","min","extend","src","copyIsArray","copy","options","clone","deep","jQuery","isFunction","isPlainObject","isArray","undefined","browser","uaBrowser","ua","toLowerCase","rwebkit","ropera","rmsie","rmozilla","exec","version","browserMatch","crosswalk","test","Native","Controller","View","Model","module","exports","logger","methods","_console","console","method","_logger","_level","setLevel","level","debug","log","info","msg","warn","error","vEventHandler","mouseDown","mouseUp","mouseCancel","getEventX","changedTouches","clientX","getEventY","clientY","_$that","$that","vMouseDown","vMouseUp","vMouseCancel","_start","_startX","_startY","func","downEvent","which","getTime","end","endX","endY","holdTime","dx","abs","dy","cancelHandler","Class","Object","create","o","F","Create","ClassUtils","include","obj","extension","hasOwnProperty","object","property","call","proxy","thisobj","proxyAll","fucs","Events","trigger","arg","slice","shift","_eventHandler","_keys","unBind","canBindKey","keys","InteractAppApi","isApp","AndroidInterface","bridgeCallNative","Bridge","callNative","isAppNative","isInteractApp","STUDENT","TEACHER","isStudent","isTeacher","isProjector","userInfo","ex","getCurrentUserInfo","res","userType","setNativeModuleVisibility","items","moduleId","visible","instanceId","setViewerModuleVisibility","lang","jp","media_img_still_loading","media_img_tip","media_video_fullscreen","media_video_exit_fullscreen","media_video_not_support_fullscreen","zh","en","hk","_lang","zh_cn","zh_hk","en_us","ja","ja_jp","getLangText","langType","result","MediaPlayer","$container","option","mediaType","self","timeFormat","mouseMoveCount","_mediaModel","MediaModel","funcs","getMediaModel","baseInit","$media","getQMedia","setPreLoad","mediaPreload","_iePreloadNone","_findElement","_eventModel","MediaEvent","_mediaEventHandler","_toolBarEvent","_$volumeIconContainer","_this","_$play","playPause","_updateVolumeEntryView","getVolume","_$mediaBox","_$progress","_progress","_progressMouseup","_$volumeControl","_volumeProgress","_volumeProgressMouseup","_volumeHide","_$volumeIcon","_volumeToggle","_volumeMutedToggle","_volumeShow","msie","iePreloadResetSrc","_resetSrc","$video","elements","_$loading","_$playInBody","_$endTime","_$currentTime","_$downedBar","_$playedBar","_$volumeBarContainer","_$volumeBarR","_$volumeBarS","_$toolbar","_$mediaDisable","sel","clear","load","mediaEventListener","destroy","reset","pause","setLock","isLock","lock","changeVolume","vol","setVolume","hideVolumeControl","volumeChangeEvent","isPlaying","mediaObj","getMedia","paused","play","renderUI","outTrigger","mediaEvent","playing","ended","timeupdate","getReadyState","_updateEndTime","_updateVideoData","_updateCurrentTime","volumechange","progress","currentTime","getCurrentTime","duration","getDuration","buffered","getBuffered","minEnd","percent","waiting","code","loadedmetadata","durationchange","durationInit","durationInitDuration","_formatTime","progWrapper","media","_coordinate","_seekTo","pageX","volume","muted","getMuted","_volumeClick","setTimeout","srcElement","$volume","setMuted","volumeUp","_volumeSeekTo","pageY","current","scrubbing","scrubbingWidth","xPos","immediately","progressBar","progWidth","max","getScale","seekTo","setCurrentTime","round","yPos","progHeight","point","touches","secs","hours","floor","minutes","seconds","scaleX","mediaPlay","mediaPause","mediaSkip","seek","mediaVolumeChange","AudioPlayerPlugin","$this","AudioPlayer","DEFAULTS","onEnd","onPause","onPlay","onSeek","onVolumeChange","onTimeUpdate","onlyRender","audio","_init","start","_playTriggerHandler","_endedHandler","_resizeMap","qp-media-box-mini","qp-media-box-min-height","qp-media-box-min-height-audio-s","qp-media-box-max-hd","started","_controlEvent","$audio","audioHtml","_$qpVideoWrap","_$qpMediaIcon","autoAdaptSize","resizeMedia","message","reWidth","reHeight","mini","DEFAULT","img","renderImmediately","ImagePlayer","imgData","_minRenderWidth","_minRenderHeight","viewer","_defaultRenderHeight","_defaultRenderWidth","_loadImg","Image","complete","onload","_createHtml","render","$image","_createViewer","imageHtml","_$tipMessage","clearTimeout","_msgTimeoutId","_$picsBg","_$image","fullChange","onFullScreenChange","eventHandler","fullScreenChange","ImageViewer","VideoPlayerPlugin","VideoPlayer","video","supportFullscreen","showPlayBtnInVideo","showFullscreenBtn","_unBind","_pauseEventHandler","_volumeToggleEventHandler","_timeOutId","_supportFullScreen","_$qpIconsVideo","_autoHide","immediatily","_$goFullscreen","_exitFull","_fullScreenCallBack","qp-media-box-min-width","surportFull","qp-media-box-min-width-s","qp-media-box-min-height-s","qp-media-box-not-surpot-full-min","qp-media-box-not-surpot-full-min-s","qp-media-box-max-fullscreen","_fullScreen","_createVideo","_$exitFullscreen","_$fullScreenMessage","_$toolbarCover","videoHtml","_fullScreenEnabled","getWidth","getHeight","_pcControlToggle","_lastX","_lastY","_isFullScreen","autoHide","_touchControlToggle","className","_mediaBoxToggle","_toFullScreen","_playInVideoHanlder","_fullScreenClickHandler","exitFullscreen","webkitCancelFullScreen","msExitFullscreen","mozCancelFullScreen","videos","getElementsByTagName","vd","webkitExitFullscreen","_fullMsgTimeoutId","container","rfs","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","_fullTimeOutId","_fullScreenChangeEnable","_unSurportFullApi","webkit","_fullScreenChangeHandler","mozilla","activeElement","webkitIsFullScreen","webkitFullscreenEnabled","msFullscreenEnabled","mozFullScreenEnabled","_imgData","stopImgPropagation","$body","viewerHtml","$mask","$imgContainer","$close","$img","$center","_maxHeight","innerHeight","_maxWidth","innerWidth","rs","eventMethod","mediaModel","emptied","mediaTarget","mediaId","getId","index","getMediaType","_onPlay","_ended","resetPoster","_onEnd","seeked","getError","loadstart","loadeddata","stalled","suspend","mutuallyExclusive","mutuallyExclusivePlay","dataId","eventTrigger","lastVolumeDisplay","lastVolume","volumeChange","poster","tagName","preLoad","attrWidth","cssWidth","attrHeight","cssHeight","getPoster","isNaN","readyState","arr","push","join","imageviewer","typeOf","isString","str","isNumber","num","isObject","_typeof","REGEXP_TRIM","_len","args","_key","assign","concat","_len2","_key2","_len3","args2","_key3","setStyle","element","styles","REGEXP_SUFFIX","classList","add","removeListener","types","REGEXP_SPACES","t","addListener","_handler","once","originalHandler","_len4","_key4","eventDoc","getOffset","scrollX","scrollY","getByClass","getElementsByClassName","createDom","firstChild","root","el","getPosOfEvent","ev","originalEvent","isTouch","posi","eventList","x","y","LEVEL","DEBUG","INFO","WARN","ERROR","DEBUG_VALUE","INFO_VALUE","WARN_VALUE","ERROR_VALUE","UNKNOWN","Logger","$level","ERROR_VALUEl","modal","env","minWidth","minHeight","maxWidth","maxHeight","inline","defaultSrc","eventAll","Template","view","view2","popwindow","mask","mobilefull","Symbol","iterator","constructor","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","objectProto","_$1","IMAGE_MIN_WIDTH","IMAGE_MIN_HEIGHT","IMAGE_MAX_WIDTH","IMAGE_MAX_HEIGHT","SPECIAL_WIDTH","SPECIAL_HEIGHT","VIEWER_MIN_WIDTH","VIEWER_MIN_HEIGHT","TOP_VIEWER","IMAGE_INSTANCES","imageview","getKeyId","DEFAULT$1","currentIndex","maxRatio","swip","getDistance","pos1","pos2","sqrt","getFingers","calScale","pstart","pmove","intensity","disStart","disEnd","isDown","isUp","isMove","isTouchEnd","isTouchMove","fuc","hasTouch","obj2","getUuid","uuid","s","hexDigits","Config","evtElem","tap","doubleTap","drag","pinch","hold","tapMaxDistance","tapTime","doubleTapMaxInterval","doubleTapMaxDistance","pinchIntensity","eventPrefix","EVENT","PINCH_START","PINCH","PINCH_END","DRAG_START","DRAG","DRAG_END","HOLD","TAP","DOUBLE_TAP","FOCUS","BLUR","Engine","evt","detail","opt","bubbles","cancelable","CustomEvent","dispatchEvent","createEvent","initCustomEvent","returnVal","evts","unbind","Core","config","_config","_downStart","_pinchStart","_dragStart","_tap","_startTime","_startPos","_movePos","_endPos","_lastTarget","_dragElem","_holdTimer","bindEvent","mouseEvents","touchEvents","focus","downHandler","moveHandler","upHandler","time","subTime","distance","__lastTapTime","__lastTapPos","__lastTapElem","startDis","originEvent","fingersCount","position","eventObj","lastElem","originalEvt","prefix","EventApi","core","registerEvents","self$1","down","init","registerEvent","unregisterEvent","splice","objs","$handle","MobileViewer","$createHtml","$render","$orientationChange","viewerData","fullWidth","clientWidth","fullHeight","clientHeight","cacheLastStatus","$init","close","$loadImage","$resize","loading","viewerImg","_w","_h","templateDom","templateMask","querySelector","onerror","p","changeWidth","offsetLeft","offsetTop","imgLeft","imgTop","_this2","cancelBubble","px","py","isDrag","wheeling","imageLeft","$moveFlag","imageTop","isPinch","_id","_w2","_h2","touchs","centerPoint","$initOffset","arg1","overflow","orientation","setVertical","setCross","ontouchstart","preview","Lang","PcViewer","containerWidth","containerHeight","bound","padding","isModal","langObject","$initFullSize","imgLength","$createMask","hasMask","viewerClose","viewerFull","viewerHead","viewerBody","swipLeft","swipRight","$handleMousemove","$handleWheel","swipWidth","tmpHeight","fullBodyHeight","viewerPaddingHeight","fullBodyWidth","viewerPaddingWidth","fulled","$initSwip","$initFullStatus","$initSwipVisible","bodyWidth","bodyHeight","fixed","imgWidth","imgHeight","oldHeight","containerTop","zIndex","full","prev","next","$px","$py","$handleTap","isBorder","cursor","bh","bw","$imageCenter","byW","byH","moveFlag","moveToLeft","moveToTop","docCenterX","docCenterY","containerLeft","centerX","centerY","ratio","delta","deltaY","wheelDelta","Number","$offset","parentLeft","parentTop","tempWidth","tempHeight","isFull","isCtrBtn","$borderCheck","pointer","parent","plt","prt","pld","prd","pointers","dirs","srcArray","VIEWER_TYPE","MOBILE","PC","Factory","createViewer","_","VIEWER","ImageView","reg","border","$removeLister","$renderHtml","templateView","wrapView","firstElementChild","parentElement","viewrOptions","updateSrc","open","pointer-events","setLoggerLevel","imageItems","containerId","newOptions","image","instances","mediaOnFullScreenChange","Viewer","ImagePlayerPlugin","_emptyFunc","NDMediaPlayer","_$medias","DefaultOption","returnInstances","mediaArry","extendOption","eventHanlder","imgOption","videoOption","audioOption","mediaMargin","renderAudioVideo","$div","_getMedia","_getKeyMedia","_getKey","$renderBody","_getKeyId","_getKeyType","renderToTarget","mediaEle","targetEle","containerEle","childNodes","renderMediaEle","$containerEle","_clear","rkey","mediaPlayer","$view","$renderBodys","mediakey","getView","$medias","mediaReg","l","isImg","newOption","$insView","renderResult","mediaOnStart","mediaOnPause","mediaOnEnded","mediaOnTimeupdate","mediaOnSeeked","mediaOnVolumeChange","diaplay","mediaPauseAll","PPTMediaRender","videoZIndex","renderVideoImg","imgSrc","imgEle","previousElementSibling","mediaRenderComplete","$closest","PPTMediaPlayer","renderMediaComplete","renderVideo","videoEle","renderAudio","audioEle","$pNode","currentKey","nextElementSibling","$m","mOper","$contentHolder","$audioView","located","locat","pNodeOffset","holderOffset","audioWidth","audioHeight","pNodeWidth","pNodeHeight","right","bottom"],"mappings":"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","file":"media.min.js","sourcesContent":["//version=1.0\r\n(function(window,document){\r\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\nvar __Q = (function () {\r\n    'use strict';\r\n\r\n    var typeUndefined = typeof undefined;\r\n\r\n    //兼容代码\r\n    if (typeof String.prototype.trim === typeUndefined) {\r\n        String.prototype.trim = function () {\r\n            return this.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n        };\r\n    }\r\n    //兼容代码\r\n    if (typeof Array.prototype.forEach === typeUndefined) {\r\n        Array.prototype.forEach = function (callback) {\r\n            for (var i = 0; i < this.length; i++) {\r\n                var item = this[i];\r\n                callback.apply(this, [item, i, this]);\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    var addEventListener = function (target, type, handler) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, handler, false);\r\n        } else if (target.attachEvent) {\r\n            type = 'on' + type;\r\n            target.attachEvent(type, handler);\r\n        } else {\r\n            target['on' + type] = handler;\r\n        }\r\n    };\r\n    var removeEventListener = function (target, type, handler, flag) {\r\n        if (target.removeEventListener) {\r\n            target.removeEventListener(type, handler, flag);\r\n        } else if (target.detachEvent) {\r\n            type = 'on' + type;\r\n            target.detachEvent(type, handler);\r\n        } else {\r\n\r\n        }\r\n    };\r\n\r\n    var getStyle = function (domObj, attribute) {\r\n        var style = domObj.style[attribute];\r\n        if (style) {\r\n            return style;\r\n        }\r\n        return domObj.currentStyle ? domObj.currentStyle[attribute] : document.defaultView.getComputedStyle(domObj, '')[attribute];\r\n    }\r\n\r\n    var _q = function (selector, context) {\r\n        if (typeof selector === typeUndefined || selector == null) {\r\n            return;\r\n        }\r\n\r\n        if (typeof context === 'string') {\r\n            selector = context + ' ' + selector;\r\n        }\r\n\r\n        if (typeof context === typeUndefined || selector === null || context === document.body) {\r\n            context = document;\r\n        }\r\n\r\n        this._selector = typeof selector === 'object' ? selector : selector.trim();\r\n        this._dom = [];\r\n        this.length = 0;\r\n\r\n        if (typeof selector === 'object') {\r\n            this._dom[0] = selector;\r\n            this.length = 1;\r\n        }\r\n        //#id selector /.class selector\r\n        else if (this._selector.substring(0, 1) === '#' && this._selector.indexOf(' ') <= -1) {\r\n            this._dom[0] = document.getElementById(this._selector.substring(1, this._selector.length));\r\n            if (this._dom[0]) {\r\n                this.length = 1;\r\n            }\r\n        } else {\r\n            this._dom = context.querySelectorAll(this._selector);\r\n            this.length = this._dom.length;\r\n        }\r\n        return this;\r\n    };\r\n    _q.prototype = {\r\n        each: function (fn) {\r\n            if (this.length > 0) {\r\n                for (var i = 0; i < this.length; i++) {\r\n                    var dom = this._dom[i];\r\n                    (function () {\r\n                        fn.apply(dom, [i]);\r\n                    })(i);\r\n                }\r\n            }\r\n        },\r\n        get: function (i) {\r\n            return this._dom[i];\r\n        },\r\n        show: function () {\r\n            this.each(function () {\r\n                this.style.display = 'block';\r\n            });\r\n        },\r\n        hide: function () {\r\n            this.each(function () {\r\n                this.style.display = 'none';\r\n            });\r\n        },\r\n        isShow: function () {\r\n            return this.css('display') === 'block';\r\n        },\r\n        toggle: function () {\r\n            this.each(function () {\r\n                if (getStyle(this, 'display') === 'block') {\r\n                    this.style.display = 'none';\r\n                } else {\r\n                    this.style.display = 'block';\r\n                }\r\n            });\r\n        },\r\n        css: function (name, value) {\r\n            if (typeof value === typeUndefined) {\r\n                return getStyle(this._dom[0], name);\r\n            } else {\r\n                this.each(function () {\r\n                    this.style[name] = value;\r\n                });\r\n            }\r\n        },\r\n        find: function (selector) {\r\n            return __Q(selector, this._dom[0]);\r\n        },\r\n        bind: function (event, fn) {\r\n            this.on(event, '', fn);\r\n        },\r\n        addClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                var newCls = clsName;\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === clsName || c === '') {\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n            return this;\r\n        },\r\n        hasClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n            var hasCls = false;\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    if (cls[j].trim() === clsName) {\r\n                        hasCls = true;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            return hasCls;\r\n\r\n        },\r\n        removeClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                var newCls = '';\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === clsName || c === '') {\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n        },\r\n        toggleClass: function (clsName) {\r\n            this.each(function () {\r\n                var cls = this.getAttribute('class').split(' ');\r\n                var newCls = '';\r\n                var hasCls = false;\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === '') {\r\n                        continue;\r\n                    }\r\n                    if (c === clsName) {\r\n                        hasCls = true;\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n\r\n                if (!hasCls) {\r\n                    newCls += ' ' + clsName;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n        },\r\n        attr: function (attr, val) {\r\n            if (typeof val !== 'undefined') {\r\n                this.each(function () {\r\n                    if (typeof val !== 'undefined') {\r\n                        this.setAttribute(attr, val);\r\n                    }\r\n                });\r\n                return this;\r\n            } else {\r\n                return this._dom[0].getAttribute(attr);\r\n            }\r\n\r\n\r\n        },\r\n        removeAttr: function (attr) {\r\n            this.each(function () {\r\n                if (attr instanceof Array) {\r\n                    for (var i = 0; i < attr.length; i++) {\r\n                        this.removeAttribute(attr[i]);\r\n                    }\r\n                } else {\r\n                    this.removeAttribute(attr);\r\n                }\r\n            });\r\n        },\r\n        text: function (txt) {\r\n            if (typeof txt === typeof undefined) {\r\n                throw new Error('only support set text');\r\n            }\r\n            this.each(function () {\r\n                this.innerText = txt;\r\n            });\r\n        },\r\n        width: function () {\r\n            if (arguments.length > 0) {\r\n                throw new Error('only support get');\r\n            }\r\n            var width = this._dom[0].offsetWidth;\r\n            if (!width) {\r\n                width = parseInt(this.css('width'));\r\n            }\r\n            return width;\r\n        },\r\n        height: function () {\r\n            if (arguments.length > 0) {\r\n                throw new Error('only support get');\r\n            }\r\n            var height = this._dom[0].offsetHeight;\r\n            if (!height) {\r\n                height = parseInt(this.css('height'));\r\n            }\r\n            return height;\r\n        },\r\n        offset: function () {\r\n            var docElem, win,\r\n                box = {\r\n                    top: 0,\r\n                    left: 0\r\n                },\r\n                elem = this._dom[0],\r\n                doc = elem && elem.ownerDocument;\r\n\r\n            if (!doc) {\r\n                return;\r\n            }\r\n\r\n            docElem = doc.documentElement;\r\n            // If we don't have gBCR, just use 0,0 rather than error\r\n            // BlackBerry 5, iOS 3 (original iPhone)\r\n            if (typeof elem.getBoundingClientRect !== typeof undefined) {\r\n                box = elem.getBoundingClientRect();\r\n            }\r\n            win = doc == doc.window ? doc : (doc.nodeType === 9 ? doc.defaultView || doc.parentWindow : false);\r\n            return {\r\n                top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),\r\n                left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)\r\n            };\r\n        },\r\n        on: function (events, selector, fn) {\r\n            var that = this;\r\n            if (typeof selector === 'function') {\r\n                fn = selector;\r\n                selector = '';\r\n            }\r\n            events.split(' ').forEach(function (event) {\r\n\r\n                if (event.trim() === '') {\r\n                    return;\r\n                }\r\n\r\n                var eventName = event.split('.')[0];\r\n\r\n                //使用touch替代click\r\n                if ((event.split('.')[0] === 'click' && __Q.support.touch) || eventName === 'qpTap') {\r\n                    __Q.event.qpTap(typeof selector !== typeUndefined && selector !== '' ? that.find(selector) : that, fn);\r\n                    return;\r\n                }\r\n\r\n                if (eventName === 'still-click') {\r\n                    eventName = 'click';\r\n                }\r\n\r\n                if (typeof selector !== typeUndefined && selector !== '') {\r\n                    that.find(selector).each(function () {\r\n                        addEventListener(this, eventName, fn);\r\n                    });\r\n                } else {\r\n                    that.each(function () {\r\n                        addEventListener(this, eventName, fn);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        off: function (events, selector, fn) {\r\n            var that = this;\r\n            if (typeof selector === 'function') {\r\n                fn = selector;\r\n                selector = '';\r\n            }\r\n            events.split(' ').forEach(function (event) {\r\n\r\n                if (event.trim() === '') {\r\n                    return;\r\n                }\r\n\r\n                if (typeof selector !== typeUndefined && selector !== '') {\r\n                    that.find(selector).each(function () {\r\n                        removeEventListener(this, event.split('.')[0], fn, false);\r\n                    });\r\n                } else {\r\n                    that.each(function () {\r\n                        removeEventListener(this, event.split('.')[0], fn, false);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        before: function (ele) {\r\n            if (typeof ele === 'string') {\r\n                //创建临时dom，存放view\r\n                var $temp = __Q(document.createElement('div'));\r\n                $temp.html(ele);\r\n\r\n                this._dom[0].parentNode.appendChild($temp.get(0));\r\n                var children = $temp.get(0).children;\r\n                var len = children.length;\r\n                var i = 0;\r\n                while (children.length > 0) {\r\n                    if (typeof children[0] === 'object') {\r\n                        this.before(children[0]);\r\n                    }\r\n                    i++;\r\n                    if (i >= len) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                $temp.remove();\r\n            } else {\r\n                this._dom[0].parentNode.insertBefore(ele, this._dom[0]);\r\n            }\r\n\r\n        },\r\n        appendChild: function (ele) {\r\n            this.each(function () {\r\n                this.appendChild(ele);\r\n            });\r\n\r\n        },\r\n        html: function (html) {\r\n            if (typeof html !== typeUndefined) {\r\n                this._dom[0].innerHTML = html;\r\n            } else {\r\n                return this._dom[0].innerHTML;\r\n            }\r\n\r\n        },\r\n        remove: function () {\r\n            if (this._dom[0].parentNode) {\r\n                this._dom[0].parentNode.removeChild(this._dom[0]);\r\n            }\r\n        },\r\n        closest: function (clsSelector) {\r\n            clsSelector = clsSelector.trim();\r\n            if (clsSelector.substring(0, 1) !== '.' || clsSelector.indexOf(' ') > -1) {\r\n                throw new Error('only support simple class selector ');\r\n            }\r\n            var cur;\r\n            for (cur = this._dom[0]; cur && typeof cur !== 'undefined' && cur.nodeName.toLocaleLowerCase() !== \"body\"; cur = cur.parentNode) {\r\n                // Always skip document fragments\r\n                if (cur.nodeType < 11 &&\r\n                    // Don't pass non-elements to Sizzle\r\n                    cur.nodeType === 1 && new __Q(cur).hasClass(clsSelector.substring(1, clsSelector.length))) {\r\n                    return __Q(cur);\r\n                }\r\n            }\r\n            return;\r\n        },\r\n        contains: function (childNode) {\r\n            var parentNode = this._dom[0];\r\n            if (parentNode.contains) {\r\n                return parentNode !== childNode && parentNode.contains(childNode);\r\n            } else {\r\n                return !!(parentNode.compareDocumentPosition(childNode) & 16);\r\n            }\r\n        },\r\n        data: function (key, val) {\r\n            //自动生成一个随机id Key;\r\n            var id = this.attr('data-id');\r\n            if ((typeof id === typeof undefined || id === null) && typeof val !== 'undefined') {\r\n                id = __Q.utils.getRandomId('media');\r\n                this.attr('data-id', id);\r\n            }\r\n\r\n            if (typeof val !== 'undefined') {\r\n                if (val === null) {\r\n                    delete __Q.cache[id + key];\r\n                } else {\r\n                    __Q.cache[id + key] = val;\r\n                }\r\n            } else {\r\n                return typeof __Q.cache[id + key] === 'undefined' ? '' : __Q.cache[id + key];\r\n            }\r\n        }\r\n    };\r\n\r\n    var __Q = function (selector, context) {\r\n        return new _q(selector, context);\r\n    };\r\n\r\n    __Q.noop = function () {};\r\n\r\n    //扩展原型方法\r\n    __Q.fn = function (name, fn) {\r\n        _q.prototype[name] = fn;\r\n    };\r\n\r\n    __Q.utils = {};\r\n    __Q.support = {};\r\n    __Q.event = {};\r\n\r\n    __Q.support.isMobile = (function () {\r\n        return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i) ? true : false;\r\n    })();\r\n    __Q.support.isiOS = navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;\r\n\r\n    __Q.support.touch = (function () {\r\n        if (typeof navigator === typeUndefined) {\r\n            return false;\r\n        }\r\n        if (('ontouchend' in document) && __Q.support.isMobile) {\r\n            return true;\r\n        }\r\n        return false;\r\n    })();\r\n\r\n\r\n\r\n    /**\r\n     * 下面是一些基础函数，解决mouseover与mouserout事件不停切换的问题（问题不是由冒泡产生的）\r\n     */\r\n    __Q.event.checkHover = (function () {\r\n        var getEvent = function (e) {\r\n            return e || window.event;\r\n        };\r\n\r\n        var contains = function (parentNode, childNode) {\r\n            if (parentNode.contains) {\r\n                return parentNode !== childNode && parentNode.contains(childNode);\r\n            } else {\r\n                return !!(parentNode.compareDocumentPosition(childNode) & 16);\r\n            }\r\n        };\r\n        return function (e, target) {\r\n            if (getEvent(e).type === \"mouseover\" || getEvent(e).type === \"mousemove\") {\r\n                return !contains(target, getEvent(e).relatedTarget || getEvent(e).fromElement) &&\r\n                    ((getEvent(e).relatedTarget || getEvent(e).fromElement) !== target);\r\n            } else {\r\n                return !contains(target, getEvent(e).relatedTarget || getEvent(e).toElement) &&\r\n                    ((getEvent(e).relatedTarget || getEvent(e).toElement) !== target);\r\n            }\r\n        };\r\n    })();\r\n\r\n    __Q.event.isWhitePad = function (e) {\r\n        //白板使用笔来点击会触发这个事件\r\n        return !!(e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents);\r\n    };\r\n\r\n    __Q.event.stopPropagation = function (e) {\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        } else {\r\n            e.returnValue = false;\r\n        }\r\n    };\r\n    __Q.event.preventDefault = function (e) {\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        } else {\r\n            e.returnValue = false;\r\n        }\r\n    };\r\n\r\n\r\n\r\n    __Q.utils.getRandomId = function (name) {\r\n        return name + (Math.random() * 10 + new Date().getMilliseconds()).toString().replace('.', '');\r\n    };\r\n\r\n    __Q.utils.resize = function (oWidth, oHeight, maxW, maxH, minW, minH) {\r\n        var w = oWidth,\r\n            h = oHeight,\r\n            scale = 1;\r\n\r\n        if (oWidth < minW) {\r\n            scale = (minW / oWidth).toFixed(3);\r\n            h = parseInt(scale * oHeight);\r\n            w = minW;\r\n        }\r\n        if (h < minH) {\r\n            scale = (minH / oHeight).toFixed(3);\r\n            w = parseInt(scale * oWidth);\r\n            h = minH;\r\n        }\r\n\r\n\r\n        if (maxW > 0 && w > maxW) {\r\n            scale = (maxW / oWidth).toFixed(3);\r\n            h = parseInt(scale * oHeight);\r\n            w = maxW;\r\n\r\n        }\r\n        if (maxH > 0 && h > maxH) {\r\n            scale = (maxH / oHeight).toFixed(3);\r\n            w = parseInt(scale * oWidth);\r\n            h = maxH;\r\n        }\r\n        return {\r\n            w: w,\r\n            h: h,\r\n            scale: scale\r\n        };\r\n    };\r\n\r\n    __Q.utils.getRequest = (function () {\r\n        var sSearch = location.search;\r\n        var oParam = {};\r\n        sSearch = sSearch.substr(1, sSearch.length);\r\n        var params = sSearch.split('&');\r\n        for (var i = 0; i < params.length; i++) {\r\n            var paramExpr = params[i];\r\n            var param = paramExpr.split('=');\r\n            var key = param[0];\r\n            if (key) {\r\n                var value = decodeURIComponent(param[1]);\r\n                oParam[key] = value;\r\n            }\r\n        }\r\n\r\n        var fn = (function (sParamName) {\r\n            return oParam[sParamName] || '';\r\n        });\r\n        fn.get = function () {\r\n            return oParam;\r\n        };\r\n        return fn;\r\n    })();\r\n\r\n    //获取给定目录的基本地址\r\n    __Q.utils.getBasePath = function (path) {\r\n        var hashIndex = path.lastIndexOf(\"#\");\r\n        if (hashIndex == -1) {\r\n            hashIndex = path.length;\r\n        }\r\n        var queryIndex = path.indexOf(\"?\");\r\n        if (queryIndex == -1) {\r\n            queryIndex = path.length;\r\n        }\r\n        var slashIndex = path.lastIndexOf(\"/\", Math.min(queryIndex, hashIndex));\r\n        return slashIndex >= 0 ? path.substring(0, slashIndex + 1) : \"\";\r\n    };\r\n\r\n    //jquery的extend方法\r\n    __Q.extend = function () {\r\n        var src, copyIsArray, copy, name, options, clone,\r\n            target = arguments[0] || {},\r\n            i = 1,\r\n            length = arguments.length,\r\n            deep = false;\r\n\r\n        // Handle a deep copy situation\r\n        if (typeof target === \"boolean\") {\r\n            deep = target;\r\n            target = arguments[1] || {};\r\n            // skip the boolean and the target\r\n            i = 2;\r\n        }\r\n\r\n        // Handle case when target is a string or something (possible in deep copy)\r\n        if (typeof target !== \"object\" && !jQuery.isFunction(target)) {\r\n            target = {};\r\n        }\r\n\r\n        // extend jQuery itself if only one argument is passed\r\n        if (length === i) {\r\n            target = this;\r\n            --i;\r\n        }\r\n\r\n        for (; i < length; i++) {\r\n            // Only deal with non-null/undefined values\r\n            if ((options = arguments[i]) != null) {\r\n                // Extend the base object\r\n                for (name in options) {\r\n                    src = target[name];\r\n                    copy = options[name];\r\n\r\n                    // Prevent never-ending loop\r\n                    if (target === copy) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Recurse if we're merging plain objects or arrays\r\n                    if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {\r\n                        if (copyIsArray) {\r\n                            copyIsArray = false;\r\n                            clone = src && jQuery.isArray(src) ? src : [];\r\n\r\n                        } else {\r\n                            clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                        }\r\n\r\n                        // Never move original objects, clone them\r\n                        target[name] = jQuery.extend(deep, clone, copy);\r\n\r\n                        // Don't bring in undefined values\r\n                    } else if (copy !== undefined) {\r\n                        target[name] = copy;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Return the modified object\r\n        return target;\r\n    };\r\n\r\n    __Q.cache = {}; //TODO:这个暂时这样处理。后续测试通过后修改为闭包\r\n\r\n    __Q.browser = {};\r\n\r\n    var uaBrowser = function (userAgent) {\r\n        var ua = userAgent.toLowerCase();\r\n        // Useragent RegExp\r\n        var rwebkit = /(webkit)[ \\/]([\\w.]+)/;\r\n        var ropera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\r\n        var rmsie = /(msie) ([\\w.]+)/;\r\n        var rmozilla = /(mozilla)(?:.*? rv:([\\w.]+))?/;\r\n\r\n        var match = rwebkit.exec(ua) ||\r\n            ropera.exec(ua) ||\r\n            rmsie.exec(ua) ||\r\n            ua.indexOf(\"compatible\") < 0 && rmozilla.exec(ua) || [];\r\n        return {\r\n            browser: match[1] || \"\",\r\n            version: match[2] || \"0\"\r\n        };\r\n    };\r\n\r\n    if (typeof navigator !== typeUndefined) {\r\n        var browserMatch = uaBrowser(navigator.userAgent);\r\n        if (browserMatch.browser) {\r\n            __Q.browser[browserMatch.browser] = true;\r\n            __Q.browser.version = browserMatch.version;\r\n        }\r\n        __Q.browser.crosswalk = /(crosswalk)/.test(navigator.userAgent.toLowerCase());\r\n    }\r\n    __Q.Native = {}; //pc端或互动课堂native信息\r\n    __Q.Controller = {};\r\n    __Q.View = {};\r\n    __Q.Model = {};\r\n\r\n    //if (typeof  exports !== typeUndefined) {\r\n    //    exports.__Q = __Q;\r\n    //}\r\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\r\n        // Expose __Q as module.exports in loaders that implement the Node\r\n        // module pattern (including browserify). Do not create the global, since\r\n        // the user will be storing it themselves locally, and globals are frowned\r\n        // upon in the Node module world.\r\n        module.exports = __Q;\r\n    }\r\n\r\n    return __Q;\r\n})();\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n\r\n__Q.logger = (function (__Q) {\r\n    'use strict';\r\n\r\n    var methods = [\r\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\r\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\r\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\r\n        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'\r\n    ];\r\n    var length = methods.length;\r\n    var _console = (window.console = window.console || {});\r\n    var method = null;\r\n\r\n    while (length--) {\r\n        method = methods[length];\r\n        // Only stub undefined methods.\r\n        if (!_console[method]) {\r\n            _console[method] = __Q.noop;\r\n        }\r\n    }\r\n\r\n    //logger level值(debug:3, info:2, warn:1, error: 0, close: -1)\r\n    var _logger = {\r\n        _level: 0,\r\n        _console: _console,\r\n        setLevel: function (level) {\r\n            switch (level) {\r\n                case 'debug':\r\n                    this._level = 3;\r\n                    break;\r\n                case 'info':\r\n                    this._level = 2;\r\n                    break;\r\n                case 'warn':\r\n                    this._level = 1;\r\n                    break;\r\n                case 'error':\r\n                    this._level = 0;\r\n                    break;\r\n                default:\r\n                    this._level = -1;\r\n            }\r\n        },\r\n        debug: function () {\r\n            if (this._level >= 3) {\r\n                this._console.log.apply(this._console, arguments);\r\n            }\r\n        },\r\n        info: function (msg) {\r\n            if (this._level >= 2) {\r\n                this._console.info.apply(this._console, arguments);\r\n            }\r\n        },\r\n        warn: function (msg) {\r\n            if (this._level >= 1) {\r\n                this._console.warn.apply(this._console, arguments);\r\n            }\r\n        },\r\n        error: function (msg) {\r\n            if (this._level >= 0) {\r\n                this._console.error.apply(this._console, arguments);\r\n            }\r\n        }\r\n    };\r\n\r\n    return _logger;\r\n})(__Q);\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n\r\n__Q.event.qpTap = (function () {\r\n    var vEventHandler = {};\r\n    if (__Q.support.touch) {\r\n        //拥有触屏事件\r\n        vEventHandler.mouseDown = 'touchstart';\r\n        vEventHandler.mouseUp = 'touchend';\r\n        vEventHandler.mouseCancel = 'touchcancel';\r\n        vEventHandler.getEventX = function (event) {\r\n            return event.changedTouches[0].clientX;\r\n        };\r\n        vEventHandler.getEventY = function (event) {\r\n            return event.changedTouches[0].clientY;\r\n            //return event.originalEvent.changedTouches[0].clientY;\r\n        };\r\n    } else {\r\n        //没有触屏幕事件\r\n        vEventHandler.mouseDown = 'mousedown';\r\n        vEventHandler.mouseUp = 'mouseup';\r\n        vEventHandler.mouseCancel = 'mouseleave';\r\n        vEventHandler.getEventX = function (event) {\r\n            return event.clientX;\r\n        };\r\n        vEventHandler.getEventY = function (event) {\r\n            return event.clientY;\r\n        };\r\n    }\r\n\r\n    return function (_$that, fn) {\r\n        var $that = _$that;\r\n        var vMouseDown = vEventHandler.mouseDown;\r\n        var vMouseUp = vEventHandler.mouseUp;\r\n        var vMouseCancel = vEventHandler.mouseCancel;\r\n        var _start = 0;\r\n        var _startX = 0;\r\n        var _startY = 0;\r\n\r\n        var func = function (downEvent) {\r\n            if (downEvent.which !== 0 || downEvent.which !== 1) {\r\n                _start = new Date().getTime();\r\n                _startX = vEventHandler.getEventX(downEvent);\r\n                _startY = vEventHandler.getEventY(downEvent);\r\n            }\r\n            //downEvent.stopPropagation();\r\n\r\n            var handler = function (event) {\r\n                if (event.which !== 0 || event.which !== 1) {\r\n                    var end = new Date().getTime();\r\n                    var endX = vEventHandler.getEventX(event);\r\n                    var endY = vEventHandler.getEventY(event);\r\n                    var holdTime = end - _start;\r\n                    var dx = Math.abs(endX - _startX);\r\n                    var dy = Math.abs(endY - _startY);\r\n                    __Q.logger.debug('tap-holdtime',holdTime);\r\n                    if (holdTime <= 350 && dx < 5 && dy < 5) {\r\n                        //触发tap事件\r\n                        fn(event);\r\n                    }\r\n                }\r\n\r\n                $that.off(vMouseUp, '', handler);\r\n                $that.off(vMouseCancel, '', cancelHandler);\r\n                //event.stopPropagation();\r\n            };\r\n\r\n            $that.on(vMouseUp, '', handler);\r\n\r\n            var cancelHandler = function (event) {\r\n                $that.off(vMouseUp, '', handler);\r\n                $that.off(vMouseCancel, '', cancelHandler);\r\n                //event.stopPropagation();\r\n            };\r\n\r\n            $that.on(vMouseCancel, '', cancelHandler);\r\n        };\r\n\r\n        $that.on(vMouseDown, '', func);\r\n\r\n    };\r\n\r\n})();\n/**\r\n * Created by ylf on 2015/12/12.\r\n */\r\n\r\n(function (window, __Q) {\r\n    'user strict';\r\n\r\n    __Q.Class = {};\r\n\r\n    if (typeof Object.create !== \"function\"){\r\n        Object.create = function(o) {\r\n            function F() {}\r\n            F.prototype = o;\r\n            return new F();\r\n        };\r\n    }\r\n\r\n    __Q.Class.Create = function () {\r\n        return Object.create(__Q.Class.ClassUtils);\r\n    };\r\n\r\n    __Q.Class.ClassUtils = {\r\n        include: function (obj) {\r\n            for (var key in obj) {\r\n                this[key] = obj[key];\r\n            }\r\n        },\r\n        //类继承\r\n        extend: function (extension) {\r\n            var hasOwnProperty = Object.hasOwnProperty;\r\n            var object = Object.create(this);\r\n\r\n            for (var property in extension) {\r\n                if (hasOwnProperty.call(extension, property) || typeof object[property] === \"undefined\") {\r\n                    object[property] = extension[property];\r\n                }\r\n            }\r\n            return object;\r\n        },\r\n        //闭包绑定this指针\r\n        proxy: function (fn) {\r\n            var thisobj = this;\r\n            return function () {\r\n                return fn.apply(thisobj, arguments);\r\n            };\r\n        },\r\n        proxyAll: function (fucs) {\r\n            for (var i = 0; i < fucs.length; i++) {\r\n                this[fucs[i]] = this.proxy(this[fucs[i]]);\r\n            }\r\n        }\r\n    };\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n//事件管理对象\r\nvar Events = {\r\n    trigger: function () {\r\n        //将参数转换为数组\r\n        var arg = Array.prototype.slice.apply(arguments, [0]);\r\n        //取第一个，并从数组中删除，事件key\r\n        var type = arg.shift();\r\n        if (!this._eventHandler || !this._eventHandler[type]) {\r\n            return false;\r\n        }\r\n        this._eventHandler[type].apply(this, arg);\r\n        return true;\r\n    },\r\n    bind: function (type, callback) {\r\n        if (!this._keys || this._keys.indexOf(type) <= -1) {\r\n            throw  new Error('js/events :can not bind undeclared key ：' + type);\r\n        }\r\n\r\n        if (!this._eventHandler) {\r\n            this._eventHandler = {};\r\n        }\r\n        this._eventHandler[type] = callback;\r\n        return true;\r\n    },\r\n    unBind: function (type) {\r\n        delete  this._eventHandler[type];\r\n    },\r\n    //可绑定的keys数组\r\n    canBindKey: function (keys) {\r\n        this._keys = keys;\r\n    }\r\n};\n/**\r\n * Created by ylf on 2015/12/13.\r\n * 互动课堂第三方API\r\n */\r\n\r\n__Q.Native.InteractAppApi = (function (__Q) {\r\n\r\n    var isApp = (typeof AndroidInterface !== \"undefined\");\r\n    var bridgeCallNative = (typeof Bridge !== 'undefined') && Bridge && Bridge.callNative;\r\n    var isAppNative = isApp && bridgeCallNative;\r\n    //扩展全局标识\r\n    __Q.Native.isInteractApp = isAppNative;\r\n\r\n    var STUDENT = 'STUDENT';\r\n    var TEACHER = 'TEACHER';\r\n\r\n    var isStudent = false;\r\n    var isTeacher = false;\r\n    var isProjector = false;\r\n\r\n    var userInfo = null;\r\n\r\n    var callNative = function (method, params) {\r\n        try {\r\n            return Bridge.callNative(\"com.nd.pad.icr.ui.IcrJsBridge\", method, params || {});\r\n        } catch (ex) {\r\n            __Q.logger.error('mediaplayer call native error', ex);\r\n        }\r\n    }\r\n\r\n    //获取当前app用户信息\r\n    var getCurrentUserInfo = function () {\r\n        if (isAppNative && !userInfo) {\r\n            var res = callNative(\"getCurrentUserInfo\", {});\r\n            if (res) {\r\n                userInfo = res;\r\n                isStudent = (res.userType === STUDENT);\r\n                isTeacher = (res.userType === TEACHER);\r\n                isProjector = res.isProjector;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 隐藏native组件\r\n     * @param show true/false\r\n     */\r\n    var setNativeModuleVisibility = function (show) {\r\n        if (isAppNative) {\r\n            getCurrentUserInfo();\r\n            if (isTeacher && !isProjector) {\r\n                //教师端且非投影端隐藏以下native控件\r\n                var res = callNative(\"setNativeModuleVisibility\",\r\n                    {\r\n                        items: [\r\n                            {moduleId: 'toolBar', visible: show},//工具栏\r\n                            {moduleId: 'exit', visible: show},//退出课堂\r\n                            {moduleId: 'exam', visible: show},//发送任务\r\n                            {moduleId: 'roster', visible: show}//花名册按钮\r\n                        ]\r\n                    }\r\n                );\r\n                __Q.logger.debug(res);\r\n            } else if (isStudent) {\r\n                //隐藏学生端view\r\n                var res = callNative(\"setPresenterVisibility\", {instanceId: \"studentDraft\", visible: show});//草稿按钮栏\r\n\r\n                __Q.logger.debug(res);\r\n            }\r\n        }\r\n    };\r\n\r\n    var setViewerModuleVisibility = function (show) {\r\n        if (isAppNative) {\r\n            getCurrentUserInfo();\r\n            if (isStudent) {\r\n                //隐藏学生端view\r\n                var res = callNative(\"setPresenterVisibility\", {instanceId: \"studentDraft\", visible: show});//草稿按钮栏\r\n\r\n                __Q.logger.debug(res);\r\n            }\r\n        }\r\n    };\r\n    return {\r\n        setNativeModuleVisibility: setNativeModuleVisibility,\r\n        setViewerModuleVisibility: setViewerModuleVisibility\r\n    };\r\n})(__Q);\n/**\r\n * Created by Administrator on 2016/1/19.\r\n */\r\n\r\n__Q.lang = (function () {\r\n\r\n    var jp = {\r\n        \"media_img_still_loading\": \"画像読み込み中\",\r\n        \"media_img_tip\": \"クリックして画像を見る\",\r\n        \"media_video_fullscreen\": \"全画面\",\r\n        \"media_video_exit_fullscreen\": \"全画面解除\",\r\n        \"media_video_not_support_fullscreen\": \"全画面再生できない\"\r\n    };\r\n\r\n    var zh = {\r\n        \"media_img_still_loading\": \"图片还在加载中\",\r\n        \"media_img_tip\": \"点击查看图片\",\r\n        \"media_video_fullscreen\": \"全屏\",\r\n        \"media_video_exit_fullscreen\": \"退出全屏\",\r\n        \"media_video_not_support_fullscreen\": \"不支持全屏播放\"\r\n    };\r\n\r\n    var en = {\r\n        \"media_img_still_loading\": \"Still loading image\",\r\n        \"media_img_tip\": \"Click to view\",\r\n        \"media_video_fullscreen\": \"Full screen\",\r\n        \"media_video_exit_fullscreen\": \"Exit\",\r\n        \"media_video_not_support_fullscreen\": \"Full screen playback not supported\"\r\n    }\r\n\r\n    var hk = {\r\n        \"media_img_still_loading\": \"圖片還在加載中\",\r\n        \"media_img_tip\": \"點擊查看圖片\",\r\n        \"media_video_fullscreen\": \"全屏\",\r\n        \"media_video_exit_fullscreen\": \"退出全屏\",\r\n        \"media_video_not_support_fullscreen\": \"不支持全屏播放\"\r\n    };\r\n\r\n    var _lang = {\r\n        'zh': zh,\r\n        'zh_cn': zh,\r\n        'zh_hk': hk,\r\n        'hk': hk,\r\n        'en': en,\r\n        'en_us': en,\r\n        'ja': jp,\r\n        'ja_jp': jp\r\n    };\r\n\r\n    return {\r\n        getLangText: function (langType, key, val) {\r\n            langType = langType.toLowerCase();\r\n            var lang = _lang[langType] ? _lang[langType] : _lang['zh'];\r\n            var result = lang[key] || '';\r\n            return result;\r\n        }\r\n    }\r\n})();\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n__Q.Controller.MediaPlayer = (function (window, __Q) {\r\n    //基础对象\r\n    var MediaPlayer = __Q.Class.Create();\r\n    //扩展事件管理\r\n    MediaPlayer.include(Events);\r\n\r\n    MediaPlayer.include({\r\n        //对象构造\r\n        create: function ($container, option, mediaType) {\r\n            var self = Object.create(this);\r\n            //初始化时间\r\n            self.timeFormat = '0:00';\r\n            self.$container = $container;\r\n            self.mouseMoveCount = 0;\r\n            self.options = option;\r\n            //初始化model\r\n            self._mediaModel = __Q.Model.MediaModel.create($container.find(mediaType));\r\n            //闭包绑定this指针\r\n            var funcs = ['playPause', '_progress', '_progressMouseup', '_volumeToggle', '_volumeProgress',\r\n                '_volumeProgressMouseup', '_volumeMutedToggle', '_volumeShow', '_volumeHide'];\r\n            self.proxyAll(funcs);\r\n            //playTrigger：触发播放，ended播放停止\r\n            self.canBindKey(['playTrigger', 'ended', 'pause', 'unBind', 'volumeToggle']);\r\n            return self;\r\n        },\r\n        getMediaModel: function () {\r\n            return this._mediaModel;\r\n        },\r\n        __Q: function (selector) {\r\n            return this.$container.find(selector);\r\n        },\r\n        baseInit: function () {\r\n\r\n            var $media = this.getMediaModel().getQMedia();\r\n            //是否开启预加载\r\n            this.getMediaModel().setPreLoad(this.options.mediaPreload ? 'auto' : 'none');\r\n            //移除默认的控制条\r\n            $media.removeAttr(\"controls\");\r\n\r\n            if (this._iePreloadNone()) {\r\n                //ie下preload=none无效，不预加载，移除src，\r\n\r\n                $media.attr('data-src', $media.attr('src'));\r\n                $media.removeAttr(\"src\");\r\n            }\r\n            this._findElement();\r\n            //初始化media事件对象\r\n            this._eventModel = __Q.Model.MediaEvent.create(this._mediaModel, this.options);\r\n            //注册media事件对象中注册+事件\r\n            this._mediaEventHandler();\r\n            this._toolBarEvent(true);\r\n            //iOS不支持音量调节，直接隐藏掉\r\n            if (__Q.support.isiOS) {\r\n                this._$volumeIconContainer.hide();\r\n                this.__Q('.qp-time-base').css('right', '12px');\r\n            }\r\n        },\r\n        _toolBarEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$play[on]('click', _this.playPause);\r\n\r\n            //这里为何要更新这个？\r\n            _this._updateVolumeEntryView(_this.getMediaModel().getVolume(), false);\r\n\r\n            //阻止事件冒泡\r\n            _this._$mediaBox[on]('click', function (e) {\r\n                __Q.event.stopPropagation(e);\r\n            });\r\n            _this._$progress[on]('touchstart mousedown', _this._progress);\r\n            _this._$progress[on]('touchend touchcancel mouseup', _this._progressMouseup);\r\n            _this._$volumeControl[on]('mousedown touchstart', _this._volumeProgress);\r\n            _this._$volumeControl[on]('mouseup touchend touchcancel', _this._volumeProgressMouseup);\r\n            _this._$volumeIconContainer[on]('mouseout mouseleave', _this._volumeHide);\r\n\r\n            if (__Q.support.touch) {\r\n                _this._$volumeIcon[on]('click', _this._volumeToggle);\r\n            } else {\r\n                //处理白板端同时支持touch和mouse事件\r\n                if ('ontouchend' in document) {\r\n                    _this._$volumeIcon[on]('click', _this._volumeToggle);\r\n                } else {\r\n                    _this._$volumeIcon[on]('click', _this._volumeMutedToggle);\r\n                }\r\n                _this._$volumeIconContainer[on]('mouseover', _this._volumeShow);\r\n            }\r\n        },\r\n        _iePreloadNone: function () {\r\n            //处理ie preload无效的问题\r\n            if (!this.options.mediaPreload && __Q.browser.msie) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        iePreloadResetSrc: function () {\r\n            if (this._iePreloadNone() && !this._resetSrc) {\r\n                //只触发一次\r\n                this._resetSrc = true;\r\n                var $video = this.getMediaModel().getQMedia();\r\n                $video.attr('src', $video.attr('data-src'));\r\n            }\r\n        },\r\n        _findElement: function () {\r\n            var that = this;\r\n            var elements = {\r\n                '_$loading': '[data-oper=\"loading\"]',//加载中提示\r\n                '_$play': '.qp-media-toolbar [data-oper=\"play\"]',  //播放按钮\r\n                '_$playInBody': '.qp-media-box>[data-oper=\"play\"]',  //播放按钮\r\n                '_$endTime': '[data-oper=\"endTime\"]', //总时间\r\n                '_$currentTime': '[data-oper=\"curentTime\"]',//当前播放时间\r\n                '_$downedBar': '[data-oper=\"downed-bar\"]',//预加载的进度\r\n                '_$playedBar': '[data-oper=\"played-bar\"]',  //一播放的进度\r\n                '_$progress': '[data-oper=\"progress\"]', //视频进度条\r\n                '_$volumeIconContainer': '[data-oper=\"volume-icon-container\"]', //右侧音量\r\n                '_$volumeIcon': '[data-oper=\"volume-icon\"]',//右侧音量按钮\r\n                '_$volumeControl': '[data-oper=\"volume-control\"]', //音量调节窗口\r\n                '_$volumeBarContainer': '[data-oper=\"volume-bar-container\"]',//音量控制条\r\n                '_$volumeBarR': '[data-oper=\"volume-bar-r\"]',//音量调节点\r\n                '_$volumeBarS': '[data-oper=\"volume-bar-s\"]',//音量当前进度\r\n                '_$toolbar': '[data-oper=\"toolbar\"]',//控制条\r\n                '_$mediaBox': '[data-oper=\"media-box\"]',//容器\r\n                '_$mediaDisable': '[data-oper=\"media-disable\"]'//容器\r\n            };\r\n\r\n            for (var sel in elements) {\r\n                that[sel] = that.__Q(elements[sel]);\r\n            }\r\n        },\r\n        clear: function () {\r\n            try {\r\n                this._mediaModel.load();\r\n                this._eventModel.mediaEventListener(false);\r\n                this.trigger('unBind');\r\n            } catch (ex) {\r\n                //console.log(ex);\r\n                __Q.logger.debug('clear', ex)\r\n            }\r\n        },\r\n        unBind: function () {\r\n            try {\r\n                this._eventModel.mediaEventListener(false);\r\n                this.trigger('unBind');\r\n            } catch (ex) {\r\n                //console.log(ex);\r\n                __Q.logger.debug('unbind', ex)\r\n            }\r\n        },\r\n        destroy: function () {\r\n            this.unBind();\r\n        },\r\n        reset: function () {\r\n            this.pause();\r\n        },\r\n        setLock: function (isLock) {\r\n            this.options.lock = isLock;\r\n            if (isLock) {\r\n                this._$mediaDisable.show();\r\n            } else {\r\n                this._$mediaDisable.hide();\r\n            }\r\n        },\r\n        isLock: function () {\r\n            return this.options.lock;\r\n        },\r\n        changeVolume: function (vol, display) {\r\n            this._mediaModel.setVolume(vol);\r\n            if (display) {\r\n                this._$volumeControl.show();\r\n                this.trigger('volumeToggle', true);\r\n            } else {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle', false);\r\n            }\r\n        },\r\n        hideVolumeControl: function () {\r\n            if (this._$volumeControl.isShow()) {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle', false);\r\n                this._eventModel.volumeChangeEvent(false);\r\n            }\r\n        },\r\n        isPlaying: function () {\r\n            return this._mediaModel.isPlaying();\r\n        },\r\n        playPause: function (e) {\r\n            this.trigger('playTrigger');\r\n            this.iePreloadResetSrc();\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (mediaObj.paused) {\r\n                this._$play.addClass(\"qp-btn-stop\");\r\n                this._$playInBody.addClass(\"qp-btn-stop\");\r\n                mediaObj.play();\r\n            } else {\r\n                this._$play.removeClass(\"qp-btn-stop\");\r\n                this._$playInBody.removeClass(\"qp-btn-stop\");\r\n                mediaObj.pause();\r\n            }\r\n        },\r\n        pause: function () {\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (this.options.renderUI) {\r\n                this._$play.removeClass(\"qp-btn-stop\");\r\n                this._$playInBody.removeClass(\"qp-btn-stop\");\r\n            }\r\n            if (mediaObj && !mediaObj.paused) {\r\n                mediaObj.pause();\r\n            }\r\n        },\r\n        play: function (outTrigger) {\r\n            this.trigger('playTrigger', outTrigger);\r\n            this.iePreloadResetSrc();\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (this.options.renderUI) {\r\n                this._$play.addClass(\"qp-btn-stop\");\r\n                this._$playInBody.addClass(\"qp-btn-stop\");\r\n            }\r\n            if (mediaObj && mediaObj.paused) {\r\n                mediaObj.play();\r\n            }\r\n        },\r\n        _mediaEventHandler: function () {\r\n            var _this = this;\r\n            if (!_this.options.renderUI) {\r\n                return;\r\n            }\r\n            var mediaEvent = {\r\n                playing: function () {\r\n                    _this.trigger('playTrigger');\r\n                    _this.iePreloadResetSrc();\r\n                    _this._$play.addClass(\"qp-btn-stop\");\r\n                    _this._$playInBody.addClass(\"qp-btn-stop\");\r\n                },\r\n                pause: function () {\r\n                    _this.trigger('pause');\r\n                    _this._$play.removeClass('qp-btn-stop');\r\n                    _this._$playInBody.removeClass(\"qp-btn-stop\");\r\n\r\n                },\r\n                ended: function () {\r\n                    _this.trigger('ended');\r\n                    _this._$play.removeClass('qp-btn-stop');\r\n                    _this._$playInBody.removeClass(\"qp-btn-stop\");\r\n                    _this._$loading.hide();\r\n                    _this._$currentTime.text(_this.timeFormat);\r\n                    _this._$playedBar.css('width', '0%');\r\n                    _this._$downedBar.css('width', \"0%\");\r\n                },\r\n                timeupdate: function () {\r\n                    if (_this._mediaModel.getReadyState() < 3) {\r\n                        //_this._$loading.show();\r\n                        return false;\r\n                    }\r\n                    _this._$loading.hide();\r\n                    _this._updateEndTime();\r\n                    _this._updateVideoData();\r\n                    _this._updateCurrentTime();\r\n                },\r\n                volumechange: function () {\r\n                    _this._updateVolumeEntryView(_this._mediaModel.getVolume(), true);\r\n                },\r\n                progress: function () {\r\n                    var currentTime = _this._mediaModel.getCurrentTime();\r\n                    var duration = _this._mediaModel.getDuration();\r\n                    var buffered = _this._mediaModel.getBuffered();\r\n                    var minEnd = 0;\r\n                    for (var i = 0; i < buffered.length; i++) {\r\n                        var end = buffered.end(i);\r\n                        if (end > currentTime) {\r\n                            if (!minEnd) {\r\n                                minEnd = end;\r\n                            } else {\r\n                                if (minEnd > end) {\r\n                                    minEnd = end;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!minEnd) {\r\n                        minEnd = currentTime;\r\n                    }\r\n                    var percent = (minEnd / duration) * 100;\r\n                    if (percent > 100) {\r\n                        percent = 0;\r\n                    }\r\n\r\n                    _this._$downedBar.css('width', percent + \"%\");\r\n                    _this._updateEndTime();\r\n                },\r\n                waiting: function () {\r\n                    _this._$loading.show();\r\n                },\r\n                error: function (code) {\r\n                    //console.log(\"media error code ：\" + code);\r\n                },\r\n                loadedmetadata: function () {\r\n                    _this._updateEndTime();\r\n                },\r\n                play: function () {\r\n                    if (_this._mediaModel.getCurrentTime() <= 0) {\r\n                        _this._$loading.show();\r\n                    }\r\n                },\r\n                durationchange: function () {\r\n                    var duration = _this._mediaModel.getDuration();\r\n                    if (duration < 1 && duration > 0) {\r\n                        //_this.timeFormat = '0:00.00';\r\n                        _this._$currentTime.text(_this.timeFormat);\r\n                    }\r\n                    _this._updateEndTime();\r\n                }\r\n            };\r\n            for (var key in mediaEvent) {\r\n                this._eventModel.bind(key, mediaEvent[key]);\r\n            }\r\n        },\r\n        _updateEndTime: function () {\r\n            var duration = this._mediaModel.getDuration();\r\n            if (duration > 0 && (!this.durationInit || this.durationInitDuration !== duration)) {\r\n                if (duration >= 60 * 60 || duration < 1) {\r\n                    this._$toolbar.addClass('qp-progress-long');\r\n                } else {\r\n                    this._$toolbar.removeClass('qp-progress-long');\r\n                }\r\n                this._$endTime.text(this._formatTime(duration));\r\n                this.durationInit = true;\r\n                //第一次获取的总长度可能有错，pad上经常取到100s\r\n                this.durationInitDuration = duration;\r\n            }\r\n        },\r\n        _progress: function (e) {\r\n            var progWrapper = this._$progress;\r\n            var media = this._mediaModel.getMedia();\r\n            if (progWrapper.length > 0) {\r\n                var _this = this;\r\n                if (e && _this._coordinate(e)) {\r\n                    _this._seekTo(_this._coordinate(e).pageX, progWrapper, media, true);\r\n                }\r\n                var handler = function (e) {\r\n                    if (e) {\r\n                        __Q.event.preventDefault(e);\r\n                    }\r\n                    //在seekTo方法里处理进度条\r\n                    _this._seekTo(_this._coordinate(e).pageX, progWrapper, media);\r\n                };\r\n                progWrapper.on('mousemove  touchmove', '', handler);\r\n\r\n                var cancelHandler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    __Q.event.stopPropagation(e);\r\n                    progWrapper.off('mousemove touchmove', '', handler);\r\n                    progWrapper.off('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n                };\r\n\r\n                progWrapper.on('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n            }\r\n        },\r\n        _progressMouseup: function (e) {\r\n            var progWrapper = this._$progress;\r\n            var media = this._mediaModel.getMedia();\r\n            var _this = this;\r\n            _this._seekTo(_this._coordinate(e).pageX, progWrapper, media, true);\r\n        },\r\n        _updateVolumeEntryView: function (volume, on) {\r\n            var _this = this;\r\n            var muted = this._mediaModel.getMuted();\r\n            _this._$volumeBarR.css(\"bottom\", parseInt(muted ? 0 : (volume * 100)) + \"%\");\r\n            _this._$volumeBarS.css(\"height\", (parseInt(muted ? 0 : (volume * 100)) === 0 ? 0.5 : parseInt(muted ? 0 : (volume * 100))) + \"%\");\r\n\r\n            if (volume === 0 || muted) {\r\n                _this._$volumeIcon.addClass('qp-btn-volume-no');\r\n            } else {\r\n                _this._$volumeIcon.removeClass('qp-btn-volume-no');\r\n            }\r\n        },\r\n        _volumeToggle: function (e) {\r\n            var _this = this;\r\n            this._volumeClick = true;\r\n            //防止点击声音按钮时，点击到声音控制条\r\n            setTimeout(function () {\r\n                _this._volumeClick = false;\r\n            }, 100);\r\n            if (e.srcElement) {\r\n                var $volume = __Q(e.srcElement).closest(\".qp_video-progress-box\");\r\n                if ($volume && $volume.get(0) === this._$volumeControl.get(0)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this._$volumeControl.toggle();\r\n            var isShow = this._$volumeControl.isShow();\r\n            this.trigger('volumeToggle', isShow);\r\n            this._eventModel.volumeChangeEvent(isShow);\r\n        },\r\n        _volumeMutedToggle: function (e) {\r\n            this._mediaModel.setMuted(!this._mediaModel.getMuted());\r\n            this._updateVolumeEntryView(this._mediaModel.getVolume());\r\n        },\r\n        _volumeShow: function (e) {\r\n            if (__Q.event.checkHover(e, this._$volumeIconContainer.get(0))) {\r\n                //白板使用笔来点击会触发这个事件\r\n                if (e && e.type === 'mouseover' && e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents) {\r\n                    return;\r\n                }\r\n                this._$volumeControl.show();\r\n\r\n                this.trigger('volumeToggle', true);\r\n                this._eventModel.volumeChangeEvent(true);\r\n            }\r\n        },\r\n        _volumeHide: function (e) {\r\n            if (__Q.event.checkHover(e, this._$volumeIconContainer.get(0))) {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle', false);\r\n                this._eventModel.volumeChangeEvent(false);\r\n            }\r\n        },\r\n        _volumeProgress: function (e) {\r\n\r\n            if (this._volumeClick) {\r\n                return;\r\n            }\r\n\r\n            var progWrapper = this._$volumeControl;\r\n            var media = this._mediaModel.getMedia();\r\n            if (progWrapper.length > 0) {\r\n                var _this = this;\r\n                _this.volumeUp = false;\r\n                this._mediaModel.setMuted(false);\r\n\r\n                if (_this._coordinate(e)) {\r\n                    _this._volumeSeekTo(_this._coordinate(e).pageY, media, true);\r\n                }\r\n\r\n                var handler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    if (_this._coordinate(e)) {\r\n                        _this._volumeSeekTo(_this._coordinate(e).pageY, media);\r\n                    }\r\n                };\r\n\r\n                progWrapper.on('mousemove  touchmove', '', handler);\r\n\r\n                var cancelHandler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    _this.volumeUp = true;\r\n                    progWrapper.off('mousemove touchmove', '', handler);\r\n                    progWrapper.off('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n                };\r\n\r\n                progWrapper.on('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n\r\n            }\r\n        },\r\n        _volumeProgressMouseup: function (e) {\r\n            if (this._volumeClick) {\r\n                return;\r\n            }\r\n            var media = this._mediaModel.getMedia();\r\n            this.volumeUp = true;\r\n            this._eventModel.volumeChangeEvent(true, true);\r\n            var _this = this;\r\n            if (_this._coordinate(e)) {\r\n                _this._volumeSeekTo(_this._coordinate(e).pageY, media);\r\n            }\r\n        },\r\n        _updateCurrentTime: function () {\r\n            var currentTime = this._mediaModel.getCurrentTime();\r\n            this._$currentTime.html(this._formatTime(currentTime));\r\n        },\r\n        _updateVideoData: function () {\r\n            // 更新进度\r\n            var current = this._mediaModel.getCurrentTime();\r\n            var duration = this._mediaModel.getDuration();\r\n            var scrubbing = this._$playedBar;\r\n\r\n            if (current === 0.01) {//处理移动端bug的特殊进度。\r\n                scrubbing.css('width', '0%');\r\n            } else {\r\n                var scrubbingWidth = current * 100 / duration;\r\n                scrubbing.css('width', scrubbingWidth + '%');\r\n            }\r\n        },\r\n        _seekTo: function (xPos, progWrapper, media, immediately) {\r\n            var duration = this._mediaModel.getDuration();\r\n            if (duration > 0) {\r\n                var progressBar = this._$playedBar;\r\n                var progWidth = Math.max(0, Math.min(1, (xPos - ( progWrapper.offset().left / this.getScale())) / progWrapper.width()));\r\n\r\n                var seekTo = progWidth * duration;\r\n                //一旦media.currentTime = seekTo;执行，media的timeupdate就能够监听到，视频的当前播放位置就会立即跳转\r\n                //由于move触发的事件过于频繁所以加了个优化，每10次move触发的事件只进行一次media.currentTime = seekTo，当然进度条的拖动效果是实时的\r\n                this.mouseMoveCount++;\r\n                if (this.mouseMoveCount % 10 === 0 || immediately) {\r\n                    if (seekTo >= 0) {\r\n                        this._mediaModel.setCurrentTime(seekTo);\r\n                    }\r\n                }\r\n\r\n                var width = Math.round(progWidth * (progWrapper.width()));\r\n                progressBar.css('width', width + 'px');\r\n                this._updateCurrentTime();\r\n            }\r\n        },\r\n        _volumeSeekTo: function (yPos) {\r\n            var progressBar = this._$volumeBarContainer;\r\n            var progHeight = Math.max(0, Math.min(1, (yPos - (progressBar.offset().top / this.getScale())) / progressBar.height()));\r\n            this._mediaModel.setVolume(1 - progHeight);\r\n        },\r\n        _coordinate: function (event) {\r\n            var point = {};\r\n            var scale = this.getScale();\r\n            switch (event.type) {\r\n                case 'touchstart':\r\n                case 'touchmove':\r\n                case 'touchend':\r\n                case 'touchcancel':\r\n                    point.pageX = (event.changedTouches[0].pageX || event.touches[0].pageX) / scale;\r\n                    point.pageY = (event.changedTouches[0].pageY || event.touches[0].pageY) / scale;\r\n                    return point;\r\n                default:\r\n                    point.pageX = event.pageX / scale;\r\n                    point.pageY = event.pageY / scale;\r\n                    return point;\r\n            }\r\n\r\n        },\r\n        _formatTime: function (secs) {\r\n            var hours = Math.floor(secs / (60 * 60));\r\n            var minutes = Math.floor(secs / 60) % 60;\r\n            var seconds = Math.floor(secs - (minutes * 60) - (hours * 60 * 60));\r\n\r\n            if (seconds === 60) {\r\n                seconds = 0;\r\n                minutes = minutes + 1;\r\n            }\r\n\r\n            if (seconds < 10) {\r\n                seconds = '0' + seconds;\r\n            }\r\n\r\n\r\n            var duration = this._mediaModel.getDuration();\r\n\r\n            //默认显示一秒\r\n            if (duration > 0 && duration < 1) {\r\n                if (secs > 0) {\r\n                    return '0:01';\r\n                } else {\r\n                    return '0:00';\r\n                }\r\n                //return minutes + ':' + seconds + '.' + secs.toFixed(2).split('.')[1];\r\n            } else {\r\n                if (hours > 0) {\r\n                    return hours + ':' + minutes + ':' + seconds;\r\n                } else {\r\n                    return minutes + ':' + seconds;\r\n                }\r\n            }\r\n        },\r\n        getScale: function () {\r\n            //This works because getBoundingClientRect returns the actual dimension while offsetWidth/Height is the unscaled size.\r\n            this.scaleX = (this.$container.get(0).getBoundingClientRect().width / this.$container.get(0).offsetWidth) || 1;\r\n            return this.scaleX;\r\n        },\r\n        mediaPlay: function (o) {\r\n            this.play();\r\n        },\r\n        mediaPause: function (o) {\r\n            this.pause();\r\n        },\r\n        mediaSkip: function (seek) {\r\n            this._mediaModel.setCurrentTime(seek === 0 ? 0.01 : seek);\r\n        },\r\n        mediaVolumeChange: function (volume, display) {\r\n            this.changeVolume(volume, display);\r\n        }\r\n    });\r\n\r\n    return MediaPlayer;\r\n})(window, __Q);\r\n\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q) {\r\n    var DEFAULTS = {\r\n        onEnd: false,\r\n        onPause: false,\r\n        lang: 'zh',\r\n        onPlay: false,\r\n        onSeek: false,\r\n        onVolumeChange: false,\r\n        onTimeUpdate: false,\r\n        onlyRender: false,\r\n        renderUI: true,\r\n        audio: {\r\n            width: 0,\r\n            height: 0\r\n        }\r\n    };\r\n\r\n    var AudioPlayer = __Q.Controller.MediaPlayer.extend({\r\n        create: function ($container, options) {\r\n            var that = __Q.Controller.MediaPlayer.create.apply(this, [$container, __Q.extend({}, DEFAULTS, options), 'audio']);\r\n            that.options = __Q.extend({}, DEFAULTS, options);\r\n\r\n            if (that.options.renderUI) {\r\n                var funcs = ['_playTriggerHandler', '_endedHandler'];\r\n                that.proxyAll(funcs);\r\n\r\n                that._init();\r\n                if (that.options.onlyRender === false) {\r\n                    that.start();\r\n                }\r\n                that.bind('playTrigger', that._playTriggerHandler);\r\n                that.bind('ended', that._endedHandler);\r\n            }\r\n            return that;\r\n        },\r\n        _resizeMap: {\r\n            'qp-media-box-mini': function (width, height) {\r\n                return width <= 200 || height <= 60;\r\n            },\r\n            'qp-media-box-min-height': function (width, height) {\r\n                return height <= 180 && height > 125;\r\n            },\r\n            'qp-media-box-min-height-audio-s': function (width, height) {\r\n                return height <= 125 && height > 60;\r\n            },\r\n            'qp-media-box-max-hd': function (width, height) {\r\n                return width > 360 && height > 270;\r\n            }\r\n        },\r\n        _playTriggerHandler: function () {\r\n        },\r\n        _endedHandler: function () {\r\n            //移除自动隐藏样式\r\n        },\r\n        start: function () {\r\n            var _this = this;\r\n            if (_this.started) {\r\n                return;\r\n            }\r\n            //防止重复绑定\r\n            _this.started = true;\r\n            //公用基类初始化\r\n            this.baseInit();\r\n            //绑定video私有事件\r\n            this._controlEvent(true);\r\n        },\r\n        _init: function () {\r\n            var $audio = this.getMediaModel().getQMedia();\r\n\r\n            try {\r\n                $audio.before(__Q.View.audioHtml);\r\n                this.__Q('[data-oper=\"loading\"] ').before($audio.get(0));\r\n                this._$qpVideoWrap = this.__Q('.qp-video-videowrap');\r\n                this._$qpMediaIcon = this.__Q('.qp-media-icons-right');\r\n                if (this.options.autoAdaptSize) {\r\n                    var width = this.options.audio.width;\r\n                    var height = this.options.audio.height;\r\n                    if (width && height) {\r\n                        this.resizeMedia(width, height);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createHtml unknow error:' + e.message);\r\n            }\r\n        },\r\n        resizeMedia: function (width, height) {\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n\r\n            var reWidth = width, reHeight = height;\r\n            var mini = false;\r\n            for (var key in this._resizeMap) {\r\n                if (this._resizeMap[key](width, height)) {\r\n                    //mini样式匹配则移除其他适配样式\r\n                    if (mini) {\r\n                        this._$mediaBox.removeClass(key);\r\n                    } else {\r\n                        this._$mediaBox.addClass(key);\r\n                    }\r\n                    if (!mini) {\r\n                        if (key === 'qp-media-box-mini') {\r\n                            this._$mediaBox.addClass(key);\r\n                            mini = true;\r\n                            reWidth = 0;\r\n                            reHeight = 0;\r\n                        }\r\n                    }\r\n                    if (key === 'qp-media-box-min-height-audio-s') {\r\n                        reHeight = 40;\r\n                    }\r\n                } else {\r\n                    this._$mediaBox.removeClass(key);\r\n                }\r\n            }\r\n            this._$mediaBox.css('width', reWidth + 'px');\r\n            this._$mediaBox.css('height', reHeight + 'px');\r\n        },\r\n        _controlEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$playInBody[on]('click', _this.playPause);\r\n        }\r\n    });\r\n\r\n\r\n    function AudioPlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //插件缓存\r\n            if (!data) {\r\n                data = AudioPlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('audioplayer', AudioPlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q) {\r\n\r\n    var DEFAULT = {\r\n        renderUI: true,\r\n        lang: 'zh',\r\n        img: {\r\n            renderImmediately: false,//不立即加载\r\n            src: '',\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        onlyRender: false\r\n    };\r\n\r\n    var ImagePlayer = __Q.Class.Create();\r\n\r\n    ImagePlayer.include({\r\n        create: function ($container, options) {\r\n            var that = Object.create(this);\r\n            that.$container = $container;\r\n            var imgData = {\r\n                src: options.img.src ? options.img.src : $container.find('img').attr('src'),\r\n                width: 0,\r\n                height: 0\r\n            };\r\n            that.imgData = imgData;\r\n            that.options = __Q.extend({}, DEFAULT, options);\r\n            //限定最小宽高\r\n            if (that.options.autoAdaptSize && that.options.img.width && that.options.img.height) {\r\n                if (that.options.img.width < that._minRenderWidth) {\r\n                    that.options.img.width = that._minRenderWidth;\r\n                }\r\n                if (that.options.img.height < that._minRenderHeight) {\r\n                    that.options.img.height = that._minRenderHeight;\r\n                }\r\n            }\r\n            that.viewer = null;//图片大图查看\r\n            var funcs = ['_createViewer'];\r\n            that.proxyAll(funcs);\r\n            that._init();\r\n            return that;\r\n        },\r\n        __Q: function (selector) {\r\n            return this.$container.find(selector);\r\n        },\r\n        _defaultRenderHeight: 180,\r\n        _defaultRenderWidth: 260,\r\n        _minRenderHeight: 100,\r\n        _minRenderWidth: 130,\r\n        _loadImg: function (callback) {\r\n            var _this = this;\r\n            var img = new Image();\r\n            img.src = _this.imgData.src;\r\n            if (img.complete) {\r\n                _this.imgData.width = img.width;\r\n                _this.imgData.height = img.height;\r\n                if (callback) {\r\n                    callback()\r\n                }\r\n            } else {\r\n                img.onload = function () {\r\n                    _this.imgData.width = img.width;\r\n                    _this.imgData.height = img.height;\r\n                    if (callback) {\r\n                        callback()\r\n                    }\r\n                    img.onload = null;\r\n                };\r\n            }\r\n\r\n        },\r\n        _init: function () {\r\n            var _this = this;\r\n            if (!_this.options.renderUI) {\r\n                _this._loadImg();\r\n                var $image = this.__Q('img');\r\n                //$image.before(__Q.View.viewerHtml);\r\n                $image.on('qpTap', function (e) {\r\n                    if (!_this.imgData.width) {\r\n                        return;\r\n                    }\r\n                    _this._createViewer();\r\n                });\r\n            } else if (_this.options.img.renderImmediately) {\r\n                _this._createHtml();\r\n                _this._loadImg();\r\n                _this._controlEvent();\r\n            } else {\r\n                _this._loadImg(function () {\r\n                    var render = false;\r\n                    //超过指定宽高的图片||自适应UI\r\n                    if ((_this.options.autoAdaptSize && _this.options.img.width && _this.options.img.height\r\n                        && (_this.imgData.width > _this.options.img.width || _this.imgData.height > _this.options.img.height))) {\r\n                        render = true;\r\n                    } else if (_this.imgData.width > _this._defaultRenderWidth || _this.imgData.height > _this._defaultRenderHeight) {\r\n                        render = true;\r\n                    }\r\n                    if (render) {\r\n                        _this._createHtml();\r\n                        _this._controlEvent();\r\n                    }\r\n\r\n                });\r\n            }\r\n        },\r\n        start: function () {\r\n            this.options.onlyRender = false;\r\n        },\r\n        _createHtml: function () {\r\n            var _this = this;\r\n            var $image = this.__Q('img');\r\n            //移除显示指定的宽高和样式，进行自适应布局\r\n            $image.removeAttr(['width', 'height', 'style']);\r\n            try {\r\n                $image.before(__Q.View.imageHtml);\r\n                //$image.before(__Q.View.viewerHtml);\r\n\r\n                this.__Q('.qp-media-pics-bg').get(0).appendChild($image.get(0));\r\n                this.__Q('.qp-media-toolbar').text(__Q.lang.getLangText(this.options.lang, 'media_img_tip'));\r\n                this.__Q('.qp-meida-tip-message').text(__Q.lang.getLangText(this.options.lang, 'media_img_still_loading'));\r\n                //自适应大小\r\n                if (this.options.autoAdaptSize && this.options.img.width && this.options.img.height) {\r\n                    this.resizeMedia(this.options.img.width, this.options.img.height);\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createHtml unknow error:' + e.message);\r\n            }\r\n        },\r\n        _controlEvent: function () {\r\n            var _this = this;\r\n            this._$tipMessage = this.__Q('.qp-meida-tip-message');\r\n            _this.__Q('.qp-media-box').on('click', function (e) {\r\n                if (e) {\r\n                    __Q.event.stopPropagation(e);\r\n                }\r\n                if (_this.options.onlyRender) {\r\n                    return;\r\n                }\r\n                if (_this.options.lock) {\r\n                    return;\r\n                }\r\n                if (!_this.imgData.width) {\r\n                    clearTimeout(_this._msgTimeoutId);\r\n                    _this._$tipMessage.show();\r\n                    _this._msgTimeoutId = setTimeout(function () {\r\n                        _this._$tipMessage.hide();\r\n                    }, 3000);\r\n                    return;\r\n                }\r\n                _this._createViewer()\r\n            });\r\n        },\r\n        resizeMedia: function (width, height) {\r\n\r\n            if (width < this._minRenderWidth) {\r\n                width = this._minRenderWidth;\r\n            }\r\n            if (height < this._minRenderHeight) {\r\n                height = this._minRenderHeight;\r\n            }\r\n\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n            if (!this._$picsBg) {\r\n                this._$picsBg = this.__Q('.qp-media-pics-bg');\r\n            }\r\n            if (!this._$image) {\r\n                this._$image = this.__Q('.qp-media-pics-bg img');\r\n            }\r\n            this._$mediaBox.css('width', width + 'px');\r\n            this._$mediaBox.css('height', height + 'px');\r\n            this._$picsBg.css('width', width + 'px');\r\n            this._$picsBg.css('height', height + 'px');\r\n            this._$image.css('maxWidth', width + 'px');\r\n            this._$image.css('maxHeight', height + 'px');\r\n        },\r\n        _createViewer: function () {\r\n            var _this = this;\r\n            if (!_this.viewer) {\r\n                var fullChange = _this.options.onFullScreenChange || _this.options.eventHandler.fullScreenChange;\r\n                _this.viewer = __Q.Controller.ImageViewer.create(_this.$container, _this.imgData.width, _this.imgData.height, _this.imgData.src, fullChange);\r\n            }\r\n            _this.viewer.show();\r\n        },\r\n        destroy: function () {\r\n            if (this.viewer) {\r\n                this.viewer.hide();\r\n            }\r\n        },\r\n        reset: function () {\r\n            if (this.viewer) {\r\n                this.viewer.hide();\r\n            }\r\n        },\r\n        setLock: function (lock) {\r\n            this.options.lock = lock;\r\n            //if (lock) {\r\n            //    this.__Q('.qp-media-disable').show();\r\n            //} else {\r\n            //    this.__Q('.qp-media-disable').hide();\r\n            //}\r\n        }\r\n    });\r\n\r\n\r\n    function ImagePlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //插件缓存\r\n            if (!data) {\r\n                data = ImagePlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // __Q.fn('imgplayer', ImagePlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n(function (window, __Q) {\r\n\r\n    var DEFAULTS = {\r\n        onEnd: false,\r\n        onPause: false,\r\n        onPlay: false,\r\n        onSeek: false,\r\n        onVolumeChange: false,\r\n        onTimeUpdate: false,\r\n        onlyRender: false,\r\n        autoAdaptSize: false,//自适应\r\n        renderUI: true,\r\n        lang: 'zh',\r\n        video: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            supportFullscreen: true,//是否支持全屏\r\n            showPlayBtnInVideo: false,//显示中间的播放按钮\r\n            showFullscreenBtn: false//是否显示全屏按钮\r\n        }\r\n    };\r\n\r\n    var VideoPlayer = __Q.Controller.MediaPlayer.extend({\r\n        create: function ($container, options) {\r\n            var that = __Q.Controller.MediaPlayer.create.apply(this, [$container, __Q.extend({}, DEFAULTS, options), 'video']);\r\n            that.options = __Q.extend({}, DEFAULTS, options);\r\n\r\n            if (that.options.renderUI) {\r\n                var funcs = ['_mediaBoxToggle', '_volumeToggleEventHandler', '_pauseEventHandler', '_unBind', '_toFullScreen', '_touchControlToggle', '_playTriggerHandler', '_endedHandler', '_fullScreenChangeHandler', '_playInVideoHanlder', '_fullScreenClickHandler', '_pcControlToggle'];\r\n                that.proxyAll(funcs);\r\n\r\n                that._init();\r\n                if (that.options.onlyRender === false) {\r\n                    that.start();\r\n                }\r\n                that.bind('playTrigger', that._playTriggerHandler);\r\n                that.bind('ended', that._endedHandler);\r\n                that.bind('unBind', that._unBind);\r\n                that.bind('pause', that._pauseEventHandler);\r\n                that.bind('volumeToggle', that._volumeToggleEventHandler);\r\n            }\r\n            return that;\r\n        },\r\n        _pauseEventHandler: function () {\r\n            clearTimeout(this._timeOutId);\r\n            this._$mediaBox.removeClass('qp-media-playing');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n            }\r\n            this.$container.removeClass('qp-media-auto-hide');//移除掉自动隐藏的样式\r\n        },\r\n        _autoHide: function (immediatily) {\r\n            var that = this;\r\n            clearTimeout(that._timeOutId);\r\n            that._timeOutId = setTimeout(function () {\r\n                if (that.isPlaying() || immediatily) {\r\n                    that.$container.addClass('qp-media-auto-hide');\r\n                }\r\n            }, __Q.support.touch ? 5500 : 2000);\r\n        },\r\n        _volumeToggleEventHandler: function (show) {\r\n            if (show) {\r\n                this._$goFullscreen.addClass('qp-bar-cover-index');\r\n            } else {\r\n                this._$goFullscreen.removeClass('qp-bar-cover-index');\r\n            }\r\n        },\r\n        _unBind: function () {\r\n            this._exitFull();\r\n            this.pause();\r\n            this._fullScreenCallBack(false);\r\n        },\r\n        _resizeMap: {\r\n            'qp-media-box-min-width': function (width, height, surportFull) {\r\n                return surportFull ? width <= 160 && width > 120 : false;\r\n            },\r\n            'qp-media-box-min-width-s': function (width, height, surportFull) {\r\n                return surportFull ? width <= 120 : false;\r\n            },\r\n            'qp-media-box-min-height': function (width, height, surportFull) {\r\n                return surportFull ? height <= 180 && height > 125 : false;\r\n            },\r\n            'qp-media-box-min-height-s': function (width, height, surportFull) {\r\n                return surportFull ? height <= 125 : false;\r\n            },\r\n            'qp-media-box-max-hd': function (width, height, surportFull) {\r\n                return width > 360 && height > 270;\r\n            },\r\n            'qp-media-box-not-surpot-full-min': function (width, height, surportFull) {\r\n                if (!surportFull && width < 240 && width >= 200) {\r\n                    return true;\r\n                }\r\n            },\r\n            'qp-media-box-not-surpot-full-min-s': function (width, height, surportFull) {\r\n                if (!surportFull && width < 200) {\r\n                    return true;\r\n                }\r\n            },\r\n            'qp-media-box-max-fullscreen': function () {\r\n                return false;\r\n            }\r\n        },\r\n        _playTriggerHandler: function () {\r\n            //播放后，自动隐藏控制栏\r\n            this._autoHide();\r\n            this._$mediaBox.addClass('qp-media-playing');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n            } else {\r\n\r\n            }\r\n        },\r\n        _endedHandler: function () {\r\n            //移除自动隐藏样式\r\n            clearTimeout(this._timeOutId);\r\n            this._$mediaBox.removeClass('qp-media-playing');\r\n            this.$container.removeClass('qp-media-auto-hide');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n                if (this.options.video.showPlayBtnInVideo) {\r\n                    this._$playInBody.show();\r\n                }\r\n                if (!this.options.video.showFullscreenBtn) {\r\n                    this._$qpIconsVideo.show();\r\n                }\r\n            }\r\n        },\r\n        _init: function () {\r\n            this._fullScreen = false;\r\n            this._createVideo();\r\n            this._$goFullscreen = this.__Q('[data-oper=\"go-fullscreen\"]');\r\n            this._$exitFullscreen = this.__Q('[data-oper=\"exit-fullscreen\"]');\r\n            this._$fullScreenMessage = this.__Q('.qp-meida-tip-message');\r\n            this._$qpIconsVideo = this.__Q('.qp-icons-video');\r\n            this._$qpVideoWrap = this.__Q('.qp-video-videowrap');\r\n            this._$toolbarCover = this.__Q('.qp-media-toolbar-cover');\r\n            if (!this._supportFullScreen() && !this.options.video.showPlayBtnInVideo) {\r\n                this.__Q('.qp-media-box>[data-oper=\"play\"]').hide();\r\n            }\r\n            if (__Q.browser.crosswalk) {\r\n                //解决crosswalk内 视频控制条不显示的问题\r\n                this._$qpVideoWrap.css('zIndex', '-1');\r\n            }\r\n        },\r\n        start: function () {\r\n            var _this = this;\r\n            if (_this.started) {\r\n                return;\r\n            }\r\n            //防止重复绑定\r\n            _this.started = true;\r\n            //公用基类初始化\r\n            this.baseInit();\r\n            //绑定video私有事件\r\n            this._controlEvent(true);\r\n            //绑定全屏事件\r\n            this._fullScreenCallBack(true);\r\n        },\r\n        _createVideo: function () {\r\n            var $video = this.getMediaModel().getQMedia();\r\n\r\n            try {\r\n\r\n                $video.before(__Q.View.videoHtml);\r\n\r\n                this.__Q('.qp-btn-exit-fullscreen').text(__Q.lang.getLangText(this.options.lang, 'media_video_exit_fullscreen'));\r\n                this.__Q('.qp-btn-to-fullscreen').text(__Q.lang.getLangText(this.options.lang, 'media_video_fullscreen'));\r\n                this.__Q('.qp-meida-tip-message').text(__Q.lang.getLangText(this.options.lang, 'media_video_not_support_fullscreen'));\r\n\r\n                //移动video到新建html内部\r\n                this.__Q('[data-oper=\"loading\"] ').before($video.get(0));\r\n                $video.css(\"width\", \"100%\");\r\n                $video.css(\"height\", \"100%\");\r\n\r\n                if (!this._supportFullScreen()) {\r\n                    this.__Q('.qp-media-box').addClass('qp-media-not-support-full');\r\n                }\r\n                if (this.options.video.showFullscreenBtn && this._fullScreenEnabled()) {\r\n                    this.__Q('.qp-media-box').addClass('qp-media-show-fullscreen-btn');\r\n                }\r\n\r\n                if (this.options.autoAdaptSize) {\r\n                    var width = this.options.video.width;\r\n                    var height = this.options.video.height;\r\n                    if (!width && !height) {\r\n                        width = this.getMediaModel().getWidth();\r\n                        height = this.getMediaModel().getHeight();\r\n                    }\r\n                    this.resizeMedia(width, height);\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createVideo unknow error:' + e.message);\r\n            }\r\n        },\r\n        resizeMedia: function (width, height) {\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n            this._$mediaBox.css('width', width + 'px');\r\n            this._$mediaBox.css('height', height + 'px');\r\n            for (var key in this._resizeMap) {\r\n                if (this._resizeMap[key](width, height, this._supportFullScreen())) {\r\n                    this._$mediaBox.addClass(key);\r\n                } else {\r\n                    this._$mediaBox.removeClass(key);\r\n                }\r\n            }\r\n        },\r\n        _pcControlToggle: function (event) {\r\n            var that = this;\r\n            //排除重复的事件\r\n            if (that._lastX === event.pageX && that._lastY === event.pageY) {\r\n                return;\r\n            }\r\n            that._lastX = event.pageX;\r\n            that._lastY = event.pageY;\r\n            //清楚自动隐藏\r\n            clearTimeout(that._timeOutId);\r\n            //支持全屏且非全屏下控制栏不可操作\r\n            if (that._supportFullScreen() && !that._isFullScreen()) {\r\n                return false;\r\n            }\r\n            var toggle = 'show';//默认显示\r\n            switch (event.type) {\r\n                case 'mousemove':\r\n                    toggle = 'show';\r\n                    break;\r\n                case 'mouseout':\r\n                case 'mouseleave':\r\n                    if (__Q.event.checkHover(event, that._$mediaBox.get(0))) {\r\n                        toggle = that.isPlaying() ? 'hide' : 'show';\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n\r\n            //播放中不显示中间的播放按钮，pc 端不显示中间的按钮\r\n            if (toggle === 'show') {\r\n                that.$container.removeClass('qp-media-auto-hide');\r\n            } else {\r\n                that.$container.addClass('qp-media-auto-hide');\r\n            }\r\n\r\n            var autoHide = true;\r\n            //鼠标在控制条上不隐藏\r\n            if (event.type === 'mousemove' || event.type === 'mouseover') {\r\n                if (that._$toolbar.contains(event.srcElement) || event.srcElement === that._$toolbar.get(0)) {\r\n                    autoHide = false;\r\n                }\r\n                //鼠标在全屏按钮上不隐藏\r\n                if (event.srcElement === that._$goFullscreen.get(0)) {\r\n                    autoHide = false;\r\n                }\r\n            }\r\n            //2秒后自动隐藏\r\n            if (autoHide) {\r\n                that._autoHide();\r\n            }\r\n        },\r\n        _touchControlToggle: function (e) {\r\n            if (e && e.srcElement && e.srcElement.className.indexOf('qp-media-toolbar-cover') <= -1) {\r\n                return;\r\n            }\r\n            clearTimeout(this._timeOutId);\r\n\r\n            var that = this;\r\n            //支持全屏且非全屏下控制栏不可操作\r\n            if (that._supportFullScreen() && !that._isFullScreen()) {\r\n                return false;\r\n            }\r\n            var playing = that.isPlaying();\r\n            if (playing) {\r\n                that.$container.toggleClass('qp-media-auto-hide');\r\n            } else {\r\n                this.play();\r\n            }\r\n            this._autoHide();\r\n            //播放中不显示中间的播放按钮，pc 端不显示中间的按钮\r\n        },\r\n        _mediaBoxToggle: function (e) {\r\n            var that = this;\r\n            if (e) {\r\n                __Q.event.stopPropagation(e);\r\n                //e.preventDefault();\r\n            }\r\n            var autoHide = true;\r\n            if (that._$toolbar.contains(e.srcElement) || e.srcElement === that._$toolbar.get(0)) {\r\n                autoHide = false;\r\n            }\r\n            if (autoHide) {\r\n                that._autoHide();\r\n            } else {\r\n                clearTimeout(that._timeOutId);\r\n            }\r\n        },\r\n        _controlEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$exitFullscreen[on]('click', _this._toFullScreen);\r\n            _this._$goFullscreen[on]('click', _this._toFullScreen);\r\n            _this._$playInBody[on]('click', _this._playInVideoHanlder);\r\n\r\n            if (__Q.support.touch) {\r\n                _this._$toolbarCover[on]('click', _this._touchControlToggle);\r\n                _this._$mediaBox[on]('click', _this._mediaBoxToggle);\r\n            } else {\r\n                _this._$mediaBox[on]('mousemove mouseover mouseout', _this._pcControlToggle);\r\n                //点击播放或暂停\r\n                _this._$toolbarCover[on]('click', _this._fullScreenClickHandler);\r\n            }\r\n        },\r\n        _fullScreenClickHandler: function (e) {\r\n            //白板端touch点击视频进行隐藏\r\n            if (e && e.srcElement && e.srcElement.className.indexOf('qp-media-toolbar-cover') <= -1) {\r\n                return;\r\n            }\r\n            //全屏或者不支持全屏\r\n            if ((this._supportFullScreen() && this._isFullScreen()) || !this._supportFullScreen()) {\r\n                this.playPause(e);\r\n            }\r\n        },\r\n        _playInVideoHanlder: function (e) {\r\n            if (this._supportFullScreen() && !this._isFullScreen()) {\r\n                this._toFullScreen();\r\n            } else {\r\n                this.playPause(e);\r\n            }\r\n        },\r\n        _exitFull: function () {\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            } else if (document.webkitCancelFullScreen) {\r\n                document.webkitCancelFullScreen();\r\n            } else if (document.msExitFullscreen) {\r\n                document.msExitFullscreen();\r\n            } else if (document.mozCancelFullScreen) {\r\n                document.mozCancelFullScreen();\r\n            }\r\n\r\n            //兼容iOS端\r\n            var videos = document.getElementsByTagName('video');\r\n            if (videos && videos.length > 0) {\r\n                for (var i = 0; i < videos.length; i++) {\r\n                    var vd = videos[i];\r\n                    if (vd.webkitExitFullscreen) {\r\n                        vd.webkitExitFullscreen();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        _toFullScreen: function (e) {\r\n            if (e) {\r\n                __Q.event.preventDefault(e);\r\n            }\r\n            var _this = this;\r\n            if (!_this._fullScreenEnabled()) {\r\n                //提示不支持全屏播放\r\n                clearTimeout(_this._fullMsgTimeoutId);\r\n                _this._$fullScreenMessage.show();\r\n                _this._fullMsgTimeoutId = setTimeout(function () {\r\n                    _this._$fullScreenMessage.hide();\r\n                }, 3000);\r\n                return;\r\n            }\r\n            var container = _this._$mediaBox.get(0);\r\n            if (this._isFullScreen()) {\r\n                this.pause();\r\n                //https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\r\n                this._exitFull();\r\n            }\r\n            else {\r\n                var rfs = container.requestFullscreen || container.webkitRequestFullscreen || container.mozRequestFullScreen || container.msRequestFullscreen;\r\n                if (typeof rfs != \"undefined\" && rfs) {\r\n                    rfs.call(container);\r\n                } else {\r\n                    __Q.logger.error('Fullscreen API is not supported');\r\n                }\r\n                //播放 Failed to execute 'play' on 'HTMLMediaElement': API can only be initiated by a user gesture.\r\n                this.play();\r\n                //隐藏样式\r\n                this.$container.addClass('qp-media-auto-hide');\r\n                this._$mediaBox.addClass('qp-media-playing');\r\n                clearTimeout(_this._fullTimeOutId);\r\n                _this._fullTimeOutId = setTimeout(function () {\r\n                    if (!_this._fullScreen && !_this._fullScreenChangeEnable) {\r\n                        //_this.options.video.supportFullscreen = false;\r\n                        _this._fullScreenChangeEnable = false;\r\n                        _this._unSurportFullApi();\r\n                    }\r\n                }, __Q.support.isMobile ? 1000 : 250);\r\n            }\r\n        },\r\n        _fullScreenCallBack: function (on) {\r\n            var container = this._$mediaBox.get(0);\r\n            on = on ? 'on' : 'off';\r\n            //__Q(document)[on]('webkitfullscreenerror',function(event){\r\n            //    console.log('change error');\r\n            //});\r\n            if (__Q.browser.webkit) {\r\n                __Q(document)[on]('webkitfullscreenchange', this._fullScreenChangeHandler);\r\n            } else if (__Q.browser.mozilla) {\r\n                __Q(document)[on]('mozfullscreenchange', this._fullScreenChangeHandler);\r\n            } else if (__Q.browser.msie) {\r\n                //https://msdn.microsoft.com/en-us/library/dn265028%28v=vs.85%29.aspx\r\n                if (container.requestFullscreen) {\r\n                    __Q(document)[on]('fullscreenchange', this._fullScreenChangeHandler);\r\n                } else if (container.msRequestFullscreen) {\r\n                    __Q(document)[on]('MSFullscreenChange', this._fullScreenChangeHandler);\r\n                }\r\n            }\r\n        },\r\n        _unSurportFullApi: function () {\r\n            this.__Q('.qp-media-box').addClass('qp-media-not-support-full');\r\n        },\r\n        _fullScreenChangeHandler: function (e) {\r\n            //防止多个视频实例之间互相干扰\r\n            if (__Q.browser.msie) {\r\n                if (e.target.activeElement !== this._$mediaBox.get(0)) {\r\n                    return;\r\n                }\r\n            } else if (e.srcElement !== this._$mediaBox.get(0)) {\r\n                return;\r\n            }\r\n\r\n            //this._fullScreen = !this._fullScreen;\r\n            if (this._isFullScreen()) {\r\n                this._fullScreen = true;\r\n                this._fullScreenChangeEnable = true;\r\n                //播放\r\n                //this.play();\r\n                //缓存旧样式\r\n                this._$mediaBox.attr('original-style', this._$mediaBox.attr('style'));\r\n                this._$mediaBox.attr('style', '');\r\n                this._$mediaBox.attr('original-class', this._$mediaBox.attr('class'));\r\n                this._$mediaBox.attr('class', '');\r\n                //添加全屏样式\r\n                this._$mediaBox.addClass('qp-media-box');\r\n                this._$mediaBox.addClass('qp-media-box-max-fullscreen');\r\n                //显示全屏退出按钮，隐藏播放按钮\r\n                this.$container.addClass('qp-media-fullscreen');\r\n                this.$container.addClass('qp-media-fullscreen-bar-show');\r\n                //隐藏native控件\r\n                __Q.Native.InteractAppApi.setNativeModuleVisibility(false);\r\n\r\n                //全屏回调事件\r\n                if (this.options.onFullScreenChange) {\r\n                    this.options.onFullScreenChange(true);\r\n                } else if (this.options.eventHandler.fullScreenChange) {\r\n                    this.options.eventHandler.fullScreenChange(true);\r\n                }\r\n            } else {\r\n                this._fullScreen = false;\r\n                //暂停\r\n                this.pause();\r\n                //还原旧样式\r\n                this.$container.removeClass('qp-media-fullscreen');\r\n                if (this._$mediaBox.attr('original-style')) {\r\n                    this._$mediaBox.attr('style', this._$mediaBox.attr('original-style'));\r\n                }\r\n                if (this._$mediaBox.attr('original-class')) {\r\n                    this._$mediaBox.attr('class', this._$mediaBox.attr('original-class'));\r\n                }\r\n                //显示播放按钮，隐藏退出全屏按钮\r\n                this.$container.removeClass('qp-media-fullscreen-bar-show');\r\n                //移除自动隐藏样式\r\n                this.$container.removeClass('qp-media-auto-hide');\r\n\r\n                this._$mediaBox.removeClass('qp-media-playing');\r\n\r\n                //还原native控件\r\n                __Q.Native.InteractAppApi.setNativeModuleVisibility(true);\r\n                //隐藏音量控制栏\r\n                this.hideVolumeControl();\r\n                //网络加载慢，loading可能还显示着，手动隐藏\r\n                this._$loading.hide();\r\n\r\n                //全屏回调事件\r\n                if (this.options.onFullScreenChange) {\r\n                    this.options.onFullScreenChange(false);\r\n                } else if (this.options.eventHandler.fullScreenChange) {\r\n                    this.options.eventHandler.fullScreenChange(false);\r\n                }\r\n            }\r\n        },\r\n        _isFullScreen: function () {\r\n            return document.webkitIsFullScreen;\r\n            //return this._fullScreen;\r\n        },\r\n        _fullScreenEnabled: function () {\r\n\r\n            //pptshell不支持全屏\r\n            if (location.search.toLowerCase().indexOf('sys=pptshell') >= 0 && !__Q.support.isMobile) {\r\n                return false;\r\n            }\r\n\r\n            if (this._fullScreenChangeEnable === false) {\r\n                return false;\r\n            }\r\n\r\n            return document.webkitFullscreenEnabled || document.msFullscreenEnabled || document.mozFullScreenEnabled;\r\n        },\r\n        _supportFullScreen: function () {\r\n            return this.options.video.supportFullscreen && this._fullScreenEnabled();\r\n        },\r\n        reset: function () {\r\n            this._exitFull();\r\n            this.pause();\r\n        }\r\n    });\r\n\r\n\r\n    function VideoPlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //插件缓存\r\n            if (!data) {\r\n                data = VideoPlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('videoplayer', VideoPlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/23.\r\n */\r\n__Q.Controller.ImageViewer = (function () {\r\n\r\n    var ImageViewer = __Q.Class.Create();\r\n\r\n    ImageViewer.include({\r\n\r\n        create: function ($container, width, height, src, fullScreenChange) {\r\n            var that = Object.create(this);\r\n            that._imgData = {\r\n                width: width,\r\n                height: height,\r\n                src: src\r\n            };\r\n            that.$container = $container;\r\n            that.proxyAll(['hide', 'stopImgPropagation']);\r\n            that.fullScreenChange = fullScreenChange;\r\n            //that._init();\r\n            return that;\r\n        },\r\n        stopImgPropagation: function (e) {\r\n            __Q.event.preventDefault(e);\r\n            __Q.event.stopPropagation(e);\r\n        },\r\n        show: function () {\r\n            var _this = this;\r\n\r\n            //移除旧代码\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            if ($temp.length > 0) {\r\n                $temp.remove();\r\n            }\r\n\r\n            __Q(document.body).addClass('qp-media-viewer-over-hidden');\r\n\r\n            var $body = __Q(document.body);\r\n            var ele = document.createElement('div');\r\n            __Q(ele).attr('class', 'qp-media-viewer-temp');\r\n            $body.appendChild(ele);\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            $temp.html(__Q.View.viewerHtml);\r\n\r\n\r\n            var $mask = __Q('.qp_media_window_mask');\r\n            var $imgContainer = __Q('.qp-media-viewer-img');\r\n            var $close = __Q('.qp-media-viewer-close');\r\n            var $img = __Q('.qp-media-viewer-img img');\r\n            var $center = __Q('.qp-media-viewer-center');\r\n\r\n            _this._maxHeight = window.innerHeight * 0.8;\r\n            _this._maxWidth = window.innerWidth * 0.8;\r\n            //最多不超过界面的80%\r\n            var rs = __Q.utils.resize(_this._imgData.width, _this._imgData.height, _this._maxWidth, _this._maxHeight);\r\n            //居中\r\n            $imgContainer.css('marginLeft', '-' + rs.w / 2 + 'px');\r\n            $imgContainer.css('marginTop', '-' + rs.h / 2 + 'px');\r\n            $imgContainer.css('width', rs.w + 'px');\r\n            $imgContainer.css('height', rs.h + 'px');\r\n            $img.attr('src', _this._imgData.src);\r\n            $img.attr('width', rs.w);\r\n            $img.attr('height', rs.h);\r\n            $mask.show();\r\n            $center.show();\r\n\r\n            //移除弹出dom\r\n            $close.on('click', _this.hide);\r\n            $mask.on('click', _this.hide);\r\n            $img.on('click', _this.hide);\r\n            //$mask.on('touchstart ', _this.stopImgPropagation);\r\n            //$mask.on(' mousedown', _this.stopImgPropagation);\r\n            //$center.on('touchstart ', _this.stopImgPropagation);\r\n            //$center.on(' mousedown', _this.stopImgPropagation);\r\n\r\n            //隐藏native控件\r\n            __Q.Native.InteractAppApi.setViewerModuleVisibility(false);\r\n            if (_this.fullScreenChange) {\r\n                _this.fullScreenChange(true);\r\n            }\r\n        },\r\n        hide: function (e) {\r\n            if (e) {\r\n                __Q.event.preventDefault(e);\r\n                __Q.event.stopPropagation(e);\r\n            }\r\n            //this.$mask.hide();\r\n            //this.$center.hide();\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            if ($temp.length > 0) {\r\n                $temp.remove();\r\n            }\r\n            __Q(document.body).removeClass('qp-media-viewer-over-hidden');\r\n            //还原native控件\r\n            __Q.Native.InteractAppApi.setViewerModuleVisibility(true);\r\n            if (this.fullScreenChange) {\r\n                this.fullScreenChange(false);\r\n            }\r\n        }\r\n    });\r\n    return ImageViewer;\r\n})();\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n__Q.Model.MediaEvent = (function (window, __Q) {\r\n    var MediaEvent = __Q.Class.Create();\r\n\r\n    MediaEvent.include(Events);\r\n\r\n    MediaEvent.include({\r\n        eventMethod: ['playing', 'pause',  'ended', 'timeupdate', 'seeked', 'volumechange', 'progress', 'waiting',\r\n            'error', 'loadstart', 'loadeddata', 'loadedmetadata', 'stalled', 'suspend', 'play', 'durationchange'],\r\n        create: function (mediaModel, option) {\r\n            var self = Object.create(this);\r\n            self._mediaModel = mediaModel;\r\n            self.options = option;\r\n            self.proxyAll(self.eventMethod);\r\n            self.canBindKey(['playing', 'pause', 'ended', 'timeupdate', 'volumechange', 'progress', 'waiting', 'error', 'loadedmetadata', 'play', 'durationchange']);\r\n            self.mediaEventListener(true);\r\n            return self;\r\n        },\r\n        mediaEventListener: function (on) {\r\n            var _this = this;\r\n            var $media = _this._mediaModel.getQMedia();\r\n            var eventMethod = _this.eventMethod;\r\n            _this.emptied = true;//是否重新load\r\n            for (var i = 0; i < eventMethod.length; i++) {\r\n                $media[on ? 'on' : 'off'](eventMethod[i], '', _this[eventMethod[i]]);\r\n            }\r\n        },\r\n        playing: function () {\r\n            var _this = this;\r\n            _this.trigger('playing');\r\n            _this.emptied = false;\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType()\r\n            };\r\n            if (_this.options._onPlay) {\r\n                _this.options._onPlay(mediaTarget);\r\n            }\r\n            if (_this.options.onPlay) {\r\n                _this.options.onPlay(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.play(mediaTarget);\r\n            }\r\n        },\r\n        pause: function () {\r\n            var _this = this;\r\n            _this.trigger('pause');\r\n\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                ended: !!_this._ended\r\n            };\r\n            if (_this.options.onPause) {\r\n                _this.options.onPause(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.pause(mediaTarget);\r\n            }\r\n            _this._ended = false;\r\n        },\r\n        emptied: function () {\r\n            this.emptied = true;\r\n        },\r\n        ended: function () {\r\n            var _this = this;\r\n            _this._mediaModel.load();\r\n            //解决视频播后，进过隐藏再显示的错作，poster无法渲染出来的bug\r\n            _this._mediaModel.resetPoster();\r\n            _this.trigger('ended');\r\n            //第一次播放完后再次播放黑屏，这边设置初始时间可解决黑屏问题\r\n            //_this.media.currentTime = MediaEndSkipTime;\r\n            var o = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType()\r\n            };\r\n            if (_this.options._onEnd) {\r\n                _this.options._onEnd(o);\r\n            }\r\n            if (_this.options.onEnd) {\r\n                _this.options.onEnd(o);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.ended(o);\r\n            }\r\n            //兼容101ppt上结束后不触发0时间回调问题\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                currentTime:0\r\n            };\r\n            if (_this.options.onTimeUpdate) {\r\n                _this.options.onTimeUpdate(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.timeupdate(mediaTarget);\r\n            }\r\n            _this.playing = false;\r\n        },\r\n        timeupdate: function () {\r\n            var _this = this;\r\n            _this.trigger('timeupdate');\r\n            var currentTime = _this._mediaModel.getCurrentTime();\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                currentTime:currentTime\r\n            };\r\n            if (_this.options.onTimeUpdate) {\r\n                _this.options.onTimeUpdate(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.timeupdate(mediaTarget);\r\n            }\r\n            //第二次播放完后不会触发ended事件，强制触发\r\n            var duration = _this._mediaModel.getDuration();\r\n\r\n            if (duration > 0 && duration <= currentTime && currentTime > 0) {\r\n                _this._ended = true;\r\n            }\r\n        },\r\n        seeked: function () {\r\n            var _this = this;\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                seeked: _this._mediaModel.getCurrentTime(),\r\n                ended: false\r\n            };\r\n            if (_this.options.onSeek) {\r\n                _this.options.onSeek(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.seeked(mediaTarget);\r\n            }\r\n        },\r\n        volumechange: function () {\r\n            var _this = this;\r\n            _this.trigger('volumechange');\r\n            _this.volumeChangeEvent(true);\r\n        },\r\n        progress: function () {\r\n            this.trigger('progress');\r\n        },\r\n        waiting: function () {\r\n            this.trigger('waiting');\r\n        },\r\n        error: function () {\r\n            var code = (this._mediaModel.getError() ? this._mediaModel.getError().code : '');\r\n            __Q.logger.debug(\"media error code ：\" + code);\r\n            this.trigger('error', code);\r\n            // code == 4 网络不支持或者src地址异常时触发\r\n            //if (code === 3) {//解码失败或者格式不支持\r\n                //暂时注释，出现音频ND2可以播放但是出现error并code=3\r\n                //if (_this.controlEvent) {\r\n                //_this.controlEvent('off');\r\n                //}\r\n            //}\r\n        },\r\n        loadstart: function () {\r\n            __Q.logger.debug('loadstart');\r\n        },\r\n        loadeddata: function () {\r\n            __Q.logger.debug('loadeddata');\r\n        },\r\n        loadedmetadata: function () {\r\n            __Q.logger.debug('loadedmetadata');\r\n            this.trigger('loadedmetadata');\r\n        },\r\n        stalled: function () {\r\n            __Q.logger.debug('stalled');\r\n        },\r\n        suspend: function () {\r\n            __Q.logger.debug('suspend');\r\n        },\r\n        play: function () {\r\n            __Q.logger.debug('play');\r\n            var _this = this;\r\n            _this.trigger('play');\r\n            if (_this.options.mutuallyExclusive) {\r\n                _this.options.eventHandler.mutuallyExclusivePlay({\r\n                    mediaId: _this._mediaModel.getId(),\r\n                    dataId: _this.options.dataId,\r\n                    index: _this.options.index,\r\n                    mediaType: _this._mediaModel.getMediaType()\r\n                });\r\n            }\r\n        },\r\n        durationchange: function () {\r\n            this.trigger('durationchange');\r\n        },\r\n        volumeChangeEvent: function (display, eventTrigger) {\r\n            var muted = this._mediaModel.getMuted();\r\n            var volume = (muted ? 0 : this._mediaModel.getVolume());\r\n            if (typeof  this.lastVolumeDisplay !== 'undefined' && display === this.lastVolumeDisplay && typeof this.lastVolume !== 'undefined' && !eventTrigger) {\r\n\r\n                //和上次一样或者改动小于0.01则不发送消息\r\n                if ((volume === this.lastVolume || (volume !== 0 && Math.abs(this.lastVolume - volume) < 0.01) )) {\r\n                    return;\r\n                }\r\n\r\n                //控制条移动中，每隔25%发送消息\r\n                if (typeof this.volumeUp !== 'undefined' && !this.volumeUp && Math.abs(this.lastVolume - volume) < 0.25) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.volumeUp = false;\r\n            this.lastVolumeDisplay = display;\r\n            this.lastVolume = (muted ? 0 : this._mediaModel.getVolume());\r\n\r\n            var mediaTarget = {\r\n                mediaId: this._mediaModel.getId(),\r\n                index: this.options.index,\r\n                mediaType: this._mediaModel.getMediaType(),\r\n                volume: muted ? 0 : this._mediaModel.getVolume(),\r\n                display: display\r\n            };\r\n            if (this.options.onVolumeChange) {\r\n                this.options.onVolumeChange(mediaTarget);\r\n            } else if (this.options.eventHandler) {\r\n                this.options.eventHandler.volumeChange(mediaTarget);\r\n            }\r\n        }\r\n    });\r\n\r\n    return MediaEvent;\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/12.\r\n */\r\n__Q.Model.MediaModel = (function (window, __Q) {\r\n\r\n    var MediaModel = __Q.Class.Create();\r\n\r\n    MediaModel.include({\r\n        create: function ($media) {\r\n            var self = Object.create(this);\r\n            self.media = $media.get(0);\r\n            self.$media = $media;\r\n            self.poster = $media.attr('poster');\r\n            self.id = $media.attr('id');\r\n            self.mediaType = self.media.tagName.toLowerCase();\r\n            return self;\r\n        },\r\n        load: function () {\r\n            this.media.load();\r\n        },\r\n        setPreLoad: function (preLoad) {\r\n            this.$media.attr('preload', preLoad);\r\n        },\r\n        getWidth: function () {\r\n            var attrWidth = this.$media.attr('width');\r\n            var cssWidth = this.$media.css('width');\r\n            return parseInt(cssWidth.indexOf('%') > 0 ? attrWidth : (attrWidth || attrWidth )) || 0;\r\n        },\r\n        getHeight: function () {\r\n            var attrHeight = this.$media.attr('height');\r\n            var cssHeight = this.$media.css('height');\r\n            return parseInt(cssHeight.indexOf('%') > 0 ? attrHeight : (attrHeight || attrHeight )) || 0;\r\n        },\r\n        getMediaType: function () {\r\n            return this.mediaType;\r\n        },\r\n        getMedia: function () {\r\n            return this.media;\r\n        },\r\n        getQMedia: function () {\r\n            return this.$media;\r\n        },\r\n        getId: function () {\r\n            return this.id;\r\n        },\r\n        getPoster: function () {\r\n            return this.poster;\r\n        },\r\n        isPlaying: function () {\r\n            return !this.media.paused;\r\n        },\r\n        //重置poster，解决视频播后，进过隐藏再显示的错作，poster无法渲染出来的bug\r\n        resetPoster: function () {\r\n            if (this.poster) {\r\n                this.$media.attr('poster', this.poster);\r\n            }\r\n        },\r\n        getDuration: function () {\r\n            //media.duration=NaN问题修复\r\n            if (isNaN(this.media.duration)) {\r\n                return 0;\r\n            }\r\n            if (this.media.duration < 0) {\r\n                return 0;\r\n            }\r\n            return this.media.duration;\r\n        },\r\n        getCurrentTime: function () {\r\n            return this.media.currentTime;\r\n        },\r\n        setCurrentTime: function (currentTime) {\r\n            this.media.currentTime = currentTime;\r\n        },\r\n        getVolume: function () {\r\n            return this.media.volume;\r\n        },\r\n        setVolume: function (volume) {\r\n            this.media.volume = volume;\r\n        },\r\n        getBuffered: function () {\r\n            return this.media.buffered;\r\n        },\r\n        getMuted: function () {\r\n            return this.media.muted;\r\n        },\r\n        setMuted: function (muted) {\r\n            this.media.muted = muted;\r\n        },\r\n        getReadyState: function () {\r\n            return this.media.readyState;\r\n        },\r\n        getError: function () {\r\n            return this.media.error;\r\n        }\r\n    });\r\n\r\n    return MediaModel;\r\n})(window, __Q);\n__Q.View.audioHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div data-oper=\"media-box\" class=\"qp-media-box qp-media-box-audio\">');\r\narr.push('    <!-- 播放中下面的qp-btn-icon-play添加类名qp-btn-stop -->');\r\narr.push('    <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-sound\"></span>');\r\narr.push('    <!--<div class=\"qp-media-audio-bg\">音频背景</div>-->');\r\narr.push('    <!--放置loading地方-->');\r\narr.push('    <div class=\"qp-video-videowrap qp-media-audio-bg\">');\r\narr.push('        <div data-oper=\"loading\" class=\"qp-video-loading\">loading..</div>');\r\narr.push('    </div>');\r\narr.push('    <!--/放置loading地方-->');\r\narr.push('');\r\narr.push('    <!--媒体时常超过一小时的qp-media-toolbar添加类名qp-progress-long-->');\r\narr.push('    <div data-oper=\"toolbar\" class=\"qp-media-toolbar\">');\r\narr.push('        <!--全屏的视频才显示的播放按钮 暂停添加类名qp-btn-stop-->');\r\narr.push('        <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('        <!--进度条-->');\r\narr.push('        <div data-oper=\"progress\" class=\"qp-media-progress-outer\">');\r\narr.push('            <div class=\"qp-media-progress\">');\r\narr.push('                <div data-oper=\"downed-bar\" class=\"qp-media-downed\" style=\"width: 0%;\"></div>');\r\narr.push('                <div data-oper=\"played-bar\" class=\"qp-media-played\" style=\"width: 0%;\"></div>');\r\narr.push('            </div>');\r\narr.push('        </div>');\r\narr.push('        <!--/进度条-->');\r\narr.push('        <!--媒体时间-->                                                                                                           ');\r\narr.push('        <span class=\"qp-time-base\">');\r\narr.push('             <em data-oper=\"curentTime\" class=\"qp-curent-time\">0:00</em>/<em data-oper=\"endTime\" class=\"qp-end-time\">0:00</em>');\r\narr.push('        </span>');\r\narr.push('        <!--/媒体时间-->');\r\narr.push('        <!--音量-->');\r\narr.push('        <div data-oper=\"volume-icon-container\" class=\"qp-media-volume\">');\r\narr.push('            <!--静音添加类名qp-btn-volume-no-->');\r\narr.push('            <span data-oper=\"volume-icon\" class=\"qp-btn-volume\"></span>');\r\narr.push('');\r\narr.push('            <div data-oper=\"volume-control\" class=\"qp-media-progress-box\" style=\"display:none\">');\r\narr.push('                <div data-oper=\"volume-bar-container\" class=\"qp-media-progress\">');\r\narr.push('                    <div data-oper=\"volume-bar-s\" class=\"qp-media-progress-s\" style=\"height: 0%;\"></div>');\r\narr.push('                    <div data-oper=\"volume-bar-r\" class=\"qp-media-progress-r\" style=\"bottom: 0%;\"></div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('        </div>');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-disable\" data-oper=\"media-disable\">');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('</div>                                                                                                                            ');\r\narr.push('');\r\narr.push('');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.imageHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div class=\"qp-media-box qp-media-box-img \">');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-pic\"></span>');\r\narr.push('    <div class=\"qp-meida-tip-message\" style=\"display: none\">');\r\narr.push('        图片还在加载中');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-pics-bg\"></div>');\r\narr.push('    <div class=\"qp-media-toolbar\">');\r\narr.push('        点击查看图片');\r\narr.push('    </div>');\r\narr.push('');\r\narr.push('</div>');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.videoHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div data-oper=\"media-box\" class=\"qp-media-box qp-media-box-video\">');\r\narr.push('    <!-- 播放中下面的qp-btn-icon-play添加类名qp-btn-stop -->');\r\narr.push('    <span data-oper=\"play\" class=\"qp-btn-icon-play \"></span>');\r\narr.push('    <span data-oper=\"exit-fullscreen\" class=\"qp-btn-exit-fullscreen\">退出全屏</span>');\r\narr.push('    <span data-oper=\"go-fullscreen\" class=\"qp-btn-to-fullscreen\">全屏</span>');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-video\"></span>');\r\narr.push('');\r\narr.push('    <!--放置视频的地方-->');\r\narr.push('    <div class=\"qp-video-videowrap\">');\r\narr.push('        <div data-oper=\"loading\" class=\"qp-video-loading\">loading..</div>');\r\narr.push('    </div>');\r\narr.push('    <!--/放置视频的地方-->');\r\narr.push('    <div class=\"qp-meida-tip-message\" style=\"display: none\">');\r\narr.push('        不支持全屏播放');\r\narr.push('    </div>');\r\narr.push('');\r\narr.push('    <!--媒体时常超过一小时的qp-media-toolbar添加类名qp-progress-long-->');\r\narr.push('    <div data-oper=\"toolbar-cover\" class=\"qp-media-toolbar-cover\">');\r\narr.push('        <div data-oper=\"toolbar\" class=\"qp-media-toolbar\">');\r\narr.push('            <!--全屏的视频才显示的播放按钮 暂停添加类名qp-btn-stop-->');\r\narr.push('            <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('            <!--进度条-->');\r\narr.push('            <div data-oper=\"progress\" class=\"qp-media-progress-outer\">');\r\narr.push('                <div class=\"qp-media-progress\">');\r\narr.push('                    <div data-oper=\"downed-bar\" class=\"qp-media-downed\" style=\"width: 0%;\"></div>');\r\narr.push('                    <div data-oper=\"played-bar\" class=\"qp-media-played\" style=\"width: 0%;\"></div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('            <!--/进度条-->');\r\narr.push('            <!--媒体时间-->');\r\narr.push('        <span class=\"qp-time-base\">');\r\narr.push('             <em data-oper=\"curentTime\" class=\"qp-curent-time\">0:00</em>/<em data-oper=\"endTime\" class=\"qp-end-time\">0:00</em>');\r\narr.push('        </span>');\r\narr.push('            <!--/媒体时间-->');\r\narr.push('            <!--音量-->');\r\narr.push('            <div data-oper=\"volume-icon-container\" class=\"qp-media-volume\">');\r\narr.push('                <!--静音添加类名qp-btn-volume-no-->');\r\narr.push('                <span data-oper=\"volume-icon\" class=\"qp-btn-volume \"></span>');\r\narr.push('');\r\narr.push('                <div data-oper=\"volume-control\" class=\"qp-media-progress-box\" style=\"display:none\">');\r\narr.push('                    <div data-oper=\"volume-bar-container\" class=\"qp-media-progress\">');\r\narr.push('                        <div data-oper=\"volume-bar-s\" class=\"qp-media-progress-s\" style=\"height: 0%;\"></div>');\r\narr.push('                        <div data-oper=\"volume-bar-r\" class=\"qp-media-progress-r\" style=\"bottom: 0%;\"></div>');\r\narr.push('                    </div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('');\r\narr.push('        </div>');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-disable\" data-oper=\"media-disable\">');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('</div>');\r\narr.push('');\r\narr.push('');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.viewerHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div class=\"qp_media_window_mask\" style=\"display: none\"></div>');\r\narr.push('<div class=\"qp-media-viewer-center\" style=\"display: none\">');\r\narr.push('    <div class=\"qp-media-viewer-img\">');\r\narr.push('        <div class=\"qp-media-viewer-close\"></div>');\r\narr.push('        <img />');\r\narr.push('    </div>');\r\narr.push('</div>');\r\nreturn arr.join('');\r\n})(window, __Q);\nvar imageviewer = (function () {\n'use strict';\n\nvar methods = ['assets', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error', 'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log', 'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd', 'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'];\n\nvar LEVEL = {\n    DEBUG: 'debug',\n    INFO: 'info',\n    WARN: 'warn',\n    ERROR: 'error',\n    DEBUG_VALUE: 3,\n    INFO_VALUE: 2,\n    WARN_VALUE: 1,\n    ERROR_VALUE: 0,\n    UNKNOWN: -1\n};\n\nvar console = window.console || {};\n\nvar length = methods.length;\n\nwhile (length--) {\n    var method = methods[length];\n    if (!console[method]) {\n        console[method] = function () {};\n    }\n}\n\nvar Logger = {\n\n    $level: 0,\n    setLevel: function setLevel(level) {\n        switch (level) {\n            case LEVEL.DEBUG:\n                this.$level = LEVEL.DEBUG_VALUE;\n                break;\n            case LEVEL.INFO:\n                this.$level = LEVEL.INFO_VALUE;\n                break;\n            case LEVEL.WARN:\n                this.$level = LEVEL.WARN_VALUE;\n                break;\n            case LEVEL.ERROR:\n                this.$level = LEVEL.ERROR_VALUEl;\n                break;\n            default:\n                this.$level = LEVEL.UNKNOWN;\n        }\n    },\n    debug: function debug() {\n        if (this.$level >= LEVEL.DEBUG_VALUE) {\n            console.log.apply(console, arguments);\n        }\n    },\n    info: function info() {\n        if (this.$level >= LEVEL.INFO_VALUE) {\n            console.log.apply(console, arguments);\n        }\n    },\n    warn: function warn() {\n        if (this.$level >= LEVEL.WARN_VALUE) {\n            console.log.apply(console, arguments);\n        }\n    },\n    error: function error() {\n        if (this.$level >= LEVEL.ERROR_VALUE) {\n            console.log.apply(console, arguments);\n        }\n    }\n};\n\nvar DEFAULT = {\n    src: '', //地址，支持字符串\n    modal: true, //弹窗是否可以模态\n    lock: false, // 锁定窗口 \n    env: '', //环境 当前只有pc 和mobile 两种 所以暂时没有使用\n    minWidth: 50,\n    minHeight: 50,\n    maxWidth: 256,\n    maxHeight: 176,\n    lang: 'zh', //语言,\n    inline: false, //支持ckeditor使用span来做包装标签\n    defaultSrc: '', //加载失败默认图片,\n    style: '', //支持容器样式修改，\n    eventAll: true //是否支持整 个容器监听事件\n};\n\nvar Template = {\n    view: '<div class=\"ndui-insert-pictures\" style=\"width: 256px; height: 176px\"> ' + '<div class=\"insert-pictures__wrap\">' + '<span class=\"insert-pictures__zoom\"></span>' + '<span class=\"insert-pictures__loading\"></span>' + '<div>' + '</div>',\n    view2: '<span class=\"ndui-insert-pictures\" style=\"width: 256px; height: 176px\"> ' + '<span class=\"insert-pictures__wrap\">' + '<span class=\"insert-pictures__zoom\"></span>' + '<span class=\"insert-pictures__loading\"></span>' + '</span>' + '</span>',\n    popwindow: '<div class=\"ndui-pop-insert-pictures\">' + '<div class=\"pop-insert-pictures__head\">' + '<span class=\"head__oper head__close\"></span>' + '<span class=\"head__oper head__full\"></span>' + ' </div>' + '<div class=\"pop-insert-pictures__body\">' + ' <img src=\"\" alt=\"\" >' + '<span class=\"pic__oper oper--left\" style=\"display:none\"></span>' + '<span class=\"pic__oper oper--right\" style=\"display:none\"></span>' + '</div>' + '<span class=\"insert-pictures__loading\"></span>' + '</div>',\n    mask: '<div class=\"ndui-pop-insert-pictures-mask\"></div>',\n    mobilefull: '<div class=\"ndui-pop-insert-pictures-pad\">' + '<div class=\"pop-insert-pictures__body\">' + '<img src=\"\" alt=\"\">' + ' </div>' + '<span class=\"insert-pictures__loading\"></span>' + '</div>'\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar REGEXP_SPACES = /\\s+/;\nvar REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\nvar REGEXP_TRIM = /^\\s+(.*)\\s+$/;\n\n// Utilities\nvar objectProto = Object.prototype;\nvar toString = objectProto.toString;\nfunction typeOf(obj) {\n  return toString.call(obj).slice(8, -1).toLowerCase();\n}\n\nfunction isString(str) {\n  return typeof str === 'string';\n}\n\nfunction isNumber(num) {\n  return typeof num === 'number' && !isNaN(num);\n}\n\n\n\nfunction isObject(obj) {\n  return (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) === 'object' && obj !== null;\n}\n\n\n\nfunction isFunction(fn) {\n  return typeOf(fn) === 'function';\n}\n\nfunction isArray(arr) {\n  return Array.isArray ? Array.isArray(arr) : typeOf(arr) === 'array';\n}\n\n\n\n\n\nfunction trim(str) {\n  if (isString(str)) {\n    str = str.trim ? str.trim() : str.replace(REGEXP_TRIM, '1');\n  }\n\n  return str;\n}\n\nfunction each(obj, callback) {\n  if (obj && isFunction(callback)) {\n    var i = void 0;\n\n    if (isArray(obj) || isNumber(obj.length) /* array-like */) {\n        var length = obj.length;\n\n        for (i = 0; i < length; i++) {\n          if (callback.call(obj, obj[i], i, obj) === false) {\n            break;\n          }\n        }\n      } else if (isObject(obj)) {\n      Object.keys(obj).forEach(function (key) {\n        callback.call(obj, obj[key], key, obj);\n      });\n    }\n  }\n\n  return obj;\n}\n\nfunction extend(obj) {\n  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isObject(obj) && args.length > 0) {\n    if (Object.assign) {\n      return Object.assign.apply(Object, [obj].concat(args));\n    }\n\n    args.forEach(function (arg) {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach(function (key) {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n}\n\nfunction proxy(fn, context) {\n  for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    args[_key2 - 2] = arguments[_key2];\n  }\n\n  return function () {\n    for (var _len3 = arguments.length, args2 = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args2[_key3] = arguments[_key3];\n    }\n\n    return fn.apply(context, args.concat(args2));\n  };\n}\n\nfunction setStyle(element, styles) {\n  var style = element.style;\n\n  each(styles, function (value, property) {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n\n\nfunction hasClass(element, value) {\n  return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n}\n\nfunction addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    each(element, function (elem) {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  var className = trim(element.className);\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = className + ' ' + value;\n  }\n}\n\nfunction removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    each(element, function (elem) {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n\n\n\n\n\n\n\n\n\n\nfunction removeListener(element, type, handler) {\n  var types = trim(type).split(REGEXP_SPACES);\n\n  if (types.length > 1) {\n    each(types, function (t) {\n      removeListener(element, t, handler);\n    });\n    return;\n  }\n\n  if (element.removeEventListener) {\n    element.removeEventListener(type, handler, false);\n  } else if (element.detachEvent) {\n    element.detachEvent('on' + type, handler);\n  }\n}\n\nfunction addListener(element, type, _handler, once) {\n  var types = trim(type).split(REGEXP_SPACES);\n  var originalHandler = _handler;\n\n  if (types.length > 1) {\n    each(types, function (t) {\n      addListener(element, t, _handler);\n    });\n    return;\n  }\n\n  if (once) {\n    _handler = function handler() {\n      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      removeListener(element, type, _handler);\n\n      return originalHandler.apply(element, args);\n    };\n  }\n\n  if (element.addEventListener) {\n    element.addEventListener(type, _handler, false);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + type, _handler);\n  }\n}\n\n\n\nfunction getEvent(event) {\n  var e = event || window.event;\n\n  // Fix target property (IE8)\n  if (!e.target) {\n    e.target = e.srcElement || document;\n  }\n\n  if (!isNumber(e.pageX) && isNumber(e.clientX)) {\n    var eventDoc = event.target.ownerDocument || document;\n    var doc = eventDoc.documentElement;\n    var body = eventDoc.body;\n\n    e.pageX = e.clientX + ((doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0));\n    e.pageY = e.clientY + ((doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0));\n  }\n\n  return e;\n}\n\nfunction getOffset(element) {\n  var doc = document.documentElement;\n  var box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + ((window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0)),\n    top: box.top + ((window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0))\n  };\n}\n\n\n\nfunction getByClass(element, className) {\n  return element.getElementsByClassName ? element.getElementsByClassName(className) : element.querySelectorAll('.' + className);\n}\n\n\n\n\n\n\n\n\n\n\n\n// Force reflow to enable CSS3 transition\n\n\n// e.g.: http://domain.com/path/to/picture.jpg?size=1280×960 -> picture.jpg\n\n\n\n\n\n\n\n\n\n\n\n\nfunction createDom(str) {\n  if (typeOf(str) === 'string') {\n    var dom = document && document.createElement('div');\n    dom.innerHTML = str;\n    return dom.firstChild;\n  }\n  return str;\n}\n\nfunction contains(root, el) {\n  if (root.compareDocumentPosition) return root === el || !!(root.compareDocumentPosition(el) & 16);\n  if (root.contains && el.nodeType === 1) {\n    return root.contains(el) && root !== el;\n  }\n  while (el = el.parentNode) {\n    if (el === root) return true;\n  }return false;\n}\n\nfunction getPosOfEvent(ev) {\n  ev = ev.originalEvent ? ev.originalEvent : ev;\n  if (ev.type && isTouch(ev.type)) {\n    var posi = [];\n    var src = null;\n    var eventList = void 0;\n    if (ev.touches.length > 0) {\n      eventList = ev.touches;\n    } else {\n      eventList = ev.changedTouches;\n    }\n\n    for (var t = 0, len = eventList.length; t < len; t++) {\n      src = eventList[t];\n      posi.push({\n        x: src.pageX,\n        y: src.pageY\n      });\n    }\n    return posi;\n  } else {\n    return [{\n      x: ev.pageX,\n      y: ev.pageY\n    }];\n  }\n}\n\nfunction isMobile() {\n  return window.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);\n}\n\nfunction getRandomId(name) {\n  return name + (Math.random() * 10 + new Date() * 1).toString().replace('.', '');\n}\n\nfunction isTouch(type) {\n  return (/^(touchend|touchcancel|touchstart|touchmove)$/.test(type)\n  );\n}\n\nvar _$1 = {\n    IMAGE_MIN_WIDTH: 50,\n    IMAGE_MIN_HEIGHT: 50,\n    IMAGE_MAX_WIDTH: 256,\n    IMAGE_MAX_HEIGHT: 176,\n    SPECIAL_WIDTH: 20,\n    SPECIAL_HEIGHT: 80,\n    VIEWER_MIN_WIDTH: 400,\n    VIEWER_MIN_HEIGHT: 300,\n    TOP_VIEWER: null,\n    IMAGE_INSTANCES: {},\n    clear: function clear(key) {\n        var imageview = this.IMAGE_INSTANCES[key];\n        if (imageview) {\n            imageview.destroy();\n        }\n        this.IMAGE_INSTANCES[key] = null;\n        delete this.IMAGE_INSTANCES[key];\n    },\n    getKeyId: function getKeyId(key) {\n        return key.split('|')[1];\n    }\n};\n\nvar DEFAULT$1 = {\n    src: '', //传入地址，数组或字符串\n    currentIndex: 0, //当前位置的索引\n    modal: true, //是否显示模态窗口，背景不可操作\n    lock: false, //是否锁定，事件无法执行\n    width: 400, //限定宽度，暂时不使用\n    height: 300, // 同宽度\n    maxRatio: 10, //最大放大限定 暂时没有用\n    swip: false, // 是否可以左右切换\n    lang: 'zh', //语言,\n    defaultSrc: '' //加载失败时候的默认图片\n};\n\n/**\r\n * Created by ylf on 2017/2/4.\r\n * 常用方法\r\n */\n\nvar utils = {};\n\nutils.getDistance = function (pos1, pos2) {\n    var x = pos2.x - pos1.x,\n        y = pos2.y - pos1.y;\n    return Math.sqrt(x * x + y * y);\n};\n\nutils.getFingers = function (ev) {\n    return ev.touches ? ev.touches.length : 1;\n};\n\nutils.calScale = function (pstart, pmove, intensity) {\n    if (pstart.length >= 2 && pmove.length >= 2) {\n        var disStart = this.getDistance(pstart[1], pstart[0]),\n            disEnd = this.getDistance(pmove[1], pmove[0]),\n            scale = (disEnd - disStart) * intensity;\n        return (disEnd - scale) / disStart;\n    }\n    return 1;\n};\n\nutils.getPosOfEvent = function (ev) {\n    if (this.isTouch(ev.type)) {\n        var posi = [];\n        var src = null;\n        var eventList = void 0;\n        if (ev.touches.length > 0) {\n            eventList = ev.touches;\n        } else {\n            eventList = ev.changedTouches;\n        }\n\n        for (var t = 0, len = eventList.length; t < len; t++) {\n            src = eventList[t];\n            posi.push({\n                x: src.pageX,\n                y: src.pageY\n            });\n        }\n        return posi;\n    } else {\n        return [{\n            x: ev.pageX,\n            y: ev.pageY\n        }];\n    }\n};\n\nutils.isDown = function (type) {\n    return type === 'touchstart' || type === 'mousedown';\n};\nutils.isUp = function (type) {\n    return (/^(touchend|touchcancel|mouseup|mouseleave|mouseout)$/.test(type)\n    );\n};\nutils.isMove = function (type) {\n    return type === 'mousemove' || type === 'touchmove';\n};\nutils.isTouch = function (type) {\n    return (/^(touchend|touchcancel|touchstart|touchmove)$/.test(type)\n    );\n};\n\nutils.isTouchEnd = function (ev) {\n    return ev.type === 'touchend' || ev.type === 'touchcancel';\n};\n\nutils.isTouchMove = function (ev) {\n    return ev.type === 'touchmove';\n};\n\nutils.proxy = function (fuc, context) {\n    return function () {\n        var args = Array.prototype.slice.call(arguments, 0);\n        fuc.apply(context, args);\n    };\n};\n\nutils.isMobile = window.navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i);\n\nutils.hasTouch = 'ontouchend' in window;\n\nutils.extend = function (obj, obj2) {\n    for (var key in obj2) {\n        if (obj2.hasOwnProperty(key)) {\n            obj[key] = obj2[key];\n        }\n    }\n    return obj;\n};\n\nutils.getUuid = function () {\n    var s = [],\n        hexDigits = '0123456789abcdef',\n        uuid;\n\n    for (var i = 0; i < 36; i++) {\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n    }\n\n    s[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\n    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n    s[8] = s[13] = s[18] = s[23] = '-';\n\n    uuid = s.join('');\n    return uuid;\n};\n\nvar Config = {\n    evtElem: document.body,\n    tap: true,\n    doubleTap: true,\n    drag: true,\n    pinch: true,\n    hold: true,\n    tapMaxDistance: 50,\n    tapTime: 600,\n    holdTime: 1000,\n    doubleTapMaxInterval: 300,\n    doubleTapMaxDistance: 16,\n    pinchIntensity: 0.8,\n    eventPrefix: ''\n};\n\nvar EVENT = {\n    PINCH_START: 'pinchstart',\n    PINCH: 'pinch',\n    PINCH_END: 'pinchend',\n    DRAG_START: 'dragstart',\n    DRAG: 'drag',\n    DRAG_END: 'dragend',\n    HOLD: 'hold',\n    TAP: 'tap',\n    DOUBLE_TAP: 'dbltap',\n    FOCUS: 'focus',\n    BLUR: 'blur'\n};\n\n/**\r\n * 底层事件绑定\r\n *\r\n **/\n\nvar Engine = {\n    trigger: function trigger(el, evt, detail) {\n        var e = void 0,\n            opt = {\n            bubbles: true,\n            cancelable: true,\n            detail: detail || {}\n        };\n\n        if (typeof CustomEvent !== 'undefined') {\n            e = new CustomEvent(evt, opt);\n            el.dispatchEvent(e);\n        } else {\n            e = document.createEvent('CustomEvent');\n            e.initCustomEvent(evt, true, true, detail);\n            el.dispatchEvent(e);\n        }\n    },\n    bind: function bind(el, evt, handler) {\n        //let that = this\n        var proxy = function proxy(e) {\n            //兼容处理，click这些原生事件\n            e.originalEvent = e;\n\n            for (var key in e.detail) {\n                if (e.detail.hasOwnProperty(key) && key !== 'type') {\n                    e[key] = e.detail[key];\n                }\n            }\n\n            var returnVal = handler.call(e.target, e);\n\n            if (typeof returnVal !== 'undefined' && !returnVal) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        };\n\n        handler.proxy = proxy;\n        var evts = evt.match(/\\S+/g);\n        evts.forEach(function (e) {\n            el.addEventListener(e, handler.proxy, false);\n        });\n    },\n    unbind: function unbind(el, evt, handler) {\n        var evts = evt.match(/\\S+/g);\n        evts.forEach(function (e) {\n            el.removeEventListener(e, handler.proxy, false);\n        });\n    },\n    on: function on() {\n        var args = Array.prototype.slice.apply(arguments, [0]),\n            elem = typeof args[0] === 'string' ? document.querySelectorAll(args[0]) : args[0],\n            evt = args[1],\n            handler = args[2];\n\n        this.bind(elem, evt, handler);\n    }\n};\n\nEngine.off = Engine.unbind;\n\n/**\r\n * Created by ylf on 2017/2/4.\r\n */\nvar Core = function () {\n    function Core(config) {\n        classCallCheck(this, Core);\n\n        this.uuid = utils.getUuid();\n        this._config = utils.extend(Object.create(Config), config);\n        this._downStart = false;\n        this._pinchStart = false;\n        this._dragStart = false;\n        this._tap = false;\n        this._startTime = 0;\n        this._startPos = null;\n        this._movePos = null;\n        this._endPos = null;\n        this._lastTarget = null;\n        this._dragElem = null;\n        this._holdTimer = 0;\n\n        this.bindEvent();\n    }\n\n    createClass(Core, [{\n        key: 'getConfig',\n        value: function getConfig() {\n            return this._config;\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this._downStart = false;\n            this._pinchStart = false;\n            this._dragStart = false;\n            this._tap = false;\n            this._startTime = 0;\n            this._startPos = null;\n            this._movePos = null;\n            this._endPos = null;\n            this._dragElem = null;\n            clearTimeout(this._holdTimer);\n            this._holdTimer = 0;\n        }\n    }, {\n        key: 'bindEvent',\n        value: function bindEvent() {\n            var that = this,\n                mouseEvents = ['mouseup', 'mousedown', 'mousemove', 'mouseleave'],\n                touchEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel'],\n                events = mouseEvents,\n                config = that._config;\n\n            if (utils.isMobile) {\n                events = touchEvents;\n            } else if (utils.hasTouch) {\n                events = touchEvents.concat(mouseEvents);\n            }\n\n            that.handler = utils.proxy(that.handler, this);\n            events.forEach(function (evt) {\n                config.evtElem.addEventListener(evt, that.handler, false);\n            });\n        }\n    }, {\n        key: 'downHandler',\n        value: function downHandler(evt, target) {\n            this._downStart = true;\n            if (!this._startPos || this._startPos.length < 2) {\n                this._startPos = utils.getPosOfEvent(evt);\n            }\n            this._startTime = new Date().getTime();\n\n            this.focus(evt);\n            this.hold(evt);\n\n            this._lastTarget = target;\n        }\n    }, {\n        key: 'moveHandler',\n        value: function moveHandler(evt) {\n            this._movePos = utils.getPosOfEvent(evt);\n\n            if (utils.getFingers(evt) >= 2) {\n                this.pinch(evt);\n            } else {\n                this.drag(evt);\n            }\n        }\n    }, {\n        key: 'upHandler',\n        value: function upHandler(evt) {\n            Logger.debug('upHandler');\n            this._endPos = utils.getPosOfEvent(evt);\n\n            if (this._pinchStart) {\n                Logger.debug('deal with upHandler');\n                this.pinch(evt);\n            } else if (this._dragStart) {\n                Logger.debug('deal with drag');\n                this.drag(evt);\n            } else if (this._tap) {\n                Logger.debug('deal with tap');\n                this.tap(evt);\n            }\n\n            this.reset();\n        }\n    }, {\n        key: 'handler',\n        value: function handler(evt) {\n            var type = evt.type,\n                target = evt.target;\n\n            if (utils.isDown(type)) {\n                this.downHandler(evt, target);\n            } else if (utils.isMove(type)) {\n                if (!this._downStart || !this._startPos) {\n                    return;\n                }\n                this.moveHandler(evt);\n            } else if (utils.isUp(type)) {\n                if (!this._downStart) {\n                    return;\n                }\n                if (target == this._lastTarget) {\n                    this._tap = true;\n                    Logger.debug('_tap is true');\n                }\n                this.upHandler(evt);\n            }\n        }\n    }, {\n        key: 'tap',\n        value: function tap(evt) {\n\n            var time = new Date().getTime(),\n                elem = evt.target,\n                config = this._config,\n                subTime = time - this._startTime,\n                distance = utils.getDistance(this._startPos[0], this._endPos[0]);\n            Logger.debug('tap judge'); //\n            if (subTime < config.holdTime && distance <= config.tapMaxDistance && subTime <= config.tapTime) {\n                Logger.debug(' tap start');\n                if (this._startTime - this.__lastTapTime <= config.doubleTapMaxInterval && this.__lastTapPos && utils.getDistance(this.__lastTapPos, this._endPos[0]) <= config.doubleTapMaxDistance && this.__lastTapElem == elem) {\n                    Logger.debug('double tap start');\n                    this.trigger(elem, evt, EVENT.DOUBLE_TAP);\n                    this.__lastTapTime = 0;\n                    this.__lastTapPos = null;\n                    this.__lastTapElem = null;\n                } else {\n                    Logger.debug('tap trigger ');\n                    this.trigger(elem, evt, EVENT.TAP);\n                    this.__lastTapTime = time;\n                    this.__lastTapPos = this._endPos[0];\n                    this.__lastTapElem = elem;\n                }\n            } else {\n                Logger.debug(\"tap hold long time\");\n            }\n        }\n    }, {\n        key: 'drag',\n        value: function drag(evt) {\n            if (!this._startPos) {\n                return;\n            }\n\n            var elem = evt.target;\n\n            if (!this._dragStart) {\n                var startDis = utils.getDistance(this._startPos[0], this._movePos[0]);\n                if (startDis > 1) {\n                    this._dragElem = elem;\n                    this.trigger(elem, evt, EVENT.DRAG_START);\n                    this.trigger(elem, evt, EVENT.DRAG);\n                    this._dragStart = true;\n                }\n            } else {\n                if (utils.isMove(evt.type)) {\n                    this.trigger(this._dragElem, evt, EVENT.DRAG);\n                } else if (utils.isUp(evt.type)) {\n                    this.trigger(this._dragElem, evt, EVENT.DRAG_END);\n                }\n            }\n        }\n    }, {\n        key: 'hold',\n        value: function hold(evt) {\n            var that = this;\n            clearTimeout(this._holdTimer);\n            this._holdTimer = setTimeout(function () {\n                if (!that._startPos) {\n                    return;\n                }\n                var distance = utils.getDistance(that._startPos[0], that._movePos ? that._movePos[0] : that._startPos[0]);\n                if (that._config.tapMaxDistance < distance) {\n                    return;\n                }\n\n                that.trigger(evt.target, evt, EVENT.HOLD, {\n                    type: EVENT.HOLD,\n                    originEvent: evt,\n                    fingersCount: utils.getFingers(evt),\n                    position: that._startPos[0]\n                });\n            }, this._config.holdTime);\n        }\n    }, {\n        key: 'pinch',\n        value: function pinch(evt) {\n            if (!this._downStart) {\n                return;\n            }\n            if (utils.getFingers(evt) < 2 && !utils.isTouchEnd(evt)) {\n                return;\n            }\n\n            var config = this._config,\n                scale = utils.calScale(this._startPos, this._movePos, config.pinchIntensity),\n                fingersCount = utils.getFingers(evt),\n                eventObj = {\n                originEvent: evt,\n                scale: scale,\n                fingersCount: fingersCount\n            };\n\n            if (!this._pinchStart) {\n                this._pinchStart = true;\n                this.trigger(evt.target, evt, EVENT.PINCH_START, eventObj);\n            } else if (utils.isTouchMove(evt)) {\n                this.trigger(evt.target, evt, EVENT.PINCH, eventObj);\n            } else if (utils.isTouchEnd(evt)) {\n                this.trigger(evt.target, evt, EVENT.PINCH_END, eventObj);\n            }\n        }\n    }, {\n        key: 'focus',\n        value: function focus(evt) {\n            var elem = evt.target,\n                lastElem = this._lastTarget;\n\n            if (lastElem !== elem && lastElem) {\n                this.trigger(lastElem, evt, EVENT.BLUR);\n                this.trigger(elem, evt, EVENT.FOCUS);\n            } else if (!lastElem) {\n                this.trigger(elem, evt, EVENT.FOCUS);\n            }\n        }\n    }, {\n        key: 'trigger',\n        value: function trigger(elem, originalEvt, evt, detail) {\n            detail = detail || {\n                originalEvent: originalEvt\n            };\n            var prefix = this._config.eventPrefix;\n            if (prefix) {\n                evt = prefix + evt;\n            }\n            Engine.trigger(elem, evt, detail, this._config.eventPrefix);\n        }\n    }]);\n    return Core;\n}();\n\n/**\r\n *  create by ylf 2017/2/6\r\n */\n\nvar EventApi = function () {\n    function EventApi(config) {\n        classCallCheck(this, EventApi);\n\n        this.core = new Core(config);\n    }\n\n    createClass(EventApi, null, [{\n        key: 'on',\n        value: function on() {\n            var args = Array.prototype.slice.apply(arguments, [0]);\n            //this.core.engine.on.apply(this.core.engine, args)\n            Engine.on.apply(Engine, args);\n        }\n    }, {\n        key: 'off',\n        value: function off() {\n            var args = Array.prototype.slice.apply(arguments, [0]);\n            Engine.off.apply(Engine, args);\n        }\n    }]);\n    return EventApi;\n}();\n\n/**\r\n * this is a event delegate \r\n * created by ccr\r\n */\nvar registerEvents = void 0;\nvar self$1 = void 0; //不使用逶拖的方式来注册事件，否则会造成事件无法回收的问题\n/**\r\n * 全局事件订阅\r\n */\nvar Events = {\n    eventList: {},\n    down: false,\n    key: '',\n    init: function init() {\n        self$1 = this;\n        if (!registerEvents) {\n            registerEvents = new EventApi({\n                evtElem: document.body\n            });\n        }\n        return registerEvents;\n    },\n    bind: function bind() {\n        self$1 = this;\n        EventApi.on(document.body, 'tap dragstart drag dragend pinchstart pinch pinchend', self$1.handler);\n    },\n\n    unbind: function unbind() {\n        self$1 = this;\n        EventApi.off(document.body, 'tap dragstart drag dragend pinchstart pinch pinchend', self$1.handler);\n    },\n    registerEvent: function registerEvent(obj, events) {\n        if (obj == null || events == null) {\n            return;\n        }\n        events = events.split(' ');\n        for (var i = 0, len = events.length; i < len; i++) {\n            var eventName = events[i];\n            if (self$1.eventList[eventName] && self$1.eventList[eventName].indexOf(obj) < 0) {\n                self$1.eventList[eventName].push(obj);\n            } else if (self$1.eventList[eventName] == null || self$1.eventList[eventName].length == 0) {\n                self$1.eventList[eventName] = [obj];\n            }\n        }\n    },\n    unregisterEvent: function unregisterEvent(obj, events) {\n        if (obj == null || events == null) {\n            return;\n        }\n        events = events.split(' ');\n        for (var i = 0, len = events.length; i < len; i++) {\n            var eventName = events[i];\n            var index = self$1.eventList[eventName].indexOf(obj);\n            if (index > -1) {\n                self$1.eventList[eventName].splice(index, 1);\n            }\n        }\n    },\n    handler: function handler(event) {\n        event = getEvent(event);\n        var target = event.target;\n        var objs = self$1.eventList[event.type] || [];\n        for (var i = 0, len = objs.length; i < len; i++) {\n            var obj = objs[i];\n            if (obj.container && contains(obj.container, target)) {\n                obj.$handle(event);\n            }\n        }\n        return;\n    }\n};\n\nvar MobileViewer = function () {\n    function MobileViewer(options) {\n        classCallCheck(this, MobileViewer);\n\n        this.options = extend({}, DEFAULT$1, options);\n        Events.registerEvent(this, 'tap dragstart drag dragend pinchstart pinch pinchend');\n        this.$createHtml();\n        this.$render();\n        this.fullScreenChange = this.options.onFullScreenChange || this.options.eventHandler && this.options.eventHandler.fullScreenChange;\n        var self = this;\n        this.$orientationChange = proxy(self.$orientationChange, self);\n        window.addEventListener(\"onorientationchange\" in window ? \"orientationchange\" : \"resize\", this.$orientationChange, false);\n    }\n\n    createClass(MobileViewer, [{\n        key: '$render',\n        value: function $render() {\n            this.viewerData = {\n                width: 0,\n                height: 0,\n                src: ''\n            };\n            this.viewerData.src = this.options.src;\n            this.fullWidth = document.documentElement.clientWidth;\n            this.fullHeight = document.documentElement.clientHeight;\n            this.cacheLastStatus = {};\n            this.$init();\n            this.close();\n        }\n    }, {\n        key: '$init',\n        value: function $init() {\n            var _this = this;\n\n            var self = this;\n            self.$loadImage(function (w, h) {\n                self.viewerData.width = w;\n                self.viewerData.height = h;\n                _this.$resize();\n                addClass(self.loading, 'hide-dom');\n            });\n            this.viewerImg.src = this.viewerData.src;\n        }\n    }, {\n        key: '$resize',\n        value: function $resize() {\n            //横向\n            var self = this;\n            var _w = self.viewerData.width;\n            var _h = self.viewerData.height;\n            var w = void 0,\n                h = void 0;\n            this.fullWidth = document.documentElement.clientWidth;\n            this.fullHeight = document.documentElement.clientHeight;\n\n            if (_w / _h > this.fullWidth / this.fullHeight && _w > this.fullWidth) {\n                w = this.fullWidth;\n                h = _h * w / _w;\n            } else if (_h > this.fullHeight) {\n                h = this.fullHeight;\n                w = _w * h / _h;\n            } else {\n                h = _h;\n                w = _w;\n            }\n            self.viewerImg.style.width = w + 'px';\n            self.viewerData.width = w;\n            self.viewerData.height = h;\n            var left = void 0,\n                top = void 0;\n            top = (this.fullHeight - h) / 2;\n            left = (this.fullWidth - w) / 2;\n            self.viewerImg.style.top = top + 'px';\n            self.viewerImg.style.left = left + 'px';\n        }\n    }, {\n        key: '$createHtml',\n        value: function $createHtml() {\n            var templateDom = Template.mobilefull;\n            var templateMask = Template.mask;\n            templateDom = createDom(templateDom);\n            this.viewerImg = templateDom.querySelector('img');\n            this.loading = templateDom.querySelector('.insert-pictures__loading');\n            this.container = templateDom;\n            templateMask = createDom(templateMask);\n            this.mask = templateMask;\n            document.body.appendChild(templateMask);\n            document.body.appendChild(templateDom);\n        }\n    }, {\n        key: '$loadImage',\n        value: function $loadImage(callback) {\n            var self = this;\n            var img = new Image();\n            img.src = self.viewerData.src;\n            if (img.complete) {\n                if (callback) {\n                    callback(img.width, img.height);\n                }\n            } else {\n                img.onload = function () {\n                    if (callback) {\n                        callback(img.width, img.height);\n                    }\n                    img.onload = null;\n                };\n                img.onerror = function () {\n                    self.viewerData.src = self.options.defaultSrc;\n                    self.viewerImg.src = self.options.defaultSrc;\n                    img.src = self.options.defaultSrc;\n                    img.onerror = null;\n                };\n            }\n        }\n    }, {\n        key: '$initOffset',\n        value: function $initOffset(p, _w, _h, changeWidth) {\n            var x = p && p.x,\n                y = p && p.y;\n            this.viewerImg.style.width = changeWidth + 'px';\n            var w = this.viewerImg.clientWidth,\n                h = this.viewerImg.clientHeight;\n            var left = this.viewerImg.offsetLeft,\n                top = this.viewerImg.offsetTop;\n            Logger.debug(\"mobile full\", _w, _h, this.fullHeight, this.fullWidth);\n            if (p && w > this.fullWidth && h > this.fullHeight) {\n                Logger.debug(\"mobile viewer finger center scale\");\n                var imgLeft = p.x - (p.x - left) * w / _w;\n                var imgTop = p.y - (p.y - top) * h / _h;\n                imgLeft = imgLeft > 0 ? 0 : imgLeft < this.fullWidth - w ? this.fullWidth - w : imgLeft;\n                imgTop = imgTop > 0 ? 0 : imgTop < this.fullHeight - h ? this.fullHeight - h : imgTop;\n                this.viewerImg.style.left = imgLeft + 'px';\n                this.viewerImg.style.top = imgTop + 'px';\n            } else {\n                Logger.debug(\"mobile viewer center scale\");\n                this.viewerImg.style.left = (this.fullWidth - w) / 2 + 'px';\n                this.viewerImg.style.top = (this.fullHeight - h) / 2 + 'px';\n            }\n        }\n    }, {\n        key: '$handle',\n        value: function $handle(event) {\n            var _this2 = this;\n\n            event = getEvent(event);\n            var target = event.target;\n            var self = this;\n            event ? event.stopPropagation() : window.event.cancelBubble = true;\n            event.preventDefault();\n\n            var originalEvent = event.originalEvent;\n            originalEvent && (originalEvent.stopPropagation ? originalEvent.stopPropagation() : originalEvent.cancelBubble && (originalEvent.cancelBubble = true));\n            originalEvent.preventDefault && originalEvent.preventDefault();\n\n            var point = getPosOfEvent(event);\n\n            var px = point[0].x;\n            var py = point[0].y;\n            switch (event.type) {\n                case 'tap':\n                    Logger.debug('mobile tap');\n                    var time = setTimeout(function () {\n                        self.close();\n                        clearTimeout(time);\n                    }, 10);\n                    break;\n                case 'dragstart':\n                    Logger.debug('mobile dragstart');\n                    if (target == this.viewerImg) {\n                        if (this.viewerImg.clientWidth <= this.fullWidth && this.viewerImg.clientHeight <= this.fullHeight) {\n                            return;\n                        }\n                        this.isDrag = true;\n                        this.wheeling = false;\n                        this.cacheLastStatus = this.cacheLastStatus || {};\n                        this.cacheLastStatus.x = px;\n                        this.cacheLastStatus.y = py;\n                        this.cacheLastStatus.width = this.viewerImg.clientWidth;\n                        this.cacheLastStatus.height = this.viewerImg.clientHeight;\n                    }\n                    break;\n                case 'drag':\n                    if (this.isDrag) {\n                        //Logger.debug('mobile drag');\n                        if (this.wheeling) {\n                            return;\n                        }\n                        this.wheeling = true;\n                        var id = setTimeout(function () {\n                            _this2.wheeling = false;\n                            clearTimeout(id);\n                        }, 60);\n\n                        var w = this.cacheLastStatus.width,\n                            h = this.cacheLastStatus.height;\n\n                        if (w > this.fullWidth) {\n                            var imageLeft = px - this.cacheLastStatus.x + this.viewerImg.offsetLeft;\n                            if (imageLeft <= 0 && imageLeft >= this.fullWidth - w) {\n                                this.viewerImg.style.left = imageLeft + 'px';\n                            }\n                            this.$moveFlag = true;\n                        }\n                        if (h > this.fullHeight) {\n                            var imageTop = py - this.cacheLastStatus.y + this.viewerImg.offsetTop;\n                            if (imageTop <= 0 && imageTop >= this.fullHeight - h) {\n                                this.viewerImg.style.top = imageTop + 'px';\n                            }\n                            this.$moveFlag = true;\n                        }\n                        if (this.$moveFlag) {\n                            this.cacheLastStatus.x = px;\n                            this.cacheLastStatus.y = py;\n                        }\n                    }\n\n                    break;\n                case 'dragend':\n                    this.isDrag = false;\n                    Logger.debug('mobile dragend');\n                    break;\n                case 'pinchstart':\n                    if (target == this.viewerImg) {\n                        this.isPinch = true;\n                        this.wheeling = false;\n                        this.cacheLastStatus = this.cacheLastStatus || {};\n                        this.cacheLastStatus.width = this.viewerImg.clientWidth;\n                        this.cacheLastStatus.height = this.viewerImg.clientHeight;\n                    }\n                    Logger.debug('mobile pinchstart');\n                    break;\n                case 'pinch':\n                    if (this.isPinch) {\n                        if (this.wheeling) {\n                            return;\n                        }\n                        this.wheeling = true;\n                        var _id = setTimeout(function () {\n                            _this2.wheeling = false;\n                            clearTimeout(_id);\n                        }, 60);\n\n                        //Logger.debug('mobile pinch');\n                        var scale = event.scale || 1;\n                        scale = parseInt(scale * 100) / 100;\n                        var _w2 = void 0,\n                            _h2 = void 0,\n                            _w = void 0,\n                            _h = void 0;\n\n                        _w = this.cacheLastStatus.width;\n                        _h = this.cacheLastStatus.height;\n\n                        if (scale > 1) {\n                            scale = scale * 1.5;\n                        } else {\n                            scale = scale * 1 / 1.5;\n                        }\n\n                        // Logger.debug('mobile scale' + scale);\n                        _w2 = parseInt(_w * scale * 100) / 100;\n                        _h2 = parseInt(_h * scale * 100) / 100;\n\n                        // Logger.debug('mobile width' + w);\n                        //Logger.debug('mobile height' + h);\n                        var touchs = event.originEvent && event.originEvent.changedTouches;\n                        var centerPoint = null;\n                        if (touchs && touchs.length > 1) {\n                            var point1 = getOffset(this.viewerImg);\n                            centerPoint = {\n                                x: (touchs[0].clientX + touchs[1].clientX) / 2,\n                                y: (touchs[0].clientY + touchs[1].clientY) / 2\n                            };\n                            var flag = false,\n                                changeWidth = void 0;\n                            if (_w2 >= this.viewerData.width && _h2 >= this.viewerData.height && _w2 <= this.viewerData.width * 20 && _h2 < this.viewerData.height * 20) {\n                                //设置 left top 值\n                                //Logger.debug('mobile offset');\n                                changeWidth = _w2;\n                                flag = true;\n                            } else if (_w2 < this.viewerData.width && _h2 < this.viewerData.height && _w >= this.viewerData.width && _h >= this.viewerData.height && _w <= this.viewerData.width * 20 && _h < this.viewerData.height * 20) {\n                                changeWidth = this.viewerData.width;\n                                //如果缩放时候小于最小值的时候取原大小\n                                flag = true;\n                            } else if (_w2 > _w && _h2 > _h && _w2 > this.viewerData.width * 20 && _h2 > this.viewerData.height * 20) {\n                                //如果放大最大值的时候大于20倍时取最大值\n                                changeWidth = this.viewerData.width * 20;\n                                flag = true;\n                            }\n                            flag && this.$initOffset(centerPoint, _w, _h, changeWidth);\n                        }\n                    }\n                    break;\n                case 'pinchend':\n                    this.isPinch = false;\n                    Logger.debug('mobile pinchend');\n                    break;\n                default:\n                    break;\n            }\n            return false;\n        }\n    }, {\n        key: 'updateSrc',\n        value: function updateSrc() {\n            var arg = arguments;\n            if (arg.length == 0) {\n                return;\n            }\n            if (arg.length == 1) {\n                var arg1 = arg[0];\n                if (isString(arg1)) {\n                    this.viewerData.src = this.options.src = arg1;\n                    this.$init();\n                }\n            }\n        }\n    }, {\n        key: 'open',\n        value: function open() {\n            setStyle(document.body, {\n                \"overflow\": \"hidden\"\n            });\n            this.container && (this.container.style.display = '');\n            this.mask && removeClass(this.mask, 'hide-dom');\n            __Q && __Q.Native.InteractAppApi.setViewerModuleVisibility(false);\n            if (this.fullScreenChange) {\n                this.fullScreenChange(true);\n            }\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            setStyle(document.body, {\n                \"overflow\": \"\"\n            });\n            this.container.style.display = 'none';\n            this.mask && addClass(this.mask, 'hide-dom');\n            __Q && __Q.Native.InteractAppApi.setViewerModuleVisibility(true);\n            if (this.fullScreenChange) {\n                this.fullScreenChange(false);\n            }\n        }\n    }, {\n        key: '$orientationChange',\n        value: function $orientationChange(event) {\n            // 根据event.orientation|screen.orientation.angle等于0|180、90|-90度来判断横竖屏\n            event.preventDefault();\n            event.stopPropagation();\n            Logger.debug('监听到屏幕方向改变');\n            if (window.orientation == 180 || window.orientation == 0) {\n                this.setVertical();\n                Logger.debug('设置为竖屏幕');\n            }\n            if (window.orientation == 90 || window.orientation == -90) {\n                this.setCross();\n                Logger.debug('设置为横屏幕');\n            }\n            if (event.type == 'resize') {\n                this.$resize();\n            }\n        }\n    }, {\n        key: 'setCross',\n        value: function setCross() {\n            this.container && addClass(this.container, 'show__cross');\n            this.$resize();\n        }\n    }, {\n        key: 'setVertical',\n        value: function setVertical() {\n            this.container && removeClass(this.container, 'show__cross');\n            this.$resize();\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            Logger.debug('销毁mobileviewer');\n            var self = this;\n            //事件解绑\n            Events.unregisterEvent(this, 'tap dragstart drag dragend pinchstart pinch pinchend');\n            window.removeEventListener(\"onorientationchange\" in window ? \"orientationchange\" : \"resize\", this.$orientationChange, false);\n            this.mask.ontouchstart = null;\n            //dom移除\n            this.container && this.container.parentNode.removeChild(this.container);\n            this.mask && this.mask.parentNode.removeChild(this.mask);\n            //数据清空\n            this.mask = null;\n            this.viewerImg = null;\n            this.loading = null;\n            this.container = null;\n            this.viewerData = null;\n            if (_$1.TOP_VIEWER && _$1.TOP_VIEWER == this) {\n                _$1.TOP_VIEWER = null;\n            }\n        }\n    }]);\n    return MobileViewer;\n}();\n\nvar zh = {\n    'preview': '预览',\n    'max': '最大化',\n    'min': '向下还原',\n    'close': '关闭'\n};\nvar en = {\n    'preview': 'preview',\n    'max': 'max',\n    'min': 'min',\n    'close': 'close'\n};\n\nvar Lang = {\n    'zh': zh,\n    'zh_cn': zh,\n    'en': en,\n    'en_us': en\n};\n\nvar PcViewer = function () {\n    function PcViewer(options) {\n        classCallCheck(this, PcViewer);\n\n        this.options = extend({}, DEFAULT$1, options);\n        Events.registerEvent(this, 'tap dragstart drag dragend pinchstart pinch pinchend');\n        this.$createHtml();\n        this.$render();\n    }\n\n    createClass(PcViewer, [{\n        key: '$render',\n        value: function $render() {\n            this.viewerData = {\n                src: '',\n                width: 0,\n                height: 0,\n                containerWidth: 0,\n                containerHeight: 0\n            };\n            this.bound = 8; //距离外窗8px内可以显示缩放的鼠标型状\n            this.padding = 2; //图片的边距\n            this.viewerData.src = this.options.src;\n            this.currentIndex = this.options.currentIndex;\n            this.viewerData.width = this.options.width;\n            this.viewerData.height = this.options.height;\n            this.isModal = this.options.modal;\n            isObject(this.options.lang) ? this.langObject = this.options.lang : this.langObject = Lang[this.options.lang.toLowerCase()] || Lang['zh'];\n\n            this.$initFullSize();\n            if (this.options.src && typeOf(this.options.src) == 'array') {\n                this.imgLength = this.options.src.length;\n                this.currentIndex = this.currentIndex > this.imgLength - 1 ? this.imgLength - 1 : this.currentIndex;\n                this.viewerData.src = this.options.src[this.currentIndex];\n            } else if (typeOf(this.options.src) == 'string') {\n                this.options.src = [this.options.src];\n                this.currentIndex = 0;\n                this.viewerData.src = this.options.src[this.currentIndex];\n                this.imgLength = this.options.src.length;\n            } else {\n                Logger.error(\"缺少src参数\");\n                return;\n            }\n            this.isModal && this.$createMask();\n            this.close();\n            this.$init();\n        }\n    }, {\n        key: '$createMask',\n        value: function $createMask() {\n            var templateDom = Template.mask;\n            templateDom = createDom(templateDom);\n            addClass(templateDom, 'mask--transparent');\n            var hasMask = getByClass(document.body, 'ndui-pop-insert-pictures-mask');\n            if (hasMask == null || hasMask.length < 1) {\n                document.body.appendChild(templateDom);\n                this.mask = templateDom;\n            } else {\n                this.mask = hasMask[0];\n            }\n        }\n    }, {\n        key: '$createHtml',\n        value: function $createHtml() {\n            var self = this;\n            var templateDom = Template.popwindow;\n            templateDom = createDom(templateDom);\n            this.viewerImg = templateDom.querySelector('img');\n            this.viewerClose = templateDom.querySelector('.head__oper.head__close');\n            this.viewerFull = templateDom.querySelector('.head__oper.head__full');\n            this.viewerHead = templateDom.querySelector('.pop-insert-pictures__head');\n            this.viewerBody = templateDom.querySelector('.pop-insert-pictures__body');\n            this.swipLeft = templateDom.querySelector('.pic__oper.oper--left');\n            this.swipRight = templateDom.querySelector('.pic__oper.oper--right');\n            this.loading = templateDom.querySelector('.insert-pictures__loading');\n            this.container = templateDom;\n            document.body.appendChild(templateDom);\n            self.$handleMousemove = proxy(self.$handleMousemove, self);\n            self.$handleWheel = proxy(self.$handleWheel, self);\n            addListener(this.container, 'mousedown mousemove touchstart touchend', self.$handleMousemove);\n            addListener(this.container, 'mousewheel', self.$handleWheel);\n            addListener(this.viewerClose, 'mouseover mouseleave touchstart touchend', self.$handleMousemove);\n            addListener(this.viewerFull, ' mouseover mouseleave touchstart touchend', self.$handleMousemove);\n        }\n    }, {\n        key: '$init',\n        value: function $init(swipWidth) {\n            var self = this;\n            this.$loadImage(function (width, height) {\n                self.viewerData.width = width;\n                self.viewerData.height = height;\n                var w = void 0,\n                    h = void 0,\n                    left = void 0,\n                    top = void 0,\n                    tmpHeight = void 0;\n                var _h = self.fullBodyHeight - self.viewerPaddingHeight * 2;\n                var _w = self.fullBodyWidth - self.viewerPaddingWidth * 2;\n\n                if (swipWidth) {\n                    var _h2 = self.fullBodyHeight - self.viewerPaddingHeight * 2;\n                    w = swipWidth;\n                    tmpHeight = height / width * w;\n                    if (tmpHeight > _h2) {\n                        h = _h2;\n                    } else if (tmpHeight < _$1.VIEWER_MIN_HEIGHT) {\n                        h = _$1.VIEWER_MIN_HEIGHT;\n                    } else {\n                        h = tmpHeight;\n                    }\n                } else if (self.viewerData.width < _$1.VIEWER_MIN_WIDTH || self.viewerData.height < _$1.VIEWER_MIN_HEIGHT) {\n                    w = width < _$1.VIEWER_MIN_WIDTH ? _$1.VIEWER_MIN_WIDTH : width > _w ? _w : width;\n                    h = height < _$1.VIEWER_MIN_HEIGHT ? _$1.VIEWER_MIN_HEIGHT : height > _h ? _h : height;\n                } else {\n                    if (width > _w || height > _h) {\n                        if (width / height > _w / _h) {\n                            if (width > _w) {\n                                w = _w;\n                            } else if (width < _$1.IMAGE_MIN_WIDTH) {\n                                w = _$1.IMAGE_MIN_WIDTH;\n                            }\n                            h = height / width * w;\n                            h = h < _$1.IMAGE_MIN_HEIGHT ? _$1.IMAGE_MIN_HEIGHT : h;\n                        } else {\n                            if (height > _h) {\n                                h = _h;\n                            } else if (h < _$1.IMAGE_MAX_HEIGHT) {\n                                h = _$1.IMAGE_MIN_HEIGHT;\n                            }\n                            w = width / height * h;\n                            w = w < _$1.IMAGE_MIN_WIDTH ? _$1.IMAGE_MIN_WIDTH : w;\n                        }\n                    } else {\n                        w = width;\n                        h = height;\n                    }\n                }\n                self.viewerData.containerWidth = w;\n                self.viewerData.containerHeight = h;\n                if (self.fulled) {\n                    self.$resize(self.fullBodyWidth, self.fullBodyHeight);\n                } else {\n                    swipWidth ? self.$resize(null, null, true) : self.$resize();\n                }\n                self.loading.setAttribute('class', 'hide-dom');\n            });\n            this.viewerClose.setAttribute('title', this.langObject['close']);\n            this.viewerFull.setAttribute('title', this.langObject['max']);\n            this.viewerImg.src = this.viewerData.src;\n            this.$initSwip();\n            if (!swipWidth) {\n                this.fulled = false;\n                this.$initFullStatus();\n            }\n            this.$initSwipVisible();\n        }\n    }, {\n        key: '$initSwipVisible',\n        value: function $initSwipVisible() {\n            if (this.options.src.length > 1) {\n                this.swipLeft.style.display = '';\n                this.swipRight.style.display = '';\n                this.swipLeft.style.display = '';\n                this.swipRight.style.display = '';\n            } else {\n                this.swipLeft.style.display = 'none';\n                this.swipRight.style.display = 'none';\n                this.swipLeft.style.display = 'none';\n                this.swipRight.style.display = 'none';\n            }\n        }\n    }, {\n        key: '$initFullSize',\n        value: function $initFullSize() {\n            this.fullWidth = document.documentElement.clientWidth;\n            this.fullHeight = document.documentElement.clientHeight;\n            this.fullBodyWidth = this.fullWidth - this.padding * 2;\n            this.fullBodyHeight = this.fullHeight - this.padding * 2 - this.viewerHead.clientHeight;\n            this.viewerPaddingWidth = this.fullBodyWidth * 0.1;\n            this.viewerPaddingHeight = this.fullBodyHeight * 0.1;\n        }\n    }, {\n        key: '$resize',\n        value: function $resize(bodyWidth, bodyHeight, fixed) {\n            this.$initFullSize();\n            var w = void 0,\n                h = void 0,\n                left = void 0,\n                top = void 0,\n                self = this,\n                _w = void 0,\n                _h = void 0;\n            var imgWidth = this.viewerData.width,\n                imgHeight = this.viewerData.height;\n            w = bodyWidth == null ? this.viewerData.containerWidth : bodyWidth;\n            h = bodyHeight == null ? this.viewerData.containerHeight : bodyHeight;\n\n            if (imgWidth > w) {\n                _w = w;\n                _h = imgHeight / imgWidth * w;\n                imgWidth = _w;\n                imgHeight = _h;\n            } else if (imgHeight > h) {\n                _h = h;\n                _w = imgWidth / imgHeight * h;\n                imgWidth = _w;\n                imgHeight = _h;\n            }\n\n            left = w / 2 - imgWidth / 2;\n            top = h / 2 - imgHeight / 2;\n            this.viewerImg.removeAttribute('style');\n            this.viewerImg.style.width = imgWidth + 'px';\n            this.viewerImg.style.left = left + 'px';\n            this.viewerImg.style.top = top + 'px';\n            var oldHeight = this.viewerBody.clientHeight;\n            this.viewerBody.style.width = w + 'px';\n            this.viewerBody.style.height = h + 'px';\n\n            left = this.fullBodyWidth / 2 - w / 2;\n            top = this.fullBodyHeight / 2 - h / 2;\n            //this.container.style.left = left + 'px';\n            //this.container.style.top = top + 'px';\n\n            if (fixed && oldHeight) {\n                var containerTop = this.container.offsetTop - (h - oldHeight) / 2;\n                this.container.style.top = containerTop + 'px';\n            } else {\n                this.container.style.left = left + 'px';\n                this.container.style.top = top + 'px';\n            }\n        }\n    }, {\n        key: '$imageCenter',\n        value: function $imageCenter(bodyWidth, bodyHeight) {\n            var w = void 0,\n                h = void 0,\n                left = void 0,\n                top = void 0;\n            w = bodyWidth;\n            h = bodyHeight;\n            left = w / 2 - this.viewerImg.clientWidth / 2;\n            top = h / 2 - this.viewerImg.clientHeight / 2;\n\n            this.viewerImg.style.left = left + 'px';\n            this.viewerImg.style.top = top + 'px';\n            this.viewerBody.style.width = w + 'px';\n            this.viewerBody.style.height = h + 'px';\n        }\n    }, {\n        key: '$loadImage',\n        value: function $loadImage(callback) {\n            var self = this;\n            var img = new Image();\n            img.src = self.viewerData.src;\n            if (img.complete) {\n                callback && callback(img.width, img.height);\n            } else {\n                img.onload = function () {\n                    callback && callback(img.width, img.height);\n                    img.onload = null;\n                };\n                img.onerror = function () {\n                    self.viewerData.src = self.options.defaultSrc;\n                    self.viewerImg.src = self.options.defaultSrc;\n                    img.src = self.options.defaultSrc;\n                    img.onerror = null;\n                };\n            }\n        }\n    }, {\n        key: '$handleTap',\n        value: function $handleTap(event) {\n            if (this.options.lock) {\n                return;\n            }\n            event ? event.stopPropagation() : window.event.cancelBubble = true;\n            event = getEvent(event);\n            var px = void 0,\n                py = void 0;\n\n            var point = getPosOfEvent(event);\n            px = point[0].x;\n            py = point[0].y;\n\n            _$1.TOP_VIEWER && (_$1.TOP_VIEWER.container.style.zIndex = 100000);\n            this.container.style.zIndex = 100001;\n            _$1.TOP_VIEWER = this;\n\n            switch (event.target) {\n                case this.viewerClose:\n                    this.close();\n                    break;\n                case this.viewerFull:\n                    this.full();\n                    break;\n                case this.swipLeft:\n                    this.prev();\n                    break;\n                case this.swipRight:\n                    this.next();\n                    break;\n                default:\n                    break;\n            }\n        }\n    }, {\n        key: '$handle',\n        value: function $handle(event) {\n            if (this.options.lock) {\n                return;\n            }\n            event = getEvent(event);\n            var originalEvent = event.originalEvent ? event.originalEvent : event;\n            var point = getPosOfEvent(event);\n            this.$px = point[0].x;\n            this.$py = point[0].y;\n            switch (event.type) {\n                case 'tap':\n                    this.$handleTap(event);\n                    break;\n                case 'dragstart':\n                    event.preventDefault();\n                    if (_$1.TOP_VIEWER) {\n                        _$1.TOP_VIEWER.container.style.zIndex = 100000;\n                    }\n                    this.container.style.zIndex = 100001;\n                    _$1.TOP_VIEWER = this;\n\n                    if (event.target == this.viewerClose || event.target == this.viewerFull) {\n                        return;\n                    }\n                    this.isDown = true;\n                    this.cacheLastStatus = this.cacheLastStatus || {};\n                    this.cacheLastStatus.px = this.$px;\n                    this.cacheLastStatus.py = this.$py;\n                    break;\n                case 'drag':\n                    event.preventDefault();\n                    if (!this.isDown) {\n                        return;\n                    }\n                    if (this.isBorder && !hasClass(this.viewerFull, 'head__small')) {\n                        Logger.debug(this.container.style.cursor);\n                        var bh = void 0,\n                            bw = void 0;\n                        switch (this.isBorder) {\n                            case 'n-resize':\n                                bh = this.viewerBody.clientHeight - (this.$py - this.cacheLastStatus.py);\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT && bh <= this.fullBodyHeight) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                    this.container.style.top = this.container.offsetTop + (this.$py - this.cacheLastStatus.py) + 'px';\n                                }\n                                break;\n                            case 's-resize':\n                                bh = this.viewerBody.clientHeight + this.$py - this.cacheLastStatus.py;\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT && bh <= this.fullBodyHeight) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                }\n                                break;\n                            case 'w-resize':\n                                bw = this.viewerBody.clientWidth - (this.$px - this.cacheLastStatus.px);\n                                if (bw >= _$1.VIEWER_MIN_WIDTH && bw <= this.fullBodyWidth) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                    this.container.style.left = this.container.offsetLeft + this.$px - this.cacheLastStatus.px + 'px';\n                                }\n\n                                break;\n                            case 'e-resize':\n                                bw = this.viewerBody.clientWidth + this.$px - this.cacheLastStatus.px;\n                                if (bw >= _$1.VIEWER_MIN_WIDTH && bw <= this.fullBodyWidth) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                }\n\n                                break;\n                            case 'nw-resize':\n                                bh = this.viewerBody.clientHeight - (this.$py - this.cacheLastStatus.py);\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT && bh <= this.fullBodyHeight) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                    this.container.style.top = this.container.offsetTop + (this.$py - this.cacheLastStatus.py) + 'px';\n                                }\n                                bw = this.viewerBody.clientWidth - (this.$px - this.cacheLastStatus.px);\n                                if (bw >= _$1.VIEWER_MIN_WIDTH && bw <= this.fullBodyWidth) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                    this.container.style.left = this.container.offsetLeft + this.$px - this.cacheLastStatus.px + 'px';\n                                }\n                                break;\n                            case 'ne-resize':\n                                bh = this.viewerBody.clientHeight - (this.$py - this.cacheLastStatus.py);\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT && bh <= this.fullBodyHeight) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                    this.container.style.top = this.container.offsetTop + (this.$py - this.cacheLastStatus.py) + 'px';\n                                }\n                                bw = this.viewerBody.clientWidth + this.$px - this.cacheLastStatus.px;\n                                if (bw >= _$1.VIEWER_MIN_WIDTH && bw <= this.fullBodyWidth) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                }\n                                break;\n                            case 'sw-resize':\n                                bw = this.viewerBody.clientWidth - (this.$px - this.cacheLastStatus.px);\n                                if (bw >= _$1.VIEWER_MIN_WIDTH && bw <= this.fullBodyWidth) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                    this.container.style.left = this.container.offsetLeft + this.$px - this.cacheLastStatus.px + 'px';\n                                }\n                                bh = this.viewerBody.clientHeight + this.$py - this.cacheLastStatus.py;\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT && bh <= this.fullBodyHeight) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                }\n                                break;\n                            case 'se-resize':\n                                bh = this.viewerBody.clientHeight + this.$py - this.cacheLastStatus.py;\n                                if (bh >= _$1.VIEWER_MIN_HEIGHT) {\n                                    this.viewerBody.style.height = bh + 'px';\n                                }\n                                bw = this.viewerBody.clientWidth + this.$px - this.cacheLastStatus.px;\n                                if (bw >= _$1.VIEWER_MIN_WIDTH) {\n                                    this.viewerBody.style.width = bw + 'px';\n                                }\n                                break;\n                        }\n                        this.$imageCenter(this.viewerBody.clientWidth, this.viewerBody.clientHeight);\n                        this.cacheLastStatus.px = this.$px;\n                        this.cacheLastStatus.py = this.$py;\n                    }\n\n                    if (this.isBorder) {\n                        return;\n                    }\n\n                    if (event.target == this.viewerImg) {\n                        var w = void 0,\n                            h = void 0,\n                            byW = void 0,\n                            byH = void 0,\n                            moveFlag = false;\n                        w = this.viewerImg.clientWidth;\n                        h = this.viewerImg.clientHeight;\n                        byW = this.viewerBody.clientWidth;\n                        byH = this.viewerBody.clientHeight;\n\n                        if (w > byW) {\n                            var moveToLeft = this.$px - this.cacheLastStatus.px + this.viewerImg.offsetLeft;\n                            if (moveToLeft <= 0 && moveToLeft >= byW - w) {\n                                this.viewerImg.style.left = moveToLeft + 'px';\n                            }\n                            moveFlag = true;\n                        }\n                        if (h > byH) {\n                            var moveToTop = this.$py - this.cacheLastStatus.py + this.viewerImg.offsetTop;\n                            if (moveToTop <= 0 && moveToTop >= byH - h) {\n                                this.viewerImg.style.top = moveToTop + 'px';\n                            }\n                            moveFlag = true;\n                        }\n                        if (moveFlag) {\n                            this.cacheLastStatus.px = this.$px;\n                            this.cacheLastStatus.py = this.$py;\n                            return;\n                        }\n                    }\n\n                    if (hasClass(this.viewerFull, 'head__small')) {\n                        return;\n                    }\n\n                    var docCenterX = this.fullBodyWidth / 2;\n                    var docCenterY = this.fullBodyHeight / 2;\n\n                    var containerLeft = this.$px - this.cacheLastStatus.px + this.container.offsetLeft;\n                    var containerTop = this.$py - this.cacheLastStatus.py + this.container.offsetTop;\n                    var centerX = containerLeft + this.container.clientWidth / 2;\n                    var centerY = containerTop + this.container.clientHeight / 2;\n                    if (centerX >= 0 && centerX <= this.fullBodyWidth) {\n                        this.container.style.left = containerLeft + 'px';\n                    } else if (Math.abs(this.$px - docCenterX) < Math.abs(this.cacheLastStatus.px - docCenterX)) {\n                        this.container.style.left = containerLeft + 'px';\n                    }\n\n                    if (centerY >= 0 && centerY <= this.fullHeight) {\n                        this.container.style.top = containerTop + 'px';\n                    } else if (Math.abs(this.$py - docCenterY) < Math.abs(this.cacheLastStatus.py - docCenterY)) {\n                        this.container.style.top = containerTop + 'px';\n                    }\n\n                    this.cacheLastStatus.px = this.$px;\n                    this.cacheLastStatus.py = this.$py;\n                    break;\n                case 'dragend':\n                    event.preventDefault();\n                    this.isDown = false;\n                    this.isBorder = '';\n                    break;\n                default:\n                    break;\n            }\n        }\n    }, {\n        key: '$handleWheel',\n        value: function $handleWheel(event) {\n            var _this = this;\n\n            event ? event.stopPropagation() : window.event.cancelBubble = true;\n            event = getEvent(event);\n            event.preventDefault();\n\n            var target = event.target;\n            var px = void 0,\n                py = void 0;\n            var point = getPosOfEvent(event);\n            px = point[0].x;\n            py = point[0].y;\n\n            if (target == this.viewerImg || target == this.viewerBody) {\n                Logger.debug('wheel');\n                // Limit wheel speed to prevent zoom too fast\n                if (this.wheeling) {\n                    return;\n                }\n\n                this.wheeling = true;\n\n                setTimeout(function () {\n                    _this.wheeling = false;\n                }, 50);\n\n                var ratio = 1;\n                var delta = 1;\n                var scale = 1;\n\n                if (event.deltaY) {\n                    delta = event.deltaY > 0 ? 1 : -1;\n                } else if (event.wheelDelta) {\n                    delta = -event.wheelDelta / 120;\n                } else if (event.detail) {\n                    delta = event.detail > 0 ? 1 : -1;\n                }\n                scale = -delta * ratio;\n                scale = Number(scale);\n\n                if (scale < 0) {\n                    scale = 1 / (1 - scale);\n                } else {\n                    scale = 1 + scale;\n                }\n                var $offset = getOffset(this.viewerImg);\n                var left = $offset.left;\n                var top = $offset.top;\n                $offset = getOffset(this.viewerImg.parentNode);\n                var parentLeft = $offset.left;\n                var parentTop = $offset.top;\n                var tempWidth = this.viewerImg.clientWidth;\n                var tempHeight = this.viewerImg.clientHeight;\n                var bodyWidth = this.viewerBody.clientWidth;\n                var bodyHeight = this.viewerBody.clientHeight;\n                var imgHeight = this.viewerData.height;\n                var imgWidth = this.viewerData.width;\n\n                tempWidth = tempWidth * scale;\n                if (tempWidth > imgWidth * 10) {\n                    tempWidth = imgWidth * 10;\n                    scale = tempWidth / this.viewerImg.clientWidth; //重新计算放大的倍数\n                } else if (imgHeight < _$1.IMAGE_MIN_HEIGHT || imgWidth < _$1.IMAGE_MIN_WIDTH) {\n                    if (tempWidth < imgWidth) {\n                        tempWidth = imgWidth;\n                        scale = tempWidth / this.viewerImg.clientWidth;\n                    }\n                } else if (tempWidth < _$1.IMAGE_MIN_WIDTH) {\n                    tempWidth = _$1.IMAGE_MIN_WIDTH;\n                    scale = tempWidth / this.viewerImg.clientWidth;\n                }\n\n                this.viewerImg.style.width = tempWidth + 'px';\n                tempHeight = this.viewerImg.clientHeight;\n\n                left = (left - px) * scale + px;\n                top = (top - py) * scale + py;\n\n                if (bodyHeight >= tempHeight || bodyWidth >= tempWidth) {\n                    left = bodyWidth / 2 - tempWidth / 2;\n                    top = bodyHeight / 2 - tempHeight / 2;\n\n                    this.viewerImg.style.left = left + 'px';\n                    this.viewerImg.style.top = top + 'px';\n                } else {\n                    left = left - parentLeft;\n                    top = top - parentTop;\n\n                    left = left > 0 ? 0 : left;\n                    left = left < bodyWidth - tempWidth ? bodyWidth - tempWidth : left;\n\n                    top = top > 0 ? 0 : top;\n                    top = top < bodyHeight - tempHeight ? bodyHeight - tempHeight : top;\n\n                    this.viewerImg.style.left = left + 'px';\n                    this.viewerImg.style.top = top + 'px';\n                }\n            }\n        }\n    }, {\n        key: '$handleMousemove',\n        value: function $handleMousemove(event) {\n            event = getEvent(event);\n            event.preventDefault();\n            var originalEvent = event.originalEvent ? event.originalEvent : event;\n            var point = getPosOfEvent(event);\n            this.$px = point[0].x;\n            this.$py = point[0].y;\n\n            var isFull = this.fulled;\n            var isCtrBtn = false;\n            var target = event.target;\n            if (target == this.viewerClose || target == this.viewerFull) {\n                isCtrBtn = true;\n            }\n\n            switch (event.type) {\n                case 'touchstart':\n                    if (isCtrBtn) {\n                        addClass(target, 'head__oper--hover');\n                    }\n                case 'mousedown':\n                    if (isFull || isCtrBtn) {\n                        return;\n                    }\n                    Logger.debug(this.$px, this.$py);\n                    this.isBorder = this.$borderCheck({\n                        x: this.$px,\n                        y: this.$py\n                    });\n                    break;\n                case 'mousemove':\n                    if (isFull || isCtrBtn) {\n                        return;\n                    }\n                    this.$borderCheck({\n                        x: this.$px,\n                        y: this.$py\n                    }, function () {\n                        Logger.debug('done');\n                    });\n                    break;\n                case 'mouseover':\n                    if (isCtrBtn) {\n                        addClass(target, 'head__oper--hover');\n                    }\n                    break;\n                case 'mouseleave':\n                case 'touchend':\n                    if (isCtrBtn) {\n                        removeClass(target, 'head__oper--hover');\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n    }, {\n        key: '$borderCheck',\n        value: function $borderCheck(pointer, callback) {\n            var px = pointer.x;\n            var py = pointer.y;\n            var parent = this.container;\n            parent.style.cursor = '';\n            var x = parent.offsetLeft;\n            var y = parent.offsetTop;\n            var w = parent.clientWidth;\n            var h = parent.clientHeight;\n            var plt = {\n                x: x,\n                y: y\n            };\n            var prt = {\n                x: x + w,\n                y: y\n            };\n            var pld = {\n                x: x,\n                y: y + h\n            };\n            var prd = {\n                x: x + w,\n                y: y + h\n            };\n\n            var pointers = [plt, prt, pld, prd];\n            var dirs = ['nw-resize', 'ne-resize', 'sw-resize', 'se-resize'];\n            var flag = true;\n            for (var i = 0; i < pointers.length; i++) {\n                if (Math.abs(px - pointers[i].x) < this.bound && Math.abs(py - pointers[i].y) < this.bound) {\n                    parent.style.cursor = dirs[i];\n                    flag = false;\n                    callback && callback(px, py);\n                    break;\n                }\n            }\n            if (flag) {\n\n                if (px > plt.x + this.bound && px < prd.x - this.bound && py > plt.y && py < plt.y + this.bound) {\n                    //top\n                    parent.style.cursor = 'n-resize';\n                    callback && callback(px, py);\n                    flag = false;\n                } else if (px > plt.x + this.bound && px < prd.x - this.bound && py > prd.y - this.bound && py < prd.y) {\n                    //down\n                    parent.style.cursor = 's-resize';\n                    callback && callback(px, py);\n                    flag = false;\n                } else if (px > plt.x && px < plt.x + this.bound && py > plt.y + this.bound && py < prd.y - this.bound) {\n                    //left\n                    parent.style.cursor = 'w-resize';\n                    callback && callback(px, py);\n                    flag = false;\n                } else if (px > prd.x - this.bound && px < prd.x && py > plt.y + this.bound && py < prd.y - this.bound) {\n                    //right\n                    parent.style.cursor = 'e-resize';\n                    callback && callback(px, py);\n                    flag = false;\n                }\n            }\n            return parent.style.cursor;\n        }\n    }, {\n        key: '$initFullStatus',\n        value: function $initFullStatus() {\n            if (this.fulled) {\n                this.viewerFull && removeClass(this.viewerFull, 'head__full');\n                this.viewerFull && addClass(this.viewerFull, 'head__small');\n            } else {\n                this.viewerFull && removeClass(this.viewerFull, 'head__small');\n                this.viewerFull && addClass(this.viewerFull, 'head__full');\n            }\n        }\n    }, {\n        key: '$initSwip',\n        value: function $initSwip() {\n            if (this.currentIndex == 0) {\n                addClass(this.swipLeft, 'oper--disabled');\n            } else {\n                removeClass(this.swipLeft, 'oper--disabled');\n            }\n            if (this.currentIndex == this.imgLength - 1) {\n                addClass(this.swipRight, 'oper--disabled');\n            } else {\n                removeClass(this.swipRight, 'oper--disabled');\n            }\n        }\n    }, {\n        key: 'open',\n        value: function open() {\n            if (this.container) {\n                this.fulled = false;\n                this.$initFullStatus();\n                this.container.style.display = '';\n                if (this.options.modal) {\n                    this.mask && removeClass(this.mask, 'hide-dom');\n                }\n                this.$resize();\n            }\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            this.container.style.display = 'none';\n            if (this.options.modal) {\n                addClass(this.mask, 'hide-dom');\n            }\n        }\n    }, {\n        key: 'full',\n        value: function full() {\n            if (!this.fulled) {\n                this.fulled = true;\n                this.cacheLastStatus = this.cacheLastStatus || {};\n                this.cacheLastStatus.full = {\n                    containerLeft: this.container.offsetLeft,\n                    containerTop: this.container.offsetTop,\n                    bodyWidth: this.viewerBody.clientWidth,\n                    bodyHeight: this.viewerBody.clientHeight,\n                    imgWidth: this.viewerImg.clientWidth,\n                    imgLeft: this.viewerImg.offsetLeft,\n                    imgTop: this.viewerImg.offsetTop\n                };\n                this.viewerFull.setAttribute('title', this.langObject['min']);\n                this.$resize(this.fullBodyWidth, this.fullBodyHeight);\n            } else {\n                this.fulled = false;\n                this.viewerFull.setAttribute('title', this.langObject['max']);\n                this.container.style.left = this.cacheLastStatus.full.containerLeft + 'px';\n                this.container.style.top = this.cacheLastStatus.full.containerTop + 'px';\n                this.viewerBody.style.width = this.cacheLastStatus.full.bodyWidth + 'px';\n                this.viewerBody.style.height = this.cacheLastStatus.full.bodyHeight + 'px';\n                this.viewerImg.style.width = this.cacheLastStatus.full.imgWidth + 'px';\n                this.viewerImg.style.left = this.cacheLastStatus.full.imgLeft + 'px';\n                this.viewerImg.style.top = this.cacheLastStatus.full.imgTop + 'px';\n            }\n            this.$initFullStatus();\n        }\n    }, {\n        key: 'prev',\n        value: function prev() {\n            this.currentIndex--;\n            if (this.currentIndex >= 0) {\n                this.viewerData.src = this.options.src[this.currentIndex];\n                this.$init(this.viewerBody.clientWidth);\n            } else {\n                this.currentIndex = 0;\n                addClass(this.swipLeft, 'oper--disabled');\n            }\n        }\n    }, {\n        key: 'next',\n        value: function next() {\n            this.currentIndex++;\n            if (this.currentIndex < this.imgLength) {\n                this.viewerData.src = this.options.src[this.currentIndex];\n                this.$init(this.viewerBody.clientWidth);\n            } else {\n                addClass(this.swipRight, 'oper--disabled');\n                this.currentIndex = this.imgLength - 1;\n            }\n        }\n\n        /**\r\n         * 外部可以直接更新\r\n         */\n\n    }, {\n        key: 'updateSrc',\n        value: function updateSrc() {\n            var arg = arguments;\n            if (arg.length == 0) {\n                return;\n            }\n            if (arg.length == 1) {\n                var arg1 = arg[0];\n                if (isString(arg1)) {\n                    // this.isSwip = false;\n                    this.options.src[0] = arg1;\n                    this.viewerData.src = arg1;\n                    this.$init();\n                } else if (isNumber(arg1) && arg1 >= 0 && arg1 < this.imgLength) {\n                    this.viewerData.src = this.options.src[arg1];\n                    this.currentIndex = arg1;\n                    this.$init();\n                } else if (isArray(arg1) && arg1.length > 0) {\n                    // this.isSwip = true;\n                    this.options.src = arg1;\n                    this.viewerData.src = this.options.src[0];\n                    this.currentIndex = 0;\n                    this.imgLength = arg1.length;\n                    this.$init();\n                }\n            } else if (arg.length >= 2) {\n                var index = arg[0];\n                var srcArray = arg[1];\n                if (isNumber(index) && isArray(srcArray) && index >= 0 && index < srcArray.length) {\n                    // this.isSwip = true;\n                    this.options.src = srcArray;\n                    this.viewerData.src = this.options.src[index];\n                    this.imgLength = srcArray.length;\n                    this.currentIndex = index;\n                    this.$init();\n                }\n            }\n        }\n    }, {\n        key: 'setLock',\n        value: function setLock(lock) {\n            this.options.lock = lock;\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            var self = this;\n            //事件解绑\n            Events.unregisterEvent(this, 'tap dragstart drag dragend pinchstart pinch pinchend');\n            this.container && removeListener(this.container, 'mousedown mousemove', self.$handleMousemove);\n            this.viewerClose && removeListener(this.viewerClose, 'mouseover mouseleave', self.$handleMousemove);\n            this.viewerFull && removeListener(this.viewerFull, ' mouseover mouseleave', self.$handleMousemove);\n            // dom元素移除\n            this.container && this.container.parentNode.removeChild(this.container);\n            this.mask && this.mask.parentNode && this.mask.parentNode.removeChild(this.mask);\n            // 数据清空\n            this.mask = null;\n            this.container = null;\n            this.viewerImg = null;\n            this.viewerClose = null;\n            this.viewerFull = null;\n            this.viewerHead = null;\n            this.viewerBody = null;\n            this.swipLeft = null;\n            this.swipRight = null;\n            this.loading = null;\n            this.options = null;\n            this.$handle = null;\n            this.$handleMousemove = null;\n            if (_$1.TOP_VIEWER && _$1.TOP_VIEWER == this) {\n                _$1.TOP_VIEWER = null;\n            }\n            this.viewerData = null;\n        }\n    }]);\n    return PcViewer;\n}();\n\nvar VIEWER_TYPE = {\n    MOBILE: 'mobile',\n    PC: 'pc'\n    /**\r\n     * viewer  弹窗构造工厂\r\n     */\n};var Factory = {\n    createViewer: function createViewer(options) {\n        var env = options.env;\n        switch (env) {\n            case VIEWER_TYPE.MOBILE:\n                return new MobileViewer(options);\n                break;\n            case VIEWER_TYPE.PC:\n                return new PcViewer(options);;\n                break;\n            default:\n                break;\n        }\n        return _.VIEWER;\n    }\n};\n\nvar ImageView = function () {\n    function ImageView(container, options) {\n        classCallCheck(this, ImageView);\n\n        //兼容只传入options的方式\n        if (!container && !options) {\n            throw new Error(\"至少需要一个参数\");\n            return;\n        } else if (!options && container) {\n            options = container;\n            container = null;\n        } else if (options && container) {\n            var reg = container.nodeName && 'IMGimg'.match(container.nodeName);\n            if (!(reg && reg.length > 0)) {\n                throw new Error(\"图片参数有误\");\n                return;\n            }\n        }\n        this.container = container;\n        this.options = extend({}, DEFAULT, options);\n\n        if (isMobile()) {\n            this.env = 'mobile';\n        } else {\n            this.env = 'pc';\n        }\n        this.env = this.options.env || this.env;\n        this.options.env = this.env;\n        var src = '';\n\n        if (this.options.src && typeOf(this.options.src) == 'string') {\n            src = this.options.src;\n        } else if (this.container) {\n            src = this.container && this.container.getAttribute('src');\n            this.options.src = src;\n        }\n\n        !this.options.src && Logger.debug('没有图片地址');\n        this.imgData = {\n            src: src,\n            width: 0,\n            height: 0\n        };\n        this.viewer = null;\n    }\n\n    createClass(ImageView, [{\n        key: 'render',\n        value: function render() {\n            var reg = this.container && this.container.nodeName && 'IMGimg'.match(this.container.nodeName);\n            if (reg && reg.length > 0) {\n                this.container.removeAttribute('style');\n                this.container.removeAttribute('class');\n                this.container.removeAttribute('width');\n                this.container.removeAttribute('height');\n                this.container.style.display = 'none';\n            }\n            this.$init();\n        }\n    }, {\n        key: '$init',\n        value: function $init() {\n            var _this = this;\n\n            var self = this;\n            self.$createHtml();\n            this.$loadImage(function () {\n\n                //如果图片太小\n                if (self.imgData.width < _$1.IMAGE_MIN_WIDTH && self.imgData.height < _$1.IMAGE_MIN_HEIGHT) {\n                    self.container && (self.container.style.display = '');\n                    setStyle(self.container, { 'border': '0' });\n                    setStyle(self.container, { 'width': self.imgData.width, 'height': self.imgData.height });\n                    _this.img.removeAttribute('style');\n                    addClass(self.scale, 'hide-dom');\n                    addClass(self.loading, 'hide-dom');\n                    self.$removeLister();\n                    return;\n                }\n\n                self.$renderHtml();\n                addClass(_this.loading, 'hide-dom');\n                Logger.debug('loaded img');\n            });\n        }\n    }, {\n        key: '$loadImage',\n        value: function $loadImage(callback) {\n            var self = this;\n            var img = new Image();\n            img.src = self.imgData.src;\n            if (img.complete) {\n                self.imgData.width = img.width;\n                self.imgData.height = img.height;\n                if (callback) {\n                    callback();\n                }\n            } else {\n                img.onload = function () {\n                    self.imgData.width = img.width;\n                    self.imgData.height = img.height;\n                    if (callback) {\n                        callback();\n                    }\n                    img.onload = null;\n                };\n                img.onerror = function () {\n                    self.img.src = self.options.defaultSrc;\n                    self.options.defaultSrc && (img.src = self.options.defaultSrc);\n                    self.imgData.src = self.options.defaultSrc;\n                    img.onerror = null;\n                };\n            }\n        }\n    }, {\n        key: '$createHtml',\n        value: function $createHtml() {\n            var templateView = void 0,\n                wrapView = void 0;\n            templateView = this.options.inline ? Template.view2 : Template.view;\n            templateView = createDom(templateView);\n            wrapView = templateView.firstElementChild;\n            if (this.env == 'mobile') {\n                addClass(templateView.querySelector('.insert-pictures__zoom'), 'hide-dom');\n            }\n\n            if (this.container) {\n                this.img = this.container;\n                // wrapView && wrapView.insertBefore(this.container, wrapView.firstElementChild);\n            } else {\n                var img = createDom('<img/>');\n                img.src = this.imgData.src;\n                this.img = img;\n                //wrapView.insertBefore(img, wrapView.firstElementChild);\n            }\n            this.container = templateView;\n\n            if (this.img && this.img.parentElement) {\n                this.img.parentElement.insertBefore(this.container, this.img);\n            }\n\n            wrapView && wrapView.insertBefore(this.img, wrapView.firstElementChild);\n\n            this.loading = this.container.querySelector('.insert-pictures__loading');\n            this.scale = this.container.querySelector('.insert-pictures__zoom');\n            var self = this;\n            self.$handle = proxy(self.$handle, self);\n            if (this.env == 'pc' && !this.options.eventAll) {\n                this.scale && addListener(this.scale, 'click', self.$handle);\n            } else {\n                this.container && addListener(this.container, 'click', self.$handle);\n            }\n            this.options.style && setStyle(this.container, this.options.style);\n        }\n    }, {\n        key: '$renderHtml',\n        value: function $renderHtml() {\n            this.$resize();\n        }\n    }, {\n        key: '$resize',\n        value: function $resize() {\n            var w = void 0,\n                h = void 0,\n                _w = void 0,\n                _h = void 0;\n            _w = this.imgData.width;\n            _h = this.imgData.height;\n\n            if (_w < _$1.IMAGE_MIN_HEIGHT) {\n                w = _$1.IMAGE_MIN_WIDTH;\n                h = _h <= _$1.IMAGE_MAX_HEIGHT ? _h : _$1.IMAGE_MAX_HEIGHT;\n            } else if (_h < _$1.IMAGE_MIN_WIDTH) {\n                h = _$1.IMAGE_MIN_HEIGHT;\n                w = _w <= _$1.IMAGE_MAX_WIDTH ? _w : _$1.IMAGE_MAX_WIDTH;\n            } else if (_w > _$1.IMAGE_MAX_WIDTH || _h > _$1.IMAGE_MAX_HEIGHT) {\n                w = _$1.IMAGE_MAX_WIDTH;\n                h = _$1.IMAGE_MAX_HEIGHT;\n            } else {\n                w = _w;\n                h = _h;\n            }\n            this.container.style.width = w + 'px';\n            this.container.style.height = h + 'px';\n\n            this.img.removeAttribute('style');\n        }\n    }, {\n        key: '$handle',\n        value: function $handle(event) {\n            event ? event.stopPropagation() : window.event.cancelBubble = true;\n            Logger.debug('click');\n            if (this.options.lock) {\n                return;\n            }\n\n            if (this.viewer == null) {\n                var viewrOptions = extend({}, this.options, this.imgData);\n                this.viewer = Factory.createViewer(viewrOptions);\n                this.viewer.container.style.zIndex = 100001;\n            } else if (this.env == 'mobile') {\n                this.viewer.updateSrc(this.imgData.src);\n            }\n            this.viewer.open();\n            if (_$1.TOP_VIEWER) {\n                _$1.TOP_VIEWER.container && (_$1.TOP_VIEWER.container.style.zIndex = 100000);\n            }\n            this.viewer.container && (this.viewer.container.style.zIndex = 100001);\n            _$1.TOP_VIEWER = this.viewer;\n        }\n    }, {\n        key: 'setLock',\n        value: function setLock(lock) {\n            this.options.lock = lock;\n            if (this.options.lock) {\n                this.container && setStyle(this.container, { 'pointer-events': 'none' });\n            } else {\n                this.container && setStyle(this.container, { 'pointer-events': '' });\n            }\n        }\n    }, {\n        key: 'getView',\n        value: function getView() {\n            return this.container;\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.off();\n        }\n    }, {\n        key: 'on',\n        value: function on() {\n            this.viewer && this.viewer.open();\n        }\n    }, {\n        key: 'off',\n        value: function off() {\n            this.viewer && this.viewer.close();\n        }\n    }, {\n        key: '$removeLister',\n        value: function $removeLister() {\n            if (this.env == 'pc' && !this.options.eventAll) {\n                this.scale && removeListener(this.scale, 'click', this.$handle);\n            } else {\n                this.container && removeListener(this.container, 'click', this.$handle);\n            }\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            Logger.debug('销毁imageveiewer');\n            this.$removeLister();\n            this.viewer && this.viewer.destroy();\n            this.container = null;\n            this.viewer = null;\n            this.loading = null;\n            this.scale = null;\n            this.options = null;\n            this.imgData = null;\n        }\n    }]);\n    return ImageView;\n}();\n\nvar ImagePlayer = {\n    setLoggerLevel: function setLoggerLevel(level) {\n        Logger.setLevel(level);\n    },\n    render: function render(container, options) {\n\n        container = container.length > 0 ? container[0] : container; //添加对jq的适配\n\n        for (var key in _$1.IMAGE_INSTANCES) {\n            if (!document.querySelector('[data-id=\"' + _$1.getKeyId(key) + '\"]')) {\n                _$1.clear(key);\n            }\n        }\n        _$1.TOP_VIEWER = null; //清空当前顶层数据\n        _$1.VIEWER = null; //清空工厂\n\n        options = options || {};\n        Events.init();\n        Events.unbind();\n        Events.bind();\n        if (container) {\n            var imageItems = container.nodeName.toLowerCase() == 'img' ? [container] : container.getElementsByTagName('img');\n\n            each(imageItems, function (item, index) {\n\n                if (item.parentNode && hasClass(item.parentNode, 'ndui-insert-pictures') || item.parentNode && hasClass(item.parentNode, 'pop-insert-pictures__body')) {\n                    return;\n                }\n\n                var dataId = getRandomId('media');\n\n                var mediaId = 'image';\n                var containerId = options.containerId || '';\n                mediaId = mediaId + '-' + containerId + '-' + index;\n\n                var key = mediaId + '|' + dataId;\n                var newOptions = extend({}, options, {\n                    dataId: dataId,\n                    mediaId: mediaId,\n                    key: key\n                });\n\n                var image = new ImageView(item, newOptions);\n                image.render();\n                _$1.IMAGE_INSTANCES[key] = image;\n            });\n        } else {\n            Logger.debug('no container');\n        }\n        return _$1.IMAGE_INSTANCES;\n    },\n\n    destroy: function destroy() {\n        Events.unbind();\n        var instances = _$1.IMAGE_INSTANCES;\n        for (var i = 0, len = instances.length; i < len; i++) {\n            instances.destroy();\n        }\n        _$1.IMAGE_INSTANCES = {};\n        _$1.TOP_VIEWER = null;\n        _$1.VIEWER = null; //清空工厂\n    },\n    reset: function reset() {\n        var instances = _$1.IMAGE_INSTANCES;\n        for (var i = 0, len = instances.length; i < len; i++) {\n            instances.off();\n        }\n    },\n    setLock: function setLock(lock, view) {\n        var instances = _$1.IMAGE_INSTANCES;\n        for (var key in instances) {\n            instances[key].setLock(lock);\n        }\n    },\n    getMedia: function getMedia() {\n        return _$1.IMAGE_INSTANCES;\n    },\n    mediaOnFullScreenChange: function mediaOnFullScreenChange() {\n        //no use\n    },\n    Image: {\n        create: function create(img, options) {\n            Events.init();\n            Events.unbind();\n            Events.bind();\n            return new ImageView(img, options);\n        }\n    },\n    Viewer: {\n        create: function create(options) {\n            var env = '';\n            if (isMobile()) {\n                env = 'mobile';\n            } else {\n                env = 'pc';\n            }\n            options.env = options.env || env;\n            Events.init();\n            Events.unbind();\n            Events.bind();\n            var instance = Factory.createViewer(options);\n            if (_$1.TOP_VIEWER) {\n                _$1.TOP_VIEWER.container && (_$1.TOP_VIEWER.container.style.zIndex = 100000);\n            }\n            instance.container && (instance.container.style.zIndex = 100001);\n            _$1.TOP_VIEWER = instance;\n            return instance;\n        }\n    }\n};\n\nreturn ImagePlayer;\n\n}());\n\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q, ImagePlayer) {\r\n\r\n\r\n    function ImagePlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, typeof option === 'object' && option);\r\n            //插件缓存\r\n            if (!data) {\r\n                data = ImagePlayer.Image.create($this.get(0), options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('imgplayer', ImagePlayerPlugin);\r\n\r\n})(window, __Q, imageviewer);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q, ImagePlayer) {\r\n\r\n    //空方法\r\n    var _emptyFunc = function () {\r\n\r\n    };\r\n\r\n\r\n    //播放互相排斥\r\n    var mutuallyExclusivePlay = function (mediaObj) {\r\n        var that = window.NDMediaPlayer;\r\n        var mediaId = mediaObj.mediaType + '-' + mediaObj.index + '|' + mediaObj.dataId;\r\n        for (var key in that._$medias) {\r\n            if (mediaId !== key && that._$medias[key]) {\r\n                if (that._$medias[key].data('my.mediaplayer').pause) {\r\n                    that._$medias[key].data('my.mediaplayer').pause();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    var DefaultOption = {\r\n        onlyRender: false, //这个参数要抛弃了\r\n        lock: false, //是否锁定\r\n        autoAdaptSize: false,\r\n        lang: 'zh',\r\n        mutuallyExclusive: true,\r\n        //mediaMargin: '10px 0px',//旧版参数，需要兼容\r\n        containerId: '', //渲染外层id，用于标识多媒体，投影端同步使用\r\n        returnInstances: false, //是否作为实例返回，而不保存在全局变量中\r\n        mediaPreload: true, //多媒体是否预加载\r\n        index: null, //外部传入的索引值\r\n        style: '', //容器样式\r\n        _onEnd: null, //私有的事件结束监听，不影响全局的事件监听，外部不得调用\r\n        _onPlay: null,\r\n        img: {\r\n            render: false,\r\n            renderUI: true,\r\n            renderImmediately: false, //不立即加载\r\n            width: 0,\r\n            height: 0,\r\n            src: ''\r\n        },\r\n        video: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            renderUI: true,\r\n            supportFullscreen: true,\r\n            showPlayBtnInVideo: false,\r\n            showPlayBtnInVideo: false,\r\n            showFullscreenBtn: false\r\n        },\r\n        audio: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            renderUI: true\r\n        },\r\n        onPlay: null,\r\n        onPause: null,\r\n        onEnd: null,\r\n        onSeek: null,\r\n        onVolumeChange: null,\r\n        onTimeUpdate: null,\r\n        onFullScreenChange: null\r\n    };\r\n    var mediaArry = ['audio', 'video', 'img'];\r\n\r\n    var extendOption = function (option, eventHanlder) {\r\n        //渲染的多媒体资源\r\n        option = option || {};\r\n        var imgOption = __Q.extend({}, DefaultOption.img, option.img || {});\r\n        var videoOption = __Q.extend({}, DefaultOption.video, option.video || {});\r\n        var audioOption = __Q.extend({}, DefaultOption.audio, option.audio || {});\r\n\r\n        var option = __Q.extend({}, DefaultOption, option || {}, eventHanlder);\r\n        option.img = imgOption;\r\n        option.video = videoOption;\r\n        option.audio = audioOption;\r\n        //合并样式\r\n        if (option.mediaMargin) {\r\n            option.style += ';margin:' + option.mediaMargin;\r\n        }\r\n        return option;\r\n    };\r\n\r\n    var renderAudioVideo = function ($media, type, option) {\r\n        var $div = __Q(document.createElement(\"div\"));\r\n        $div.attr('style', option.style);\r\n        $div.addClass('qp_media');\r\n        $div.attr('id', 'qp-media');\r\n\r\n        $media.before($div.get(0));\r\n        $div.appendChild($media.get(0));\r\n\r\n        option.renderUI = option[type].renderUI;\r\n\r\n        $div.attr('data-id', option.dataId);\r\n        $div[type + 'player'](option);\r\n        $div.attr('data-media', option.mediaId);\r\n\r\n        return {\r\n            dom: $div,\r\n            instance: $div.data('my.mediaplayer')\r\n        };\r\n    }\r\n\r\n    window.NDMediaPlayer = {\r\n        _$medias: {}, //{data-media|data-id:{data}}\r\n        _eventHandler: {\r\n            play: _emptyFunc,\r\n            mutuallyExclusivePlay: mutuallyExclusivePlay,\r\n            pause: _emptyFunc,\r\n            ended: _emptyFunc,\r\n            timeupdate: _emptyFunc,\r\n            seeked: _emptyFunc,\r\n            volumeChange: _emptyFunc,\r\n            fullScreenChange: _emptyFunc\r\n        },\r\n        _getMedia: function (mediaType, index) {\r\n            var that = this;\r\n            var mediaId = mediaType + '-' + index;\r\n            for (var key in this._$medias) {\r\n                if (that._getKeyMedia(key) === mediaId) {\r\n                    var $media = this._$medias[key];\r\n                    return $media;\r\n                }\r\n            }\r\n            return null;\r\n\r\n        },\r\n        _getKey: function ($renderBody) {\r\n            return $renderBody.attr('data-media') + '|' + $renderBody.attr('data-id');\r\n        },\r\n        _getKeyId: function (key) {\r\n            return key.split('|')[1];\r\n        },\r\n        _getKeyMedia: function (key) {\r\n            return key.split('|')[0];\r\n        },\r\n        _getKeyType: function (key) {\r\n            return key.split('-')[0];\r\n        },\r\n        renderToTarget: function (mediaEle, targetEle, option) {\r\n            var containerEle = document.createElement('div');\r\n            containerEle.appendChild(mediaEle);\r\n\r\n            NDMediaPlayer.render(containerEle, option);\r\n            targetEle.appendChild(containerEle.childNodes[0]);\r\n        },\r\n        renderMediaEle: function (mediaEle, option) {\r\n            var containerEle = document.createElement('div');\r\n            var $containerEle = __Q(containerEle);\r\n            __Q(mediaEle).before(containerEle);\r\n            $containerEle.appendChild(mediaEle);\r\n            NDMediaPlayer.render(containerEle, option);\r\n            $containerEle.before(containerEle.childNodes[0]);\r\n            $containerEle.remove();\r\n        },\r\n        _clear: function (rkey) {\r\n            var that = this;\r\n            if (that._$medias[rkey]) {\r\n                var mediaPlayer = that._$medias[rkey].data('my.mediaplayer');\r\n                if (mediaPlayer) {\r\n                    mediaPlayer.destroy();\r\n                }\r\n                that._$medias[rkey].data('my.mediaplayer', null);\r\n                delete that._$medias[rkey];\r\n            }\r\n        },\r\n        setLoggerLevel: function (level) {\r\n            __Q.logger.setLevel(level);\r\n            imageviewer.setLoggerLevel(level);\r\n        },\r\n        /**\r\n         * 销毁内存对象,并解绑事件\r\n         * @param obj id或view对象。不传直接销毁dom不存在的内存对象\r\n         */\r\n        destroy: function (obj) {\r\n            var that = this;\r\n\r\n            //解绑事件\r\n            for (var key in that._eventHandler) {\r\n                if (key !== 'mutuallyExclusivePlay') {\r\n                    that._eventHandler[key] = _emptyFunc;\r\n                }\r\n            }\r\n\r\n            //清除指定容器内的对象\r\n            if (arguments.length > 0) {\r\n                var type = typeof obj;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + obj);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof undefined) && (obj instanceof jQuery)) {\r\n                        $view = __Q(obj[0]);\r\n                    } else {\r\n                        $view = __Q(obj);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = that._getKey(__Q($renderBodys.get(i)));\r\n                    that._clear(rkey);\r\n                }\r\n            } else {\r\n                //删除不存在dom内的缓存对象\r\n                for (var mediakey in that._$medias) {\r\n                    if (!document.querySelector('[data-id=\"' + that._getKeyId(mediakey) + '\"]')) {\r\n                        that._clear(mediakey);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        reset: function () {\r\n            for (var mediakey in this._$medias) {\r\n                if (this._$medias[mediakey]) {\r\n                    var mediaPlayer = this._$medias[mediakey].data('my.mediaplayer');\r\n                    if (mediaPlayer && mediaPlayer.reset) {\r\n                        mediaPlayer.reset();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setLock: function (lock, view) {\r\n            if (view) {\r\n                var type = typeof view;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + view);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof undefined) && (view instanceof jQuery)) {\r\n                        $view = __Q(view[0]);\r\n                    } else {\r\n                        $view = __Q(view);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = this._getKey(__Q($renderBodys.get(i)));\r\n                    if (this._$medias[rkey]) {\r\n                        var mediaPlayer = this._$medias[rkey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.setLock) {\r\n                            mediaPlayer.setLock(lock);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (var mediakey in this._$medias) {\r\n                    if (this._$medias[mediakey]) {\r\n                        var mediaPlayer = this._$medias[mediakey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.setLock) {\r\n                            mediaPlayer.setLock(lock);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        render: function ($view, option) {\r\n\r\n\r\n            var that = this;\r\n\r\n            //删除缓存\r\n            for (var key in that._$medias) {\r\n                var mediaObj = that._$medias[key].data('my.mediaplayer');\r\n                if (mediaObj && mediaObj.getView && mediaObj.getView()) {\r\n                    if (!mediaObj.getView().parentNode) {\r\n                        that._clear(key);\r\n                    }\r\n                } else if (!document.querySelector('[data-id=\"' + that._getKeyId(key) + '\"]')) {\r\n                    that._clear(key);\r\n                }\r\n            }\r\n\r\n            var option = extendOption(option, {\r\n                eventHandler: that._eventHandler\r\n            });\r\n\r\n            //渲染的多媒体资源\r\n            var instances = {};\r\n\r\n\r\n            var $medias = {};\r\n            var container = $view.length > 0 ? $view[0] : $view;\r\n            var mediaReg = /^img|video|audio$/i;\r\n            if (container.nodeName && mediaReg.test(container.nodeName)) {\r\n                $medias[container.nodeName.toLocaleLowerCase()] = [__Q(container)];\r\n            } else {\r\n                for (var i = 0, l = mediaArry.length; i < l; i++) {\r\n                    $medias[mediaArry[i]] = __Q(container).find(mediaArry[i]);\r\n                }\r\n            }\r\n\r\n            for (var type in $medias) {\r\n                if (!$medias.hasOwnProperty(type)) {\r\n                    continue;\r\n                }\r\n                $medias[type].each(function (index) {\r\n                    if (!option[type].render) {\r\n                        return;\r\n                    }\r\n\r\n                    var isImg = type === 'img',\r\n                        $media = __Q(this),\r\n                        $renderBody = $media.closest('.qp_media');\r\n\r\n                    //已经渲染过，不进行二次渲染\r\n                    if ($renderBody && $renderBody.length > 0 && $renderBody.get(0)) {\r\n                        return;\r\n                    }\r\n\r\n\r\n\r\n                    var newOption = {};\r\n                    //外部有传入index时，使用外部的索引\r\n                    if (typeof option.index == 'undefined' || option.index == null) {\r\n                        newOption = __Q.extend({}, option, {\r\n                            index: option.containerId + '-' + index\r\n                        });\r\n                    } else {\r\n                        newOption = __Q.extend({}, option);\r\n                        newOption.index = newOption.containerId + '-' + newOption.index;\r\n                    }\r\n\r\n                    newOption.dataId = __Q.utils.getRandomId('media');\r\n                    newOption.mediaId = type + '-' + newOption.index;\r\n\r\n                    var instance = null,\r\n                        key = newOption.mediaId + '|' + newOption.dataId\r\n\r\n                    if (isImg) {\r\n                        var imgOption = __Q.extend({}, option.img, {\r\n                            lang: option.lang,\r\n                            eventHandler: option.eventHandler,\r\n                            onFullScreenChange: option.onFullScreenChange\r\n                        });\r\n\r\n                        $media[type + 'player'](imgOption);\r\n                        instance = $media.data('my.mediaplayer');\r\n                        if (instance) {\r\n                            instance.render();\r\n                        }\r\n                        var $insView = __Q(instance.getView())\r\n                        $insView.addClass('qp_media')\r\n\r\n                        $insView.attr('data-id', newOption.dataId);\r\n                        $insView.attr('data-media', type + '-' + newOption.index);\r\n\r\n                        that._$medias[key] = $media;\r\n                    } else {\r\n                        var renderResult = renderAudioVideo($media, type, newOption);\r\n                        instance = renderResult.instance;\r\n                        //存储到全局\r\n                        that._$medias[key] = renderResult.dom;\r\n                    }\r\n\r\n                    if (instance) {\r\n                        instance.setLock(option.lock);\r\n                    }\r\n\r\n                    //返回实例\r\n                    if (option.returnInstances) {\r\n                        instances[key] = instance;\r\n                    }\r\n\r\n\r\n                });\r\n            }\r\n\r\n            if (option.returnInstances) {\r\n                return instances;\r\n            }\r\n        },\r\n        mediaOnStart: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.play = callback;\r\n            }\r\n        },\r\n        mediaOnPause: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.pause = callback;\r\n            }\r\n        },\r\n        mediaOnEnded: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.ended = callback;\r\n            }\r\n        },\r\n        mediaOnTimeupdate: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.timeupdate = callback;\r\n            }\r\n        },\r\n        mediaOnSeeked: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.seeked = callback;\r\n            }\r\n        },\r\n        mediaOnVolumeChange: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.volumeChange = callback;\r\n            }\r\n        },\r\n        getMedia: function (key) {\r\n            if (key) {\r\n                var $media = this._$medias[key];\r\n                return $media;\r\n            } else {\r\n                return this._$medias;\r\n            }\r\n        },\r\n        mediaPlay: function (mediaType, index) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').play();\r\n            }\r\n        },\r\n        mediaPause: function (mediaType, index) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').pause();\r\n            }\r\n        },\r\n        mediaSkip: function (mediaType, index, seeked) {\r\n            var $media = this._getMedia(mediaType, index).find(mediaType);\r\n            if ($media && $media.get(0)) {\r\n                $media.get(0).currentTime = seeked == 0 ? 0.01 : seeked;\r\n            }\r\n        },\r\n        mediaVolumeChange: function (mediaType, index, volume, diaplay) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').changeVolume(volume, diaplay);\r\n            }\r\n        },\r\n        mediaPauseAll: function (obj) {\r\n            var that = this;\r\n            if (typeof obj !== typeof undefined) {\r\n                var type = typeof obj;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + obj);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof undefined) && (obj instanceof jQuery)) {\r\n                        $view = __Q(obj[0]);\r\n                    } else {\r\n                        $view = __Q(obj);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = that._getKey(__Q($renderBodys.get(i)));\r\n                    if (that._$medias[rkey]) {\r\n                        var mediaPlayer = that._$medias[rkey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.pause) {\r\n                            mediaPlayer.pause();\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (var key in that._$medias) {\r\n                    var $media = that._$medias[key];\r\n                    if ($media && $media.get(0) && $media.data('my.mediaplayer') && $media.data('my.mediaplayer').pause) {\r\n                        $media.data('my.mediaplayer').pause();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        mediaOnFullScreenChange: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.fullScreenChange = callback;\r\n            }\r\n        },\r\n        Image: {\r\n            create: function (img, options) {\r\n                return ImagePlayer.Image.create(img, options);\r\n            }\r\n        },\r\n        ImageViewer: {\r\n            create: function (options) {\r\n                return ImagePlayer.Viewer.create(options);\r\n            }\r\n        }\r\n    }\r\n})(window, __Q, imageviewer);\n/**\r\n * Created by Administrator on 2015/12/17.\r\n */\r\n\r\n(function (window, __Q) {\r\n\r\n    //PPT渲染相关API\r\n    window.NDMediaPlayer.PPTMediaRender = {\r\n        videoZIndex: 2,\r\n        mutuallyExclusive: false,\r\n        renderVideoImg: function (ele) {\r\n            var imgSrc = '';\r\n            var imgEle = ele.previousElementSibling;\r\n            if (imgEle) {\r\n                imgEle.style.display = \"none\";\r\n                imgSrc = imgEle.getAttribute('src');\r\n            }\r\n            if (ele.parentNode && ele.parentNode.parentNode) {\r\n                ele.parentNode.parentNode.setAttribute(\"onclick\", '');\r\n                ele.parentNode.parentNode.setAttribute(\"onmouseout\", '');\r\n                ele.parentNode.parentNode.setAttribute(\"onmouseover\", '');\r\n            }\r\n            return imgSrc;\r\n        },\r\n        mediaRenderComplete: function () {\r\n            __Q(document).bind(\"click\", function (e) {\r\n                var $closest = __Q(e.target).closest(\".qp-media-box\");\r\n                if (!$closest || $closest.length === 0) {\r\n                    //隐藏音量控制条\r\n                    var $medias = window.NDMediaPlayer.getMedia();\r\n                    for (var key in $medias) {\r\n                        if ($medias[key].data('my.mediaplayer')) {\r\n                            $medias[key].data('my.mediaplayer').hideVolumeControl();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (window.parent && window.parent.PPTMediaPlayer && window.parent.PPTMediaPlayer.renderMediaComplete) {\r\n                window.parent.PPTMediaPlayer.renderMediaComplete(window.NDMediaPlayer);\r\n            }\r\n        },\r\n        renderVideo: function (videoEle, containerEle, index, poster) {\r\n            videoEle.setAttribute('poster', poster);\r\n            window.NDMediaPlayer.renderToTarget(videoEle, containerEle, {\r\n                onlyRender: false,\r\n                autoAdaptSize: true,\r\n                mutuallyExclusive: NDMediaPlayer.PPTMediaRender.mutuallyExclusive,\r\n                mediaMargin: '0px',\r\n                audio:{\r\n                    render:false\r\n                },\r\n                video: {\r\n                    showPlayBtnInVideo: false,\r\n                    supportFullscreen:false\r\n                },\r\n                index: index,\r\n                _onPlay: function () {\r\n                    if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                        var $medias = window.NDMediaPlayer.getMedia();\r\n                        for (var key in $medias) {\r\n                            if (window.NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                $medias[key].hide();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n        },\r\n        renderAudio: function (audioEle, containerEle, index) {\r\n            var zIndexCls = 'qp_media_ppt_zindex';\r\n            window.NDMediaPlayer.renderToTarget(audioEle, containerEle, {\r\n                    onlyRender: false,\r\n                    autoAdaptSize: true,\r\n                    mutuallyExclusive: NDMediaPlayer.PPTMediaRender.mutuallyExclusive,\r\n                    index: index,\r\n                    style: 'display:none;z-index:' + NDMediaPlayer.PPTMediaRender.videoZIndex,\r\n                    mediaMargin: '0px',\r\n                    video: {\r\n                        render: false\r\n                    },\r\n                    audio: {\r\n                        width: 220,\r\n                        height: 80\r\n                    },\r\n                    _onEnd: function (o) {\r\n                        var $media = window.NDMediaPlayer._getMedia(o.mediaType, o.index);\r\n                        if ($media) {\r\n                            $media.hide();\r\n                            if ($media.get(0).parentNode) {\r\n                                __Q($media.get(0).parentNode).css('zIndex','');\r\n                            }\r\n                        }\r\n                    },\r\n                    _onPlay: function (o) {\r\n                        if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                            var $medias = NDMediaPlayer.getMedia();\r\n                            for (var key in $medias) {\r\n                                if (NDMediaPlayer._getKeyMedia(key) !== (o.mediaType + '-' + o.index) && NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                    $medias[key].hide();\r\n                                    if ($medias[key].parentNode) {\r\n                                        __Q($medias[key].parentNode).css('zIndex','');\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            var $img = __Q(containerEle).find('img');\r\n            if ($img && $img.length > 0 && $img.get(0).parentNode) {\r\n                (function ($img) {\r\n                    var $pNode = __Q($img.get(0).parentNode);\r\n\r\n                    $pNode.attr('onclick', '');\r\n                    $pNode.attr(\"onmouseout\", '');\r\n                    $pNode.attr(\"onmouseover\", '');\r\n                    $pNode.addClass($pNode.attr('id'));\r\n                    var on = 'on';\r\n                    var currentKey = '';\r\n                    if ($img.get(0).nextElementSibling) {\r\n                        currentKey = NDMediaPlayer._getKey(__Q($img.get(0).nextElementSibling));\r\n                    }\r\n                    if (!currentKey) {\r\n                        return;\r\n                    }\r\n                    var $m = window.NDMediaPlayer.getMedia(currentKey);\r\n                    var mOper = $m.data('my.mediaplayer');\r\n                    var $contentHolder = __Q('#contentHolder');\r\n                    var $audioView = $m.find('.qp-media-box');\r\n\r\n                    var located = false;\r\n                    var locat = function () {\r\n                        if (located) {\r\n                            return;\r\n                        }\r\n                        located = true;\r\n                        var pNodeOffset = $pNode.offset(), holderOffset = $contentHolder.offset(),\r\n                            scale = mOper.getScale(),\r\n                            audioWidth = $audioView.width(), audioHeight = $audioView.height(),\r\n                            pNodeWidth = $pNode.width(), pNodeHeight = $pNode.height();\r\n\r\n                        var left = pNodeOffset.left - (scale * audioWidth / 2 - scale * pNodeWidth / 2) - holderOffset.left;\r\n                        var right = pNodeOffset.left + scale * audioWidth / 2 + scale * pNodeWidth / 2 - (holderOffset.left + $contentHolder.width());\r\n                        var bottom = pNodeOffset.top + pNodeHeight * scale + mOper.getScale() * audioHeight - (holderOffset.top + $contentHolder.height());\r\n                        //scale内部按原大小处理，不需要缩放\r\n\r\n                        if (left < 0) {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2 + left / scale) + \"px\");\r\n                        } else if (right > 0) {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2 + right / scale) + \"px\");\r\n                        } else {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2) + \"px\");\r\n                        }\r\n                        if (bottom > 0) {\r\n                            $m.css('bottom', pNodeHeight / (__Q.support.touch ? 1 : 1.5) + \"px\");\r\n                        } else {\r\n                            $m.css('top', pNodeHeight / (__Q.support.touch ? 1 : 1.5) + \"px\");\r\n                        }\r\n                    };\r\n\r\n                    $img[on]('click', '', function () {\r\n                        if (mOper.isPlaying()) {\r\n                            mOper.pause();\r\n                            $m.hide();\r\n                            $pNode.css('zIndex','');\r\n                        } else {\r\n                            mOper.play();\r\n                            $m.show();\r\n                            //修复transform引起的zIndex层级覆盖问题\r\n                            $pNode.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                            locat();\r\n                            if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                                var $medias = window.NDMediaPlayer.getMedia();\r\n                                for (var key in $medias) {\r\n                                    if (key !== currentKey && NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                        $medias[key].hide();\r\n                                        $pNode.css('zIndex','');\r\n                                        $medias[key].data('my.mediaplayer').pause();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    if (!__Q.support.touch) {\r\n                        $img[on]('mouseover', '', function (e) {\r\n                            if (__Q.event.checkHover(e, this)) {\r\n                                $m.show();\r\n                                $pNode.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                                $m.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                                locat();\r\n                            }\r\n                        });\r\n                    }\r\n                    $pNode[on]('mouseout', '', function (e) {\r\n                        if (__Q.event.checkHover(e, this)) {\r\n                            if (!mOper.isPlaying()) {\r\n                                $m.hide();\r\n                                //$pNode.removeClass(zIndexCls);\r\n                                $pNode.css('zIndex','');\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    __Q(document).bind(\"click\", function (e) {\r\n                        var $closest = __Q(e.target).closest(\".\" + $pNode.attr('id'));\r\n                        if (!$closest || $closest.length === 0) {\r\n                            if (!mOper.isPlaying()) {\r\n                                $m.hide();\r\n                                //$pNode.removeClass(zIndexCls);\r\n                                $pNode.css('zIndex','');\r\n                            }\r\n                        }\r\n                    });\r\n                })\r\n                ($img);\r\n            }\r\n        }\r\n    };\r\n\r\n})(window, __Q);\r\n})(window,document)"]}