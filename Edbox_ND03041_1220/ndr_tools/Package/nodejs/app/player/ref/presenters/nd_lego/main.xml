<?xml version='1.0' encoding='UTF-8'?>
<addon id="templateid"><properties/><dependencies><jsDependency><javaScript name="threejs" version="73.1"/><javaScript name="threejs_canvasrender" version="73.1"/><javaScript name="threejs_projector" version="73.1"/></jsDependency></dependencies><css><![CDATA[.exam_skin_wood .ui_btn_handle{display:inline-block;margin:0 .75em;padding:0 1.41667em;height:3.16667em;line-height:3.16667em;border:1px solid #397274;background:-webkit-linear-gradient(bottom,#e9e9e9,#fff);background:linear-gradient(0deg,#e9e9e9 0,#fff);text-align:center;vertical-align:middle;border-radius:.41667em}.exam_skin_wood .ui_btn_handle .ui_btn_handle_text{font-size:1.5em;color:#384650}.exam_skin_wood .ui_btn_handle:active{background:-webkit-linear-gradient(bottom,#76b8ba,#89c5c7);background:linear-gradient(0deg,#76b8ba 0,#89c5c7)}.exam_skin_wood .ui_btn_handle:active .ui_btn_handle_text{color:#fff}.exam_skin_wood .ui_btn_handle.ui_btn_disabled{background:-webkit-linear-gradient(top,#e9e9e9,#fff);background:linear-gradient(180deg,#e9e9e9 0,#fff)}.exam_skin_wood .ui_btn_handle.ui_btn_disabled .ui_btn_handle_text{color:#9da7ae}.exam_skin_wood .fontana_box{background:#bfd3e2;width:100%;height:100%;padding:6.66667em 0;position:relative;text-align:center}.exam_skin_wood .fontana_inner{width:66.75em;height:32.08333em;position:absolute;left:50%;top:50%;margin-left:-33.375em;margin-top:-16.04167em}.exam_skin_wood .fontana_mask{position:fixed;top:0;right:0;bottom:0;left:0;background:rgba(0,0,0,.01);z-index:9999;text-align:center;vertical-align:middle}.exam_skin_wood .fontana_modal{width:33.58333em;height:20.08333em;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto;background:rgba(47,47,47,.812);border-radius:10px;text-align:center}.exam_skin_wood .fontana_modal .clear_tips{padding:6.08333em 0}.exam_skin_wood .fontana_modal .clear_tips span{font-size:2em;color:#fff}.exam_skin_wood .fontana_modal a{min-width:8.66667em;margin:0 1.25em}.exam_skin_wood .fontana_main{width:41.75em;height:32.08333em;float:left;background:#b4c9d9;border-radius:.41667em;margin-right:1.04167em;padding-bottom:7.08333em}.exam_skin_wood .fontana_main .main_content{width:100%;height:25em;overflow:hidden;position:relative}.exam_skin_wood .fontana_main .main_content .btn_rotate_lf{width:3.66667em;height:3.66667em;border:1px solid #397274;overflow:hidden;position:absolute;left:2.91667em;top:50%;margin-top:-1.83333em;border-radius:.41667em;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e9e9e9));background:-moz-linear-gradient(top,#fff,#e9e9e9)}.exam_skin_wood .fontana_main .main_content .btn_rotate_lf b{width:1.875em;height:1.70833em;position:absolute;left:50%;top:50%;margin-top:-.83333em;margin-left:-.85417em;background-image:url(resources/wood/images/rotate_lf_btn.png);background-size:100% 100%}.exam_skin_wood .fontana_main .main_content .btn_rotate_lf:active{background:-webkit-gradient(linear,left top,left bottom,from(#89c5c7),to(#89c5c7));background:-moz-linear-gradient(top,#89c5c7,#89c5c7)}.exam_skin_wood .fontana_main .main_content .btn_rotate_lf:active b{background-image:url(resources/wood/images/rotate_lf_btn_active.png)}.exam_skin_wood .fontana_main .main_content .btn_rotate_rt{width:3.66667em;height:3.66667em;border:1px solid #397274;overflow:hidden;position:absolute;right:2.91667em;top:50%;margin-top:-1.83333em;border-radius:.41667em;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e9e9e9));background:-moz-linear-gradient(top,#fff,#e9e9e9)}.exam_skin_wood .fontana_main .main_content .btn_rotate_rt b{width:1.875em;height:1.70833em;position:absolute;left:50%;top:50%;margin-top:-.83333em;margin-left:-.85417em;background-image:url(resources/wood/images/rotate_rt_btn.png);background-size:100% 100%}.exam_skin_wood .fontana_main .main_content .btn_rotate_rt:active{background:-webkit-gradient(linear,left top,left bottom,from(#89c5c7),to(#89c5c7));background:-moz-linear-gradient(top,#89c5c7,#89c5c7)}.exam_skin_wood .fontana_main .main_content .btn_rotate_rt:active b{background-image:url(resources/wood/images/rotate_rt_btn_active.png)}.exam_skin_wood .fontana_main .main_content .btn_delete{width:3.66667em;height:3.66667em;border:1px solid #397274;overflow:hidden;position:absolute;right:2.91667em;top:21.91667em;margin-top:-1.83333em;border-radius:.41667em;background:-webkit-gradient(linear,left top,left bottom,from(#fff),to(#e9e9e9));background:-moz-linear-gradient(top,#fff,#e9e9e9)}.exam_skin_wood .fontana_main .main_content .btn_delete b{width:1.79167em;height:1.875em;position:absolute;left:50%;top:50%;margin-top:-.83333em;margin-left:-.85417em;background-image:url(resources/wood/images/delete_btn.png);background-size:100% 100%}.exam_skin_wood .fontana_main .main_content .btn_delete:active{background:-webkit-gradient(linear,left top,left bottom,from(#89c5c7),to(#89c5c7));background:-moz-linear-gradient(top,#89c5c7,#89c5c7)}.exam_skin_wood .fontana_main .main_content .btn_delete:active b{background-image:url(resources/wood/images/delete_btn_active.png)}.exam_skin_wood .fontana_main .main_content .btn_delete.disabled{background:-webkit-gradient(linear,left top,left bottom,from(#c8d1d7),to(#c1c8cc));background:-moz-linear-gradient(top,#c1c8cc,#c8d1d7);border-color:#93989a;cursor:not-allowed}.exam_skin_wood .fontana_main .main_content .btn_delete.disabled b{background-image:url(resources/wood/images/delete_btn_disabled.png)}.exam_skin_wood .fontana_main .main_tool_hanle{height:7.08333em;padding:1.875em 2.08333em 0;text-align:left;background:url(resources/wood/images/line_bg.png) repeat-x 0 0}.exam_skin_wood .fontana_main .main_tool_hanle .ui_btn_handle.last{float:right;margin-right:0}.exam_skin_wood .fontana_aside{width:23.95833em;height:32.08333em;overflow:hidden;float:right;background:#b4c9d9;border-radius:.41667em;position:relative}.exam_skin_wood .fontana_aside .cell_up{height:25em;overflow:hidden}.exam_skin_wood .fontana_aside .num_handle_down{height:7.08333em;padding:1.875em 0 0;background:url(resources/wood/images/line_bg.png) repeat-x 0 0;text-align:center}.exam_skin_wood .fontana_aside .num_handle_down .detail{border:1px solid #397274;border-radius:.41667em;display:inline-block;background:#f0f0f0;overflow:hidden}.exam_skin_wood .fontana_aside .num_handle_down .detail a{position:relative;width:3.83333em;height:3em;float:left;background:-webkit-linear-gradient(bottom,#e9e9e9,#fff);background:linear-gradient(0deg,#e9e9e9 0,#fff)}.exam_skin_wood .fontana_aside .num_handle_down .detail a:active{background:-webkit-linear-gradient(bottom,#76b8ba,#89c5c7);background:linear-gradient(0deg,#76b8ba 0,#89c5c7)}.exam_skin_wood .fontana_aside .num_handle_down .detail a:active.sign span{background-image:url(resources/wood/images/icon_sign_hover.png)}.exam_skin_wood .fontana_aside .num_handle_down .detail a:active.plus span{background-image:url(resources/wood/images/icon_plus_hover.png)}.exam_skin_wood .fontana_aside .num_handle_down .detail a span{width:1.54167em;height:1.54167em;position:absolute;left:50%;top:50%;margin-left:-.77083em;margin-top:-.77083em;background-size:100% 100%;background-repeat:no-repeat;background-position:top}.exam_skin_wood .fontana_aside .num_handle_down .detail a.sign{border-right:1px solid #397274}.exam_skin_wood .fontana_aside .num_handle_down .detail a.sign span{background-image:url(resources/wood/images/icon_sign.png)}.exam_skin_wood .fontana_aside .num_handle_down .detail a.plus{border-left:1px solid #397274}.exam_skin_wood .fontana_aside .num_handle_down .detail a.plus span{background-image:url(resources/wood/images/icon_plus.png)}.exam_skin_wood .fontana_aside .num_handle_down .detail .ipt_text{width:3.54167em;height:3em;line-height:3em;overflow:hidden;float:left;text-align:center;box-shadow:inset 0 2px 10px rgba(11,110,29,.2);background:-webkit-gradient(linear,left top,left bottom,from(#e4f9ff),to(#fdffff));background:-moz-linear-gradient(top,#e4f9ff,#fdffff)}.exam_skin_wood .fontana_aside .num_handle_down .detail .ipt_text b{font-size:2.08333em;color:#5eb1b2;font-weight:400}.exam_skin_wood .fontana_aside .square_tbl_wrapper{position:relative;width:17em;margin:4.16667em auto 0;overflow:hidden}.exam_skin_wood .fontana_aside .square_tbl{position:relative;z-index:1;padding:3px}.exam_skin_wood .fontana_aside .square_tbl li{float:left;width:4.25em;height:4.25em;line-height:4.25em;padding:2px;overflow:hidden;border:2px solid #718a9d;margin-left:-2px;margin-top:-2px;position:relative;background:#fff;cursor:pointer}.exam_skin_wood .fontana_aside .square_tbl li b{font-size:2.5em;font-weight:400;position:absolute;left:0;top:0;right:0;bottom:0;margin:auto}.exam_skin_wood .fontana_aside .square_tbl li:before{content:"";width:100%;height:100%;box-sizing:border-box;position:absolute;left:0;top:0;border:.16667em solid transparent}.exam_skin_wood .fontana_aside .square_tbl li.num1,.exam_skin_wood .fontana_aside .square_tbl li.num2,.exam_skin_wood .fontana_aside .square_tbl li.num3,.exam_skin_wood .fontana_aside .square_tbl li.num4{color:#fff;cursor:pointer}.exam_skin_wood .fontana_aside .square_tbl li.num1{background:#6fb3e7}.exam_skin_wood .fontana_aside .square_tbl li.num2{background:#77c055}.exam_skin_wood .fontana_aside .square_tbl li.num3{background:#f2d24e}.exam_skin_wood .fontana_aside .square_tbl li.num4{background:#f5767a}.exam_skin_wood .fontana_aside .square_tbl li.num0.active,.exam_skin_wood .fontana_aside .square_tbl li.num0:active{z-index:1}.exam_skin_wood .fontana_aside .square_tbl li.num0.active:before,.exam_skin_wood .fontana_aside .square_tbl li.num0:active:before{border:.125em solid #718a9d}.exam_skin_wood .fontana_aside .square_tbl li.active,.exam_skin_wood .fontana_aside .square_tbl li:active{z-index:1}.exam_skin_wood .fontana_aside .square_tbl li.active:before,.exam_skin_wood .fontana_aside .square_tbl li:active:before{border:.16667em solid #fff}.exam_skin_wood .fontana_aside .square_tbl li.active.num1,.exam_skin_wood .fontana_aside .square_tbl li.active.num2,.exam_skin_wood .fontana_aside .square_tbl li.active.num3,.exam_skin_wood .fontana_aside .square_tbl li.active.num4{color:#fff;cursor:pointer}.exam_skin_wood .fontana_aside .square_tbl li.active.num1:first-child,.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(2),.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(3),.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(4),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:first-child,.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(2),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(3),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(4),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:first-child,.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(2),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(3),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(4),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:first-child,.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(2),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(3),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(4){margin-top:0;border-top-width:2px}.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(13),.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(14),.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(15),.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(16),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(13),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(14),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(15),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(16),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(13),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(14),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(15),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(16),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(13),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(14),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(15),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(16){border-bottom-width:2px}.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(4n+1),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(4n+1),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(4n+1),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(4n+1){border-left-width:2px;margin-left:0}.exam_skin_wood .fontana_aside .square_tbl li.active.num1:nth-child(4n),.exam_skin_wood .fontana_aside .square_tbl li.active.num2:nth-child(4n),.exam_skin_wood .fontana_aside .square_tbl li.active.num3:nth-child(4n),.exam_skin_wood .fontana_aside .square_tbl li.active.num4:nth-child(4n){border-right-width:2px}.exam_skin_wood .fontana_aside .square_tbl li.active.num1{background:#419be1}.exam_skin_wood .fontana_aside .square_tbl li.active.num2{background:#4a9f22}.exam_skin_wood .fontana_aside .square_tbl li.active.num3{background:#efba00}.exam_skin_wood .fontana_aside .square_tbl li.active.num4{background:#e73c3c}.exam_skin_wood .fontana_aside .square_tbl li:first-child,.exam_skin_wood .fontana_aside .square_tbl li:nth-child(2),.exam_skin_wood .fontana_aside .square_tbl li:nth-child(3),.exam_skin_wood .fontana_aside .square_tbl li:nth-child(4){margin-top:0;border-top-width:2px}.exam_skin_wood .fontana_aside .square_tbl li:nth-child(13),.exam_skin_wood .fontana_aside .square_tbl li:nth-child(14),.exam_skin_wood .fontana_aside .square_tbl li:nth-child(15),.exam_skin_wood .fontana_aside .square_tbl li:nth-child(16){border-bottom-width:2px}.exam_skin_wood .fontana_aside .square_tbl li:nth-child(4n+1){border-left-width:2px;margin-left:0}.exam_skin_wood .fontana_aside .square_tbl li:nth-child(4n){border-right-width:2px}.typefaces_long .exam_skin_wood .main_tool_hanle .ui_btn_handle{height:3.125em;line-height:1;max-width:6.66667em;padding:0 .20833em}.typefaces_long .exam_skin_wood .main_tool_hanle .ui_btn_handle .ui_btn_handle_text{margin-top:.08333em;font-size:1.16667em;line-height:1.2;width:auto;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.typefaces_long .exam_skin_wood .main_tool_hanle .ui_btn_handle:last-of-type{max-width:8.33333em}.typefaces_long .exam_skin_wood .fontana_modal .clear_tips{padding:5em 2em}.typefaces_long .exam_skin_wood .fontana_modal .clear_tips span{line-height:1.3}.typefaces_ru_RU .exam_skin_wood .main_tool_hanle .ui_btn_handle{height:3.125em;line-height:1;max-width:6.66667em;padding:0 .20833em}.typefaces_ru_RU .exam_skin_wood .main_tool_hanle .ui_btn_handle .ui_btn_handle_text{margin-top:.08333em;font-size:1.16667em;line-height:1.2;width:auto;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.typefaces_ru_RU .exam_skin_wood .main_tool_hanle .ui_btn_handle:last-of-type{max-width:8.33333em}.typefaces_ru_RU .exam_skin_wood .fontana_modal .clear_tips{padding:5em 2em}.typefaces_ru_RU .exam_skin_wood .fontana_modal .clear_tips span{line-height:1.3}]]></css><view><![CDATA[<div class="exam_skin_wood cannot_select"><div class="fontana_box"><div class="fontana_inner"><div class="fontana_main js-lego-canvas"><div class="main_content"><a href="javascript:;" class="rotation-control btn_rotate_lf _js_keep_focus"><b></b></a><div class="canvasbox"><div class="main"></div></div><a href="javascript:;" class="rotation-control btn_rotate_rt _js_keep_focus"><b></b></a> <a href="javascript:;" class="btn_delete _js_fontana_clear _js_keep_focus"><b></b></a></div><div class="main_tool_hanle"><a class="ui_btn_handle btn-left-view _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text">左 面</span> </a><a class="ui_btn_handle btn-front-view _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text">正 面</span> </a><a class="ui_btn_handle btn-vertical-view _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text">上 面</span> </a><a class="ui_btn_handle last btn-origin-view _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text">原视角</span></a></div></div><div class="fontana_aside"><div class="js-lego-view-panel"></div></div></div></div><div class="fontana_mask hide_dom _js_fontana_mask"><div class="fontana_modal"><p class="clear_tips"><span class="i18n_clear">是否一键删除已设置的方块？</span></p><a class="ui_btn_handle active _js_fontana_sure _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text i18n_sure">确定</span> </a><a class="ui_btn_handle active _js_fontana_cancel _js_keep_focus" href="javascript:;"><span class="ui_btn_handle_text i18n_cancel">取消</span></a></div></div></div>]]></view><presenter><![CDATA[/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("__webpack_require__(1);\nmodule.exports = __webpack_require__(2);\n\n\n//////////////////\n// WEBPACK FOOTER\n// multi main\n// module id = 0\n// module chunks = 0\n//# sourceURL=webpack:///multi_main?");

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.Addonnd_lego_create = function () {\n  return _presenter2.default;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/presenter.js\n// module id = 1\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/presenter.js?");

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _run = __webpack_require__(3);\n\nvar _run2 = _interopRequireDefault(_run);\n\nvar _setState = __webpack_require__(41);\n\nvar _setState2 = _interopRequireDefault(_setState);\n\nvar _saveState = __webpack_require__(42);\n\nvar _saveState2 = _interopRequireDefault(_saveState);\n\nvar _getState = __webpack_require__(43);\n\nvar _getState2 = _interopRequireDefault(_getState);\n\nvar _pageChange = __webpack_require__(44);\n\nvar _pageChange2 = _interopRequireDefault(_pageChange);\n\nvar _pageLeave = __webpack_require__(45);\n\nvar _pageLeave2 = _interopRequireDefault(_pageLeave);\n\nvar _getService = __webpack_require__(46);\n\nvar _getService2 = _interopRequireDefault(_getService);\n\nvar _setPlayerController = __webpack_require__(48);\n\nvar _setPlayerController2 = _interopRequireDefault(_setPlayerController);\n\nvar _onEventReceived = __webpack_require__(49);\n\nvar _onEventReceived2 = _interopRequireDefault(_onEventReceived);\n\nvar _pageShow = __webpack_require__(50);\n\nvar _pageShow2 = _interopRequireDefault(_pageShow);\n\nvar _destroy = __webpack_require__(51);\n\nvar _destroy2 = _interopRequireDefault(_destroy);\n\nvar _setUrlParams = __webpack_require__(52);\n\nvar _setUrlParams2 = _interopRequireDefault(_setUrlParams);\n\nvar _setBasePath = __webpack_require__(53);\n\nvar _setBasePath2 = _interopRequireDefault(_setBasePath);\n\nvar _runtime = __webpack_require__(54);\n\nvar _interface = __webpack_require__(55);\n\nvar _interface2 = _interopRequireDefault(_interface);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import createPreview from './presenter/createPreview'\nexports.default = {\n\trun: _run2.default,\n\t//createPreview,\n\tsaveState: _saveState2.default,\n\tsetState: _setState2.default,\n\tgetState: _getState2.default,\n\tinitProjectionMobile: _runtime.initProjectionMobile,\n\tsetPlayerController: _setPlayerController2.default,\n\tonEventReceived: _onEventReceived2.default,\n\tdestroy: _destroy2.default,\n\tsetUrlParams: _setUrlParams2.default,\n\tinitTeacherMobile: _runtime.initTeacherMobile,\n\tinitStudentMobile: _runtime.initStudentMobile,\n\tinitWeb: _runtime.initWeb,\n\tinitTeacherPc: _runtime.initTeacherPc,\n\tgetService: _getService2.default,\n\t__interface: _interface2.default,\n\tmetaInfo: {\n\t\tname: \"nd_lego\",\n\t\ttype: PresenterType.PRESENTER_COMPONENT\n\t}\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter.js\n// module id = 2\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter.js?");

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = run;\n\nvar _presenterLogic = __webpack_require__(4);\n\nvar _presenterLogic2 = _interopRequireDefault(_presenterLogic);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _bindEvent = __webpack_require__(40);\n\nvar _bindEvent2 = _interopRequireDefault(_bindEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction run(view, model) {\n  // presenterLogic(view, model, false);\n  return window.I18nManager.getInstance().loadLanguage('nd_lego', _presenter2.default.langType).done(function (data) {\n    _presenter2.default._i18n = data.lang;\n    (0, _presenterLogic2.default)(view, model, false);\n    (0, _bindEvent2.default)();\n  });\n} /**\r\n   * 运行环境下, 初始化Module的方法\r\n   * @param view 运行视图(DOM对象)\r\n   * @param model Module的模型, Key-Value结构\r\n   * @remark 该方法为Module生命周期方法,仅在Module初始化时执行一次\r\n   */\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/run.js\n// module id = 3\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/run.js?");

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (view, model, isPreview) {\n  var $ = window.$;\n  var $view = $(view);\n  // 将 model 值赋给 this\n  _presenter2.default.model = model;\n  // 将 view 赋值给 this\n  _presenter2.default.view = view;\n\n  //create prespectiveView\n  _presenter2.default.perspectiveViewHelper = new _PerspectiveViewHelper2.default();\n  _presenter2.default.perspectiveViewHelper.createPerspectiveView($view);\n\n  (0, _setLanguage2.default)();\n\n  if (_presenter2.default.isWeb) {\n    $view.find('.js-lego-view').removeClass('is-hide');\n  }\n  var gridArr = (0, _normalize2.default)(_presenter2.default.perspectiveViewHelper.gridData.getGridCubeArr());\n  gridArr[0].active = true;\n  _cacheVnode2.default.current = $view.find('.js-lego-view-panel').get(0);\n  (0, _main2.default)(gridArr, _cacheVnode2.default.current, _counterList2.default);\n\n  // 初始预设载入\n  var initGridData = {\n    gridCubeArr: [[0, 0, 0, 0], [1, 0, 0, 0], [1, 1, 1, 0], [0, 0, 0, 0]],\n    // gridCubeArr: [\n    //   [4, 4, 4, 4],\n    //   [3, 3, 3, 3],\n    //   [2, 2, 2, 2],\n    //   [1, 1, 1, 1]\n    // ],\n    // gridCubeArr: [\n    //   [4, 4, 0, 0],\n    //   [1, 0, 4, 4],\n    //   [1, 1, 1, 0],\n    //   [4, 0, 4, 0]\n    // ],\n    highlightPosition: {\n      row: -1,\n      column: -1\n    }\n  };\n  _presenter2.default.perspectiveViewHelper.initCubeData(initGridData);\n\n  // 学生端初始化数据\n  if (model.__ExtendModel && !$.isEmptyObject(model.__ExtendModel)) {\n    try {\n      var content = model.__ExtendModel;\n      if (content.modalActive) {\n        $('._js_fontana_mask').removeClass('hide_dom');\n      } else {\n        $('._js_fontana_mask').addClass('hide_dom');\n      }\n      if (content.clearDisabled) {\n        $('._js_fontana_clear').addClass('disabled');\n      } else {\n        $('._js_fontana_clear').removeClass('disabled');\n      }\n      _presenter2.default.perspectiveViewHelper.visual = content.visual;\n      if (content.playing) {\n        console.log('playing....');\n        _presenter2.default.perspectiveViewHelper.initCubeData(content.data.gridData, content.data.gridRotation, content.data.cameraPosition);\n        _presenter2.default.perspectiveViewHelper.setCubeStatus(content.animateData.targetRotation, content.animateData.targetY, content.animateData.isYFirst, content.animateData.overrideRotation, content.visual);\n      } else {\n        console.log('no play');\n        _presenter2.default.perspectiveViewHelper.initCubeData(content.data.gridData, content.data.gridRotation, content.data.cameraPosition);\n        _presenter2.default.perspectiveViewHelper.changeLightColor(content.visual);\n      }\n    } catch (e) {}\n  }\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _handleCallback = __webpack_require__(5);\n\nvar _handleCallback2 = _interopRequireDefault(_handleCallback);\n\nvar _bar = __webpack_require__(6);\n\nvar _bar2 = _interopRequireDefault(_bar);\n\nvar _patch = __webpack_require__(13);\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nvar _main = __webpack_require__(12);\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _normalize = __webpack_require__(20);\n\nvar _normalize2 = _interopRequireDefault(_normalize);\n\nvar _cacheVnode = __webpack_require__(19);\n\nvar _cacheVnode2 = _interopRequireDefault(_cacheVnode);\n\nvar _counterList = __webpack_require__(21);\n\nvar _counterList2 = _interopRequireDefault(_counterList);\n\nvar _PerspectiveViewHelper = __webpack_require__(30);\n\nvar _PerspectiveViewHelper2 = _interopRequireDefault(_PerspectiveViewHelper);\n\nvar _setLanguage = __webpack_require__(39);\n\nvar _setLanguage2 = _interopRequireDefault(_setLanguage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/presenterLogic.js\n// module id = 4\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/presenterLogic.js?");

/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (eventData) {\n\tif (typeof eventData.value === 'undefined') {\n\t\treturn;\n\t}\n\t// 显示方块塔\n\t$(_presenter2.default.view).find('.js-lego-view').removeClass('is-hide');\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/handleCallback.js\n// module id = 5\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/handleCallback.js?");

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _h = __webpack_require__(7);\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _reset = __webpack_require__(10);\n\nvar _reset2 = _interopRequireDefault(_reset);\n\nvar _throttle = __webpack_require__(29);\n\nvar _throttle2 = _interopRequireDefault(_throttle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// 定义拖动开关\n/* global $ */\n/**\r\n @author 陈小锋 2015-11-11\r\n 可拖动的标题栏\r\n */\nvar dragging = false;\nvar moveableObj = null;\nvar moveableObjTransformXY = null;\nvar downPoint = null;\nvar handleClick = function handleClick(e) {\n  // 阻止事件冒泡到父节点\n  e.stopPropagation();\n  (0, _reset2.default)();\n  // 隐藏 view\n  $(_presenter2.default.view).find('.js-lego-view').addClass('is-hide');\n};\n// 按下鼠标\nvar handleMousedown = function handleMousedown(e) {\n  e.preventDefault();\n  dragging = true;\n  // mouseup 与 mousemove 事件由 view 监听\n  _presenter2.default.view.addEventListener('mousemove', handleMousemove);\n  _presenter2.default.view.addEventListener('touchmove', handleMousemove);\n  _presenter2.default.view.addEventListener('touchend', handleMouseup);\n  _presenter2.default.view.addEventListener('mouseup', handleMouseup);\n  moveableObj = $(_presenter2.default.view).find('.js-lego-view').get(0);\n  if ($(moveableObj).css('transform') === 'none') return;\n\n  var transformXY = $(moveableObj).css('transform').split('(')[1].split(')')[0].split(',');\n  moveableObjTransformXY = {\n    x: parseInt(transformXY[4], 10),\n    y: parseInt(transformXY[5], 10)\n  };\n  downPoint = {\n    x: e.clientX || e.touches[0].clientX,\n    y: e.clientY || e.touches[0].clientY\n  };\n};\n// 释放鼠标，清理\nvar handleMouseup = function handleMouseup(e) {\n  dragging = false;\n  moveableObj = null;\n  moveableObjTransformXY = null;\n  _presenter2.default.view.removeEventListener('touchend', handleMouseup);\n  _presenter2.default.view.removeEventListener('mouseup', handleMouseup);\n  _presenter2.default.view.removeEventListener('touchmove', handleMousemove);\n  _presenter2.default.view.removeEventListener('mousemove', handleMousemove);\n};\n// 移动鼠标\nvar handleMousemove = function handleMousemove(e) {\n  if (!dragging || !moveableObj || !downPoint || !moveableObjTransformXY) {\n    return;\n  }\n  e.preventDefault();\n  var deltaX = (e.clientX || e.touches[0].clientX) - downPoint.x;\n  var deltaY = (e.clientY || e.touches[0].clientY) - downPoint.y;\n  var transformValue = 'translateX(' + (moveableObjTransformXY.x + deltaX) + 'px) translateY(' + (moveableObjTransformXY.y + deltaY) + 'px) translateZ(0)';\n  moveableObj.style.transform = transformValue;\n};\nvar bar = (0, _h2.default)('div', {\n  class: {\n    'lego-view__titleBar': true\n  },\n  on: {\n    mousedown: handleMousedown,\n    touchstart: handleMousedown\n  }\n}, [(0, _h2.default)('a', {\n  props: {\n    href: '#',\n    title: '点击关闭窗口'\n  },\n  on: {\n    click: handleClick,\n    touchstart: handleClick\n  },\n  class: {\n    'lego-view__closeButton': true\n  }\n}, 'x')]);\nexports.default = bar;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/bar.js\n// module id = 6\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/bar.js?");

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	eval("var VNode = __webpack_require__(8);\nvar is = __webpack_require__(9);\n\nfunction addNS(data, children) {\n  data.ns = 'http://www.w3.org/2000/svg';\n  if (children !== undefined) {\n    for (var i = 0; i < children.length; ++i) {\n      addNS(children[i].data, children[i].children);\n    }\n  }\n}\n\nmodule.exports = function h(sel, b, c) {\n  var data = {}, children, text, i;\n  if (arguments.length === 3) {\n    data = b;\n    if (is.array(c)) { children = c; }\n    else if (is.primitive(c)) { text = c; }\n  } else if (arguments.length === 2) {\n    if (is.array(b)) { children = b; }\n    else if (is.primitive(b)) { text = b; }\n    else { data = b; }\n  }\n  if (is.array(children)) {\n    for (i = 0; i < children.length; ++i) {\n      if (is.primitive(children[i])) children[i] = VNode(undefined, undefined, undefined, children[i]);\n    }\n  }\n  if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g') {\n    addNS(data, children);\n  }\n  return VNode(sel, data, children, text, undefined);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/h.js\n// module id = 7\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/h.js?");

/***/ },
/* 8 */
/***/ function(module, exports) {

	eval("module.exports = function(sel, data, children, text, elm) {\n  var key = data === undefined ? undefined : data.key;\n  return {sel: sel, data: data, children: children,\n          text: text, elm: elm, key: key};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/vnode.js\n// module id = 8\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/vnode.js?");

/***/ },
/* 9 */
/***/ function(module, exports) {

	eval("module.exports = {\n  array: Array.isArray,\n  primitive: function(s) { return typeof s === 'string' || typeof s === 'number'; },\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/is.js\n// module id = 9\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/is.js?");

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _notify = __webpack_require__(11);\n\nvar _notify2 = _interopRequireDefault(_notify);\n\nvar _rotateGrid = __webpack_require__(25);\n\nvar _rotateGrid2 = _interopRequireDefault(_rotateGrid);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (isRemoveAll) {\n\tif (!_presenter2.default.perspectiveViewHelper) {\n\t\treturn;\n\t}\n\t_presenter2.default.perspectiveViewHelper.resetCubeStatus(isRemoveAll);\n\t(0, _notify2.default)(0, 0);\n\t// 恢复平面视图的旋转\n\t(0, _rotateGrid2.default)(window.$(_presenter2.default.view).find('.lego-view-counter-list'), 0);\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/reset.js\n// module id = 10\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/reset.js?");

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (row, column) {\n  var gridArr = (0, _normalize2.default)(_presenter2.default.perspectiveViewHelper.gridData.getGridCubeArr());\n  if (row === -1 || column === -1) {} else {\n    gridArr[row * 4 + column]['active'] = true;\n  }\n  (0, _main2.default)(gridArr, _cacheVnode2.default.current, _counterList2.default);\n};\n\nvar _main = __webpack_require__(12);\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _normalize = __webpack_require__(20);\n\nvar _normalize2 = _interopRequireDefault(_normalize);\n\nvar _counterList = __webpack_require__(21);\n\nvar _counterList2 = _interopRequireDefault(_counterList);\n\nvar _cacheVnode = __webpack_require__(19);\n\nvar _cacheVnode2 = _interopRequireDefault(_cacheVnode);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/notify.js\n// module id = 11\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/notify.js?");

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = main;\n\nvar _patch = __webpack_require__(13);\n\nvar _patch2 = _interopRequireDefault(_patch);\n\nvar _cacheVnode = __webpack_require__(19);\n\nvar _cacheVnode2 = _interopRequireDefault(_cacheVnode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n @author 陈小锋 2015-11-13\r\n */\nfunction main(state, oldVnode, _ref) {\n\tvar view = _ref.view,\n\t    update = _ref.update;\n\n\tvar newVnode = view(state, function (e) {\n\t\tvar newState = update(state, e);\n\t\tmain(newState, newVnode, { view: view, update: update });\n\t});\n\t_cacheVnode2.default.current = (0, _patch2.default)(oldVnode, newVnode);\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/main.js\n// module id = 12\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/main.js?");

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _snabbdom = __webpack_require__(14);\n\nvar _snabbdom2 = _interopRequireDefault(_snabbdom);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _snabbdom2.default.init([__webpack_require__(15), __webpack_require__(16), __webpack_require__(17), __webpack_require__(18)]);\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/patch.js\n// module id = 13\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/patch.js?");

/***/ },
/* 14 */
/***/ function(module, exports, __webpack_require__) {

	eval("// jshint newcap: false\n/* global require, module, document, Element */\n'use strict';\n\nvar VNode = __webpack_require__(8);\nvar is = __webpack_require__(9);\n\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\n\nfunction emptyNodeAt(elm) {\n  return VNode(elm.tagName, {}, [], undefined, elm);\n}\n\nvar emptyNode = VNode('', {}, [], undefined, undefined);\n\nfunction sameVnode(vnode1, vnode2) {\n  return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, map = {}, key;\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n  return map;\n}\n\nfunction createRmCb(childElm, listeners) {\n  return function() {\n    if (--listeners === 0) childElm.parentElement.removeChild(childElm);\n  };\n}\n\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n\nfunction init(modules) {\n  var i, j, cbs = {};\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (modules[j][hooks[i]] !== undefined) cbs[hooks[i]].push(modules[j][hooks[i]]);\n    }\n  }\n\n  function createElm(vnode, insertedVnodeQueue) {\n    var i, data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) i(vnode);\n      if (isDef(i = data.vnode)) vnode = i;\n    }\n    var elm, children = vnode.children, sel = vnode.sel;\n    if (isDef(sel)) {\n      // Parse selector\n      var hashIdx = sel.indexOf('#');\n      var dotIdx = sel.indexOf('.', hashIdx);\n      var hash = hashIdx > 0 ? hashIdx : sel.length;\n      var dot = dotIdx > 0 ? dotIdx : sel.length;\n      var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n      elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? document.createElementNS(i, tag)\n                                                          : document.createElement(tag);\n      if (hash < dot) elm.id = sel.slice(hash + 1, dot);\n      if (dotIdx > 0) elm.className = sel.slice(dot+1).replace(/\\./g, ' ');\n      if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n          elm.appendChild(createElm(children[i], insertedVnodeQueue));\n        }\n      } else if (is.primitive(vnode.text)) {\n        elm.appendChild(document.createTextNode(vnode.text));\n      }\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      i = vnode.data.hook; // Reuse variable\n      if (isDef(i)) {\n        if (i.create) i.create(emptyNode, vnode);\n        if (i.insert) insertedVnodeQueue.push(vnode);\n      }\n    } else {\n      elm = vnode.elm = document.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      parentElm.insertBefore(createElm(vnodes[startIdx], insertedVnodeQueue), before);\n    }\n  }\n\n  function invokeDestroyHook(vnode) {\n    var i = vnode.data, j;\n    if (isDef(i)) {\n      if (isDef(i = i.hook) && isDef(i = i.destroy)) i(vnode);\n      for (i = 0; i < cbs.destroy.length; ++i) cbs.destroy[i](vnode);\n      if (isDef(i = vnode.children)) {\n        for (j = 0; j < vnode.children.length; ++j) {\n          invokeDestroyHook(vnode.children[j]);\n        }\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var i, listeners, rm, ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.sel)) {\n          invokeDestroyHook(ch);\n          listeners = cbs.remove.length + 1;\n          rm = createRmCb(ch.elm, listeners);\n          for (i = 0; i < cbs.remove.length; ++i) cbs.remove[i](ch, rm);\n          if (isDef(i = ch.data) && isDef(i = i.hook) && isDef(i = i.remove)) {\n            i(ch, rm);\n          } else {\n            rm();\n          }\n        } else { // Text node\n          parentElm.removeChild(ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n    var oldStartIdx = 0, newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, elmToMove, before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n        if (isUndef(idxInOld)) { // New element\n          parentElm.insertBefore(createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        } else {\n          elmToMove = oldCh[idxInOld];\n          patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n          oldCh[idxInOld] = undefined;\n          parentElm.insertBefore(elmToMove.elm, oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        }\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      before = isUndef(newCh[newEndIdx+1]) ? null : newCh[newEndIdx+1].elm;\n      addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n    var i, hook;\n    if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n      i(oldVnode, vnode);\n    }\n    if (isDef(i = oldVnode.data) && isDef(i = i.vnode)) oldVnode = i;\n    if (isDef(i = vnode.data) && isDef(i = i.vnode)) vnode = i;\n    var elm = vnode.elm = oldVnode.elm, oldCh = oldVnode.children, ch = vnode.children;\n    if (oldVnode === vnode) return;\n    if (isDef(vnode.data)) {\n      for (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode);\n      i = vnode.data.hook;\n      if (isDef(i) && isDef(i = i.update)) i(oldVnode, vnode);\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n      } else if (isDef(ch)) {\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      elm.textContent = vnode.text;\n    }\n    if (isDef(hook) && isDef(i = hook.postpatch)) {\n      i(oldVnode, vnode);\n    }\n  }\n\n  return function(oldVnode, vnode) {\n    var i;\n    var insertedVnodeQueue = [];\n    for (i = 0; i < cbs.pre.length; ++i) cbs.pre[i]();\n    if (oldVnode instanceof Element) {\n      if (oldVnode.parentElement !== null) {\n        createElm(vnode, insertedVnodeQueue);\n        oldVnode.parentElement.replaceChild(vnode.elm, oldVnode);\n      } else {\n        oldVnode = emptyNodeAt(oldVnode);\n        patchVnode(oldVnode, vnode, insertedVnodeQueue);\n      }\n    } else {\n      patchVnode(oldVnode, vnode, insertedVnodeQueue);\n    }\n    for (i = 0; i < insertedVnodeQueue.length; ++i) {\n      insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n    }\n    for (i = 0; i < cbs.post.length; ++i) cbs.post[i]();\n    return vnode;\n  };\n}\n\nmodule.exports = {init: init};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/snabbdom.js\n// module id = 14\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/snabbdom.js?");

/***/ },
/* 15 */
/***/ function(module, exports) {

	eval("function updateClass(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldClass = oldVnode.data.class || {},\n      klass = vnode.data.class || {};\n  for (name in klass) {\n    cur = klass[name];\n    if (cur !== oldClass[name]) {\n      elm.classList[cur ? 'add' : 'remove'](name);\n    }\n  }\n}\n\nmodule.exports = {create: updateClass, update: updateClass};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/modules/class.js\n// module id = 15\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/modules/class.js?");

/***/ },
/* 16 */
/***/ function(module, exports) {

	eval("function updateProps(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldProps = oldVnode.data.props || {}, props = vnode.data.props || {};\n  for (key in props) {\n    cur = props[key];\n    old = oldProps[key];\n    if (old !== cur) {\n      elm[key] = cur;\n    }\n  }\n}\n\nmodule.exports = {create: updateProps, update: updateProps};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/modules/props.js\n// module id = 16\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/modules/props.js?");

/***/ },
/* 17 */
/***/ function(module, exports) {

	eval("var raf = requestAnimationFrame || setTimeout;\nvar nextFrame = function(fn) { raf(function() { raf(fn); }); };\n\nfunction setNextFrame(obj, prop, val) {\n  nextFrame(function() { obj[prop] = val; });\n}\n\nfunction updateStyle(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldStyle = oldVnode.data.style || {},\n      style = vnode.data.style || {},\n      oldHasDel = 'delayed' in oldStyle;\n  for (name in style) {\n    cur = style[name];\n    if (name === 'delayed') {\n      for (name in style.delayed) {\n        cur = style.delayed[name];\n        if (!oldHasDel || cur !== oldStyle.delayed[name]) {\n          setNextFrame(elm.style, name, cur);\n        }\n      }\n    } else if (name !== 'remove' && cur !== oldStyle[name]) {\n      elm.style[name] = cur;\n    }\n  }\n}\n\nfunction applyDestroyStyle(vnode) {\n  var style, name, elm = vnode.elm, s = vnode.data.style;\n  if (!s || !(style = s.destroy)) return;\n  for (name in style) {\n    elm.style[name] = style[name];\n  }\n}\n\nfunction applyRemoveStyle(vnode, rm) {\n  var s = vnode.data.style;\n  if (!s || !s.remove) {\n    rm();\n    return;\n  }\n  var name, elm = vnode.elm, idx, i = 0, maxDur = 0,\n      compStyle, style = s.remove, amount = 0, applied = [];\n  for (name in style) {\n    applied.push(name);\n    elm.style[name] = style[name];\n  }\n  compStyle = getComputedStyle(elm);\n  var props = compStyle['transition-property'].split(', ');\n  for (; i < props.length; ++i) {\n    if(applied.indexOf(props[i]) !== -1) amount++;\n  }\n  elm.addEventListener('transitionend', function(ev) {\n    if (ev.target === elm) --amount;\n    if (amount === 0) rm();\n  });\n}\n\nmodule.exports = {create: updateStyle, update: updateStyle, destroy: applyDestroyStyle, remove: applyRemoveStyle};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/modules/style.js\n// module id = 17\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/modules/style.js?");

/***/ },
/* 18 */
/***/ function(module, exports, __webpack_require__) {

	eval("var is = __webpack_require__(9);\n\nfunction arrInvoker(arr) {\n  return function() {\n    // Special case when length is two, for performance\n    arr.length === 2 ? arr[0](arr[1]) : arr[0].apply(undefined, arr.slice(1));\n  };\n}\n\nfunction fnInvoker(o) {\n  return function(ev) { o.fn(ev); };\n}\n\nfunction updateEventListeners(oldVnode, vnode) {\n  var name, cur, old, elm = vnode.elm,\n      oldOn = oldVnode.data.on || {}, on = vnode.data.on;\n  if (!on) return;\n  for (name in on) {\n    cur = on[name];\n    old = oldOn[name];\n    if (old === undefined) {\n      if (is.array(cur)) {\n        elm.addEventListener(name, arrInvoker(cur));\n      } else {\n        cur = {fn: cur};\n        on[name] = cur;\n        elm.addEventListener(name, fnInvoker(cur));\n      }\n    } else if (is.array(old)) {\n      // Deliberately modify old array since it's captured in closure created with `arrInvoker`\n      old.length = cur.length;\n      for (var i = 0; i < old.length; ++i) old[i] = cur[i];\n      on[name]  = old;\n    } else {\n      old.fn = cur;\n      on[name] = old;\n    }\n  }\n}\n\nmodule.exports = {create: updateEventListeners, update: updateEventListeners};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/snabbdom/modules/eventlisteners.js\n// module id = 18\n// module chunks = 0\n//# sourceURL=webpack:///./~/snabbdom/modules/eventlisteners.js?");

/***/ },
/* 19 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar vnode = null;\nexports.default = {\n\tget current() {\n\t\treturn vnode;\n\t},\n\tset current(v) {\n\t\tvnode = v;\n\t}\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/cacheVnode.js\n// module id = 19\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/cacheVnode.js?");

/***/ },
/* 20 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (arrData) {\n\tif (arrData.length !== 4) {\n\t\tthrow new Error('方格数据有错');\n\t}\n\tvar output = [];\n\tarrData.forEach(function (row, rowIndex) {\n\t\trow.forEach(function (cell, columnIndex) {\n\t\t\toutput.push({ id: rowIndex * 4 + columnIndex + 1, counter: cell });\n\t\t});\n\t});\n\treturn output;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/normalize.js\n// module id = 20\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/normalize.js?");

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _h = __webpack_require__(7);\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _counter2 = __webpack_require__(22);\n\nvar _counter3 = _interopRequireDefault(_counter2);\n\nvar _adjuster = __webpack_require__(28);\n\nvar _adjuster2 = _interopRequireDefault(_adjuster);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n state : [{id: Number, counter: counter.state, active: true}]\r\n */\nvar UPDATE = 'UPDATE_COUNTER';\nvar ADJUST = 'ADJUST_COUNTER';\n\nfunction view(state, handler) {\n  var activeCounter = null;\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = state[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var _counter = _step.value;\n\n      if (_counter.active && _counter.active === true) {\n        activeCounter = _counter;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  if (!activeCounter) {\n    activeCounter = { id: 0, counter: 0, active: true };\n  }\n  return (0, _h2.default)('div', [(0, _h2.default)('div.cell_up', [(0, _h2.default)('div.square_tbl_wrapper.lego-view-counter-list', [(0, _h2.default)('ul.square_tbl.clearfix', state.map(function (item) {\n    return _counter3.default.view(item, function (counterAction) {\n      return handler({ type: UPDATE, id: item.id, data: counterAction });\n    });\n  })), (0, _h2.default)('i.line')])]), _adjuster2.default.view(activeCounter, function (adjusterAction) {\n    return handler({\n      type: ADJUST,\n      id: activeCounter.id,\n      data: adjusterAction\n    });\n  })]);\n}\nfunction update(state, action) {\n  switch (action.type) {\n    case UPDATE:\n      return state.map(function (item) {\n        if (item.id !== action.id) {\n          var obj = {};\n          $.extend(obj, item, { active: false });\n          return obj;\n          // return { ...item, active: false }\n        } else {\n          return _counter3.default.update(item, action.data);\n        }\n      });\n    case ADJUST:\n      return state.map(function (item) {\n        if (item.id !== action.id) {\n          return item;\n        } else {\n          return _adjuster2.default.update(item, action.data);\n        }\n      });\n    default:\n      return state;\n  }\n}\nexports.default = {\n  view: view, update: update, actions: {\n    UPDATE: UPDATE, ADJUST: ADJUST\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/counterList.js\n// module id = 21\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/counterList.js?");

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _h = __webpack_require__(7);\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _listener = __webpack_require__(23);\n\nvar _listener2 = _interopRequireDefault(_listener);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ADD_CUBE = 'ADD_CUBE';\n\n// state : {id: Number, counter: Number, active: true}\nfunction view(state, handler) {\n  return (0, _h2.default)('li.lego-view__panel__cell', {\n    key: state.id,\n    on: {\n      click: function click(e) {\n        e.stopPropagation();\n        handler.bind(null, {\n          type: 'ADD_CUBE'\n        })();\n      }\n    },\n    class: {\n      'active': state.active, // 激活状态下添加此 css 类名\n      'num0': state.counter === 0,\n      'num1': state.counter === 1,\n      'num2': state.counter === 2,\n      'num3': state.counter === 3,\n      'num4': state.counter === 4\n    }\n  }, [(0, _h2.default)('b', {\n    style: {\n      display: 'inline-block'\n    }\n  }, state.counter === 0 ? '' : state.counter)]);\n}\nfunction update(state, action) {\n  var newState = {};\n  switch (action.type) {\n    case ADD_CUBE:\n      if (!state.active) {\n        // 激活方格\n        $.extend(newState, state);\n        $.extend(newState, { active: true });\n        // newState = {...state, active: true };\n      } else {\n        // ;\n        $.extend(newState, state);\n        if (state.counter === 4) {\n          $.extend(newState, { counter: 0 });\n          // newState = {...state, counter: 0 };\n        } else {\n          $.extend(newState, { counter: state.counter + 1 });\n          // newState = {...state, counter: state.counter + 1 };\n        }\n      }\n      _listener2.default.trigger('sideEffectByGrid', {\n        payload: {\n          id: newState.id,\n          counter: newState.counter\n        }\n      });\n      return newState;\n    default:\n      return state;\n  }\n}\nexports.default = { view: view, update: update, actions: { ADD_CUBE: ADD_CUBE } };\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/counter.js\n// module id = 22\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/counter.js?");

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _microevent = __webpack_require__(24);\n\nvar _microevent2 = _interopRequireDefault(_microevent);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _rotateGrid = __webpack_require__(25);\n\nvar _rotateGrid2 = _interopRequireDefault(_rotateGrid);\n\nvar _operateCube = __webpack_require__(26);\n\nvar _operateCube2 = _interopRequireDefault(_operateCube);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar listener = _microevent2.default.mixin({}); /* global $ */\nexports.default = listener;\n/**\r\n @author 陈小锋\r\n `npm test` 时暂且清理以下内容\r\n */\n\nlistener.bind('sideEffectByGrid', function (action) {\n\tvar _action$payload = action.payload,\n\t    id = _action$payload.id,\n\t    counter = _action$payload.counter;\n\n\t(0, _operateCube2.default)(id, counter);\n});\nlistener.bind('sideEffectByAdjuster', function (action) {\n\tvar type = action.type,\n\t    payload = action.payload;\n\tvar id = payload.id,\n\t    counter = payload.counter;\n\n\t(0, _operateCube2.default)(id, counter, type);\n});\nlistener.bind('rotateCubeView', function (targetRotation, targetY, isYFirst, rotation, override) {\n\tvar $view = $(_presenter2.default.view);\n\t// 旋转平面方格\n\tvar $target = $view.find('.lego-view-counter-list');\n\tif (typeof override !== 'undefined') {\n\t\t(0, _rotateGrid2.default)($target, override);\n\t} else {\n\t\t(0, _rotateGrid2.default)($target, rotation - _presenter2.default.perspectiveViewHelper.GRIDVIEW_ROTATIONS.INIT_ROTATION);\n\t}\n});\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/listener.js\n// module id = 23\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/listener.js?");

/***/ },
/* 24 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar MicroEvent = function MicroEvent() {};\nMicroEvent.prototype = {\n\tbind: function bind(event, fct) {\n\t\tthis._events = this._events || {};\n\t\tthis._events[event] = this._events[event] || [];\n\t\tthis._events[event].push(fct);\n\t},\n\tunbind: function unbind(event, fct) {\n\t\tthis._events = this._events || {};\n\t\tif (event in this._events === false) return;\n\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\n\t},\n\ttrigger: function trigger(event /* , args... */) {\n\t\tthis._events = this._events || {};\n\t\tif (event in this._events === false) return;\n\t\tfor (var i = 0; i < this._events[event].length; i++) {\n\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t}\n\t}\n};\nMicroEvent.mixin = function (destObject) {\n\tvar props = ['bind', 'unbind', 'trigger'];\n\tfor (var i = 0; i < props.length; i++) {\n\t\tif (typeof destObject === 'function') {\n\t\t\tdestObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\n\t\t} else {\n\t\t\tdestObject[props[i]] = MicroEvent.prototype[props[i]];\n\t\t}\n\t}\n\treturn destObject;\n};\nexports.default = MicroEvent;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/microevent.js\n// module id = 24\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/microevent.js?");

/***/ },
/* 25 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function ($target, deg) {\n\t$target.css('transform', 'rotate(' + deg + 'deg)');\n\t// 数据的容器需要保持竖直\n\t$target.find('.lego-view__panel__cell').children('b').each(function (index, element) {\n\t\twindow.$(element).css('transform', 'rotate(' + -deg + 'deg)');\n\t});\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/rotateGrid.js\n// module id = 25\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/rotateGrid.js?");

/***/ },
/* 26 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (id, count) {\n\tvar _transform = (0, _transform3.default)(id),\n\t    row = _transform.row,\n\t    column = _transform.column;\n\n\t_presenter2.default.perspectiveViewHelper.highlightCubeInPosition(row, column);\n\t_presenter2.default.perspectiveViewHelper.setCubeCountInPosition(row, column, count);\n};\n\nvar _transform2 = __webpack_require__(27);\n\nvar _transform3 = _interopRequireDefault(_transform2);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/operateCube.js\n// module id = 26\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/operateCube.js?");

/***/ },
/* 27 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (id) {\n\tvar gridLength = 4;\n\tvar division = id / gridLength;\n\tvar modulo = id % gridLength;\n\tif (modulo === 0) {\n\t\treturn { row: Math.floor(division) - 1, column: 3 };\n\t} else {\n\t\treturn { row: Math.floor(division), column: id % 4 - 1 };\n\t}\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/transform.js\n// module id = 27\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/transform.js?");

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _h = __webpack_require__(7);\n\nvar _h2 = _interopRequireDefault(_h);\n\nvar _listener = __webpack_require__(23);\n\nvar _listener2 = _interopRequireDefault(_listener);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n state: {id: Number, counter: Number}\r\n */\nvar ADD_NUM = 'ADD_NUM';\nvar MINUS_NUM = 'MINUS_NUM';\nfunction view(state, update) {\n  return (0, _h2.default)('div.num_handle_down', [(0, _h2.default)('div.detail', [(0, _h2.default)('a.sign', {\n    on: {\n      click: function click(e) {\n        e.stopPropagation();\n        update.bind(null, { type: MINUS_NUM })();\n      }\n    },\n    style: {\n      cursor: 'pointer'\n    }\n  }, [(0, _h2.default)('span')]), (0, _h2.default)('span.ipt_text.cannot_select', [(0, _h2.default)('b', state.counter)]), (0, _h2.default)('a.plus', {\n    on: {\n      click: function click(e) {\n        e.stopPropagation();\n        update.bind(null, { type: ADD_NUM })();\n      }\n    },\n    style: {\n      cursor: 'pointer'\n    }\n  }, [(0, _h2.default)('span')])])]);\n}\nfunction update(state, action) {\n  var newState = {};\n  switch (action.type) {\n    case ADD_NUM:\n      if (state.counter === 4) {\n        $.extend(newState, state);\n        $.extend(newState, { counter: 0 });\n        // newState = {...state, counter: 0 };\n      } else {\n        $.extend(newState, state);\n        $.extend(newState, { counter: state.counter + 1 });\n        // newState = {...state, counter: state.counter + 1 };\n      }\n      _listener2.default.trigger('sideEffectByAdjuster', {\n        type: 'add', payload: {\n          id: newState.id,\n          counter: newState.counter\n        }\n      });\n      return newState;\n    case MINUS_NUM:\n      if (state.counter === 0) {\n        $.extend(newState, state);\n        $.extend(newState, { counter: 4 });\n        // newState = {...state, counter: 4 };\n      } else {\n        $.extend(newState, state);\n        $.extend(newState, { counter: state.counter - 1 });\n        // newState = {...state, counter: state.counter - 1 };\n      }\n      _listener2.default.trigger('sideEffectByAdjuster', {\n        type: 'minus', payload: {\n          id: newState.id,\n          counter: newState.counter\n        }\n      });\n      return newState;\n    default:\n      return state;\n  }\n}\nexports.default = { view: view, update: update, actions: { ADD_NUM: ADD_NUM, MINUS_NUM: MINUS_NUM } };\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/adjuster.js\n// module id = 28\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/adjuster.js?");

/***/ },
/* 29 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (callback, limit) {\n\tvar wait = false; // Initially, we're not waiting\n\treturn function () {\n\t\t// We return a throttled function\n\t\tif (!wait) {\n\t\t\t// If we're not waiting\n\t\t\tcallback.call(); // Execute users function\n\t\t\twait = true; // Prevent future invocations\n\t\t\tsetTimeout(function () {\n\t\t\t\t// After a period of time\n\t\t\t\twait = false; // And allow future invocations\n\t\t\t}, limit);\n\t\t}\n\t};\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/control/throttle.js\n// module id = 29\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/control/throttle.js?");

/***/ },
/* 30 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by wuyukun on 2015/12/12.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _THREE = __webpack_require__(31);\n\nvar _THREE2 = _interopRequireDefault(_THREE);\n\nvar _GridData = __webpack_require__(32);\n\nvar _GridData2 = _interopRequireDefault(_GridData);\n\nvar _GridHelper = __webpack_require__(33);\n\nvar _GridHelper2 = _interopRequireDefault(_GridHelper);\n\nvar _notify = __webpack_require__(11);\n\nvar _notify2 = _interopRequireDefault(_notify);\n\nvar _listener = __webpack_require__(23);\n\nvar _listener2 = _interopRequireDefault(_listener);\n\nvar _rotateGrid = __webpack_require__(25);\n\nvar _rotateGrid2 = _interopRequireDefault(_rotateGrid);\n\nvar _destroyThreeObject = __webpack_require__(34);\n\nvar _destroyThreeObject2 = _interopRequireDefault(_destroyThreeObject);\n\nvar _constants = __webpack_require__(36);\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _autoDetectRenderer = __webpack_require__(35);\n\nvar _autoDetectRenderer2 = _interopRequireDefault(_autoDetectRenderer);\n\nvar _em = __webpack_require__(37);\n\nvar _em2 = _interopRequireDefault(_em);\n\nvar _getExtendData = __webpack_require__(38);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PerspectiveViewHelper = function () {\n  function PerspectiveViewHelper() {\n    _classCallCheck(this, PerspectiveViewHelper);\n\n    this.PERSPECTIVE_CAMERA_INIT_POSITION = {\n      x: 100,\n      y: 80,\n      z: 100\n    };\n    this.GRIDVIEW_ROTATIONS = {\n      INIT_ROTATION: 105,\n      LEFT_VIEW_ROTATION: 0,\n      FRONT_VIEW_ROTATION: 90,\n      VERTICAL_VIEW_ROTATION: 90\n    };\n    this.ROTATION_SPEED = {\n      ySpeed: 35,\n      rSpeed: 10\n    };\n    // this.CubeColor = [0x84baf7, 0x77d14d, 0xf2d136, 0xfd6469]\n    this.CubeBasicColor = [0x6fb3e7, 0x77c055, 0xf2d24e, 0xf5767a];\n    this.CubeColor = [0x76d0ff, 0x8fd96c, 0xf2d136, 0xfd6469];\n    // this.CubeHighlightColor = [0x448fe5, 0x4a9f22, 0xe9aa00, 0xe52828]\n    this.CubeHighlightBasicColor = [0x419be1, 0x4a9f22, 0xefba00, 0xe73c3c];\n    this.CubeHighlightColor = [0x0098f9, 0x1eb900, 0xffa801, 0xe52828];\n\n    this.CubeBorderColor = 0xdff6ff;\n    // this.CubeBorderColor = 0x414141\n    // this.CubeBorderColor = 0x000000\n    this.bottom = -(0, _em2.default)(168 / 24);\n\n    this.lightColor = {\n      origin: {\n        color: 0xb2b2b2,\n        intensity: 10,\n        pos1: [1000, 1000 + this.bottom, 1000],\n        pos3: [-1000, 1000 + this.bottom, -1000]\n      },\n      top: {\n        color: 0x9f9f9f,\n        intensity: 10,\n        pos1: [1000, 1000, 1000],\n        pos3: [-1000, 1000, -1000]\n      },\n      left: {\n        color: 0x9f9f9f,\n        intensity: 10,\n        // pos1: [1000, 1000, 1000],\n        // pos3: [-1000, 1000, -1000]\n        pos1: [1000, 1000, 1000 + this.bottom],\n        pos3: [-1000, -1000, 1000 + this.bottom]\n      },\n      front: {\n        color: 0x9f9f9f,\n        intensity: 10,\n        // pos1: [1000, 1000, 1000],\n        // pos3: [-1000, 1000, -1000]\n        pos1: [1000 + this.bottom, 1000, 1000],\n        pos3: [1000 + this.bottom, -1000, -1000]\n      }\n    };\n\n    this.timeoutId = 0;\n    this.yDiff = 0;\n    this.rotationDiff = 0;\n\n    this.gridTargetRotation = null;\n    this.gridTargetY = 0;\n\n    // 记录状态\n    this.preState = null;\n    // 记录动画数据\n    this.animateData = null;\n    // 是否在播放动画\n    this.playing = 0;\n    this.visual = 'origin';\n  }\n\n  _createClass(PerspectiveViewHelper, [{\n    key: 'createPerspectiveView',\n    value: function createPerspectiveView(view) {\n      this.container = view;\n      // 初始化，适配屏幕，设置画布、方块大小参数\n      this.caculateCanvasSize();\n      this.initThree();\n      this.initThreeData();\n      this.initView();\n      this.addLights();\n    }\n  }, {\n    key: 'addLights',\n    value: function addLights() {\n\n      // let light = new THREE.AmbientLight( 0x404040 ); // soft white light\n      // this.perspectiveViewScene.add( light );\n\n      var lightHeight = 1000;\n      var lightColor = this.lightColor.origin.color;\n      var intense = _autoDetectRenderer.isWebGLRenderer ? 10 : 2;\n      var distance = 1950;\n      var r = 1000;\n\n      this.pointLight1 = new _THREE2.default.PointLight(lightColor, intense, distance);\n      // this.pointLight1.position.set(r, lightHeight, r)\n      this.perspectiveViewScene.add(this.pointLight1);\n      //\n      this.pointLight2 = new _THREE2.default.PointLight(0x999999, 8, distance);\n      this.pointLight2.position.set(1000, 0, -r * 1.6);\n      this.perspectiveViewScene.add(this.pointLight2);\n\n      this.pointLight3 = new _THREE2.default.PointLight(lightColor, intense, distance);\n      // this.pointLight3.position.set(-r, lightHeight, -r)\n      this.perspectiveViewScene.add(this.pointLight3);\n\n      // this.pointLight1.position.y += this.bottom\n      // this.pointLight3.position.y += this.bottom\n\n      this.changeLightColor('origin');\n\n      // let helper = new THREE.AxisHelper(150)\n      // this.perspectiveViewScene.add(helper)\n    }\n  }, {\n    key: 'initThree',\n    value: function initThree() {\n      this.perspectiveViewCamera = new _THREE2.default.OrthographicCamera(this.REAL_ESTATE.width / -2, this.REAL_ESTATE.width / 2, this.REAL_ESTATE.height / 2, this.REAL_ESTATE.height / -2, -500, 500);\n      this.perspectiveViewScene = new _THREE2.default.Scene();\n      this.perspectiveViewRenderer = (0, _autoDetectRenderer2.default)({ antialias: true, alpha: true });\n\n      this.perspectiveViewCamera.position.x = this.PERSPECTIVE_CAMERA_INIT_POSITION.x;\n      this.perspectiveViewCamera.position.y = this.PERSPECTIVE_CAMERA_INIT_POSITION.y;\n      this.perspectiveViewCamera.position.z = this.PERSPECTIVE_CAMERA_INIT_POSITION.z;\n      this.perspectiveViewCamera.lookAt(this.ZERO_POINT);\n\n      // Add axes\n      //let axeLen = (GRID_SETTING.column > GRID_SETTING.row ? GRID_SETTING.column : GRID_SETTING.row) * this.CubeSize;\n      //let axes = new THREE.AxisHelper(axeLen);\n      //this.perspectiveViewScene.add(axes);\n\n      this.perspectiveViewRenderer.setClearColor(0xf0f0f0, 0);\n      this.perspectiveViewRenderer.setPixelRatio(window.devicePixelRatio);\n      this.perspectiveViewRenderer.setSize(this.REAL_ESTATE.width, this.REAL_ESTATE.height);\n\n      this.mouse = new _THREE2.default.Vector2();\n      this.raycaster = new _THREE2.default.Raycaster();\n    }\n  }, {\n    key: 'initThreeData',\n    value: function initThreeData() {\n      this.gridPlane = this.gridHelper.createView();\n      //高亮层\n      var shape = new _THREE2.default.Shape();\n      shape.moveTo(0, 0);\n      shape.lineTo(0, this.CubeSize);\n      shape.lineTo(this.CubeSize, this.CubeSize);\n      shape.lineTo(this.CubeSize, 0);\n      shape.lineTo(0, 0);\n\n      var shapeIn = new _THREE2.default.Shape();\n      shapeIn.moveTo(1, 1);\n      shapeIn.lineTo(1, this.CubeSize - 1);\n      shapeIn.lineTo(this.CubeSize - 1, this.CubeSize - 1);\n      shapeIn.lineTo(this.CubeSize - 1, 1);\n      shapeIn.lineTo(1, 1);\n\n      var shapeInIn = new _THREE2.default.Shape();\n      shapeInIn.moveTo(-1, -1);\n      shapeInIn.lineTo(-1, this.CubeSize + 1);\n      shapeInIn.lineTo(this.CubeSize + 1, this.CubeSize + 1);\n      shapeInIn.lineTo(this.CubeSize + 1, -1);\n      shapeInIn.lineTo(-1, -1);\n\n      var lineColor = 0x4078c2;\n\n      var points = shape.createPointsGeometry();\n      var pointsIn = shapeIn.createPointsGeometry();\n      var pointsInIn = shapeInIn.createPointsGeometry();\n      var lineOut = new _THREE2.default.Line(points, new _THREE2.default.LineBasicMaterial({ color: lineColor }));\n      var lineIn = new _THREE2.default.Line(pointsIn, new _THREE2.default.LineBasicMaterial({ color: lineColor }));\n      var lineInIn = new _THREE2.default.Line(pointsInIn, new _THREE2.default.LineBasicMaterial({ color: lineColor }));\n\n      var highlightPlane = new _THREE2.default.Object3D();\n      highlightPlane.add(lineIn, lineOut, lineInIn);\n\n      highlightPlane.rotateX(-Math.PI / 2);\n\n      this.perspectiveViewScene.add(this.gridPlane);\n      this.gridPlane.position.y = this.bottom;\n      this.gridData.setPlane(this.gridPlane);\n\n      //y不能为0，否则和网格一层，会造成渲染不完全\n      this.perspectiveViewScene.add(highlightPlane);\n      this.gridData.setHighlightPlane(highlightPlane);\n      this.setHighlightPlanePosition(0, 0);\n      this.rotateCube(this.GRIDVIEW_ROTATIONS.INIT_ROTATION);\n      if (_autoDetectRenderer.isWebGLRenderer) {\n        this.gridPlane.position.y += -0.4;\n        highlightPlane.position.y += -0.3;\n      } else {\n        this.gridPlane.position.y += -2;\n        highlightPlane.position.y += -1;\n      }\n    }\n  }, {\n    key: 'initView',\n    value: function initView() {\n\n      var $view = $(this.container).find('.js-lego-canvas');\n      var $obj = this;\n\n      //insert canvas\n      $view.find('.canvasbox').find('.main').append(this.perspectiveViewRenderer.domElement);\n\n      //透视图操作\n      $(this.perspectiveViewRenderer.domElement).on('click', function (e) {\n        e.stopPropagation();\n        //窗口移动，有偏移量，需要和画布的偏移一起计算\n        $obj.mouse.x = (event.clientX - $obj.perspectiveViewRenderer.domElement.getBoundingClientRect().left) / $obj.perspectiveViewRenderer.domElement.clientWidth * 2 - 1;\n        $obj.mouse.y = -((event.clientY - $obj.perspectiveViewRenderer.domElement.getBoundingClientRect().top) / $obj.perspectiveViewRenderer.domElement.clientHeight) * 2 + 1;\n        $obj.raycaster.setFromCamera($obj.mouse, $obj.perspectiveViewCamera);\n        var intersects = $obj.raycaster.intersectObjects($obj.gridData.getMeshObjects(), true);\n        if (intersects.length > 0) {\n          var intersect = null;\n          for (var i = 0; i < intersects.length; i++) {\n            if (intersects[i].face) {\n              intersect = intersects[i];\n              break;\n            }\n          }\n\n          if (!intersect) {\n            return;\n          }\n\n          if ($obj.gridHelper.isPointInGrid(intersect.point.x, intersect.point.z) && intersect.face != null) {\n            var _$obj$gridHelper$getI = $obj.gridHelper.getIndexByPosition(intersect.point.x, intersect.point.z, intersect.face.normal.x, intersect.face.normal.z),\n                _$obj$gridHelper$getI2 = _slicedToArray(_$obj$gridHelper$getI, 2),\n                xIndex = _$obj$gridHelper$getI2[0],\n                zIndex = _$obj$gridHelper$getI2[1];\n\n            if ($obj.gridData.highlightPosition.row != xIndex || $obj.gridData.highlightPosition.column != zIndex) {\n              $obj.highlightCubeInPosition(xIndex, zIndex);\n            } else {\n              if ((intersect.object.name == 'border' || intersect.object.name == 'gridFill') && Math.abs(intersect.face.normal.z - 1) < 0.000000001 || Math.abs(intersect.face.normal.y - 1) < 0.000000001 || Math.abs(intersect.face.normal.y + 1) < 0.000000001) {\n                var count = $obj.gridData.getObjectCountAtPosition(xIndex, zIndex);\n                $obj.addCube(xIndex, zIndex, count);\n              } else if (intersect.object != $obj.gridPlane) {\n                $obj.deleteCube(xIndex, zIndex);\n              }\n            }\n            (0, _notify2.default)(xIndex, zIndex);\n          }\n\n          $obj.updateHightLightPlane(xIndex, zIndex);\n        } else {\n          $obj.clearHightLight();\n        }\n        intersects = null;\n      });\n      $view.find('.rotation-control').click(function (e) {\n        e.stopPropagation();\n        $obj.visual = 'origin';\n        if ($obj.perspectiveViewCamera.position.y == $obj.CAMERA_DISTANCE || $obj.perspectiveViewCamera.position.x == $obj.CAMERA_DISTANCE || $obj.perspectiveViewCamera.position.z == $obj.CAMERA_DISTANCE) {\n          $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.INIT_ROTATION, $obj.PERSPECTIVE_CAMERA_INIT_POSITION.y, true, undefined, 'origin');\n        } else {\n          $obj.setCubeStatus($obj.gridHelper.ROTATION + ($(this).hasClass('btn_rotate_lf') ? 90 : -90), $obj.PERSPECTIVE_CAMERA_INIT_POSITION.y, true, undefined, 'origin');\n        }\n      });\n      $view.find('.btn-vertical-view').click(function (e) {\n        e.stopPropagation();\n        // $obj.visual = 'top'\n        if ($obj.gridHelper.ROTATION == 90 && $obj.perspectiveViewCamera.position.y == $obj.CAMERA_DISTANCE) return;\n        if ($obj.gridHelper.ROTATION % 360 == 0 || $obj.gridHelper.ROTATION % 360 == $obj.GRIDVIEW_ROTATIONS.INIT_ROTATION) {\n          $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.VERTICAL_VIEW_ROTATION, $obj.CAMERA_DISTANCE, false, 0, 'top');\n        } else {\n          $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.VERTICAL_VIEW_ROTATION, $obj.CAMERA_DISTANCE, true, 0, 'top');\n        }\n      });\n      $view.find('.btn-origin-view').click(function (e) {\n        e.stopPropagation();\n        $obj.visual = 'origin';\n        $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.INIT_ROTATION, $obj.PERSPECTIVE_CAMERA_INIT_POSITION.y, true, 0, 'origin');\n      });\n\n      $view.find('.btn-left-view').click(function (e) {\n        e.stopPropagation();\n        // $obj.visual = 'left'\n        if ($obj.gridHelper.ROTATION % 360 == 90) {\n          $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.LEFT_VIEW_ROTATION, 0, true, 0, 'left');\n        } else {\n          $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.LEFT_VIEW_ROTATION, 0, false, 0, 'left');\n        }\n      });\n      $view.find('.btn-front-view').click(function (e) {\n        e.stopPropagation();\n        // $obj.visual = 'front'\n        $obj.setCubeStatus($obj.GRIDVIEW_ROTATIONS.FRONT_VIEW_ROTATION, 0, false, 0, 'front');\n      });\n      this.render();\n    }\n  }, {\n    key: 'changeLightColor',\n    value: function changeLightColor(key) {\n      var _pointLight1$position, _pointLight3$position;\n\n      var options = this.lightColor[key] || this.lightColor.origin;\n      this.pointLight1.color = new _THREE2.default.Color(options.color);\n      this.pointLight1.intensity = options.intensity;\n      (_pointLight1$position = this.pointLight1.position).set.apply(_pointLight1$position, _toConsumableArray(options.pos1));\n      this.pointLight3.color = new _THREE2.default.Color(options.color);\n      this.pointLight3.intensity = options.intensity;\n      (_pointLight3$position = this.pointLight3.position).set.apply(_pointLight3$position, _toConsumableArray(options.pos3));\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      // 渲染前判断是否有方块，若无，置灰垃圾桶按钮\n      var arr = this.gridData.getGridCubeArr();\n      var isEmpty = true;\n      arr.forEach(function (v) {\n        v.forEach(function (v) {\n          isEmpty = v === 0 && isEmpty;\n        });\n      });\n      if (isEmpty) {\n        $('._js_fontana_clear').addClass('disabled');\n        this.clearDisabled = true;\n      } else {\n        $('._js_fontana_clear').removeClass('disabled');\n        this.clearDisabled = false;\n      }\n      this.updateCubeMaterial();\n      this.perspectiveViewRenderer.render(this.perspectiveViewScene, this.perspectiveViewCamera);\n    }\n\n    /**\r\n     * 设置高亮层在格子中的位置\r\n     * @param row 行\r\n     * @param column 列\r\n     */\n\n  }, {\n    key: 'setHighlightPlanePosition',\n    value: function setHighlightPlanePosition(row, column) {\n      // if (row === -1 || column === -1) return\n      var _gridHelper$getCubePo = this.gridHelper.getCubePosition(row, column),\n          _gridHelper$getCubePo2 = _slicedToArray(_gridHelper$getCubePo, 2),\n          x = _gridHelper$getCubePo2[0],\n          z = _gridHelper$getCubePo2[1];\n\n      var plane = this.gridData.getHighlightPlane();\n      plane.position.copy(new _THREE2.default.Vector3(x - this.gridHelper.rSize / 2, 0.01, z + this.gridHelper.cSize / 2));\n      plane.position.y += this.bottom;\n      this.updateHightLightPlane(row, column);\n    }\n\n    /**更新高亮框的显隐\r\n     * @param row 行\r\n     * @param column 列\r\n     */\n\n  }, {\n    key: 'updateHightLightPlane',\n    value: function updateHightLightPlane(row, column) {\n      var plane = this.gridData.getHighlightPlane();\n      if (this.gridData.getObjectCountAtPosition(row, column) == 0) {\n        plane.visible = true;\n      } else {\n        plane.visible = false;\n      }\n      this.render();\n    }\n  }, {\n    key: 'clearHightLight',\n    value: function clearHightLight() {\n      var checkAnimate = $('._js_fontana_clear').hasClass('disable_a_href');\n      if (checkAnimate) {\n        this.render();\n        return;\n      }\n      var plane = this.gridData.getHighlightPlane();\n      plane.visible = false;\n      this.highlightCubeInPosition(-1, -1);\n      (0, _notify2.default)(-1, -1);\n      this.render();\n    }\n\n    /**\r\n     * 设置方块塔状态公共接口\r\n     * @param targetRotation {Number} 旋转最终角度\r\n     * @param targetY {Number} camera位置最终y值\r\n     * @param isYFirst {boolean} 是否优先旋转camera的Y轴\r\n     * @param overrideRotation {Number} 覆盖 gridViewHelper.ROTATION 旋转角度\r\n     */\n\n  }, {\n    key: 'setCubeStatus',\n    value: function setCubeStatus(targetRotation, targetY, isYFirst, overrideRotation, visualAngle) {\n      this.animateData = {\n        targetRotation: targetRotation,\n        targetY: targetY,\n        isYFirst: isYFirst,\n        overrideRotation: overrideRotation\n      };\n      this.preState = (0, _getExtendData.getState)();\n      this.gridTargetRotation = targetRotation;\n      this.gridTargetRotation %= 360;\n      if (this.gridTargetRotation < 0) this.gridTargetRotation += 360;\n      this.gridTargetY = targetY;\n\n      this.timeoutId = 0;\n      this.yDiff = this.perspectiveViewCamera.position.y - targetY;\n      this.rotationDiff = targetRotation - this.gridHelper.ROTATION;\n      this.rotationDiff %= 360;\n      this.setButtonStatus(true);\n      if (typeof overrideRotation !== 'undefined') {\n        _listener2.default.trigger('rotateCubeView', targetRotation, targetY, isYFirst, this.gridHelper.ROTATION + this.rotationDiff, overrideRotation);\n      } else {\n        _listener2.default.trigger('rotateCubeView', targetRotation, targetY, isYFirst, this.gridHelper.ROTATION + this.rotationDiff);\n      }\n      this.playing++;\n      this.rotateView(isYFirst, overrideRotation, visualAngle);\n    }\n  }, {\n    key: 'rotateView',\n    value: function rotateView(isYFirst, overrideRotation, visualAngle) {\n      var $obj = this;\n      // if (visualAngle === 'origin') {\n      this.changeLightColor('origin');\n      // }\n      this.timeoutId = setTimeout(function () {\n        $obj.rotateView(isYFirst, overrideRotation, visualAngle);\n      }, 48);\n      if (isYFirst) {\n        if (Math.abs(this.yDiff) < this.ROTATION_SPEED.ySpeed) {\n          this.perspectiveViewCamera.position.y -= this.yDiff;\n          this.yDiff = 0;\n        } else {\n          this.perspectiveViewCamera.position.y += this.yDiff > 0 ? -this.ROTATION_SPEED.ySpeed : this.ROTATION_SPEED.ySpeed;\n          this.yDiff += this.yDiff > 0 ? -this.ROTATION_SPEED.ySpeed : this.ROTATION_SPEED.ySpeed;\n        }\n        if (this.yDiff == 0 && this.rotationDiff != 0) {\n          if (Math.abs(this.rotationDiff) < this.ROTATION_SPEED.rSpeed) {\n            this.gridHelper.ROTATION += this.rotationDiff;\n            this.rotationDiff = 0;\n          } else {\n            this.gridHelper.ROTATION -= this.rotationDiff > 0 ? -this.ROTATION_SPEED.rSpeed : this.ROTATION_SPEED.rSpeed;\n            this.rotationDiff += this.rotationDiff > 0 ? -this.ROTATION_SPEED.rSpeed : this.ROTATION_SPEED.rSpeed;\n          }\n        }\n      } else {\n        if (Math.abs(this.rotationDiff) < this.ROTATION_SPEED.rSpeed) {\n          this.gridHelper.ROTATION += this.rotationDiff;\n          this.rotationDiff = 0;\n        } else {\n          this.gridHelper.ROTATION -= this.rotationDiff > 0 ? -this.ROTATION_SPEED.rSpeed : this.ROTATION_SPEED.rSpeed;\n          this.rotationDiff += this.rotationDiff > 0 ? -this.ROTATION_SPEED.rSpeed : this.ROTATION_SPEED.rSpeed;\n        }\n        if (this.yDiff != 0 && this.rotationDiff == 0) {\n          if (Math.abs(this.yDiff) < this.ROTATION_SPEED.ySpeed) {\n            this.perspectiveViewCamera.position.y -= this.yDiff;\n            this.yDiff = 0;\n          } else {\n            this.perspectiveViewCamera.position.y += this.yDiff > 0 ? -this.ROTATION_SPEED.ySpeed : this.ROTATION_SPEED.ySpeed;\n            this.yDiff += this.yDiff > 0 ? -this.ROTATION_SPEED.ySpeed : this.ROTATION_SPEED.ySpeed;\n          }\n        }\n      }\n      if (this.perspectiveViewCamera.position.y == this.CAMERA_DISTANCE && this.rotationDiff != 0 && isYFirst) {\n        var xzLen = this.CAMERA_DISTANCE / 2;\n        this.perspectiveViewCamera.position.x = xzLen * Math.sin(this.gridHelper.ROTATION / 180 * Math.PI);\n        this.perspectiveViewCamera.position.z = xzLen * Math.cos(this.gridHelper.ROTATION / 180 * Math.PI);\n      } else {\n        var _xzLen = Math.sqrt(Math.pow(this.CAMERA_DISTANCE, 2) - Math.pow(this.perspectiveViewCamera.position.y, 2));\n        this.perspectiveViewCamera.position.x = _xzLen * Math.sin(this.gridHelper.ROTATION / 180 * Math.PI);\n        this.perspectiveViewCamera.position.z = _xzLen * Math.cos(this.gridHelper.ROTATION / 180 * Math.PI);\n      }\n      //每次旋转完成将旋转角归一到0~360之间\n      this.gridHelper.ROTATION %= 360;\n      if (this.gridHelper.ROTATION < 0) this.gridHelper.ROTATION += 360;\n      this.perspectiveViewCamera.lookAt(this.ZERO_POINT);\n      this.render();\n      if (this.yDiff == 0 && this.rotationDiff == 0) {\n        this.visual = visualAngle;\n        this.setButtonStatus(false);\n        this.changeLightColor(visualAngle);\n        clearTimeout(this.timeoutId);\n        this.playing--;\n        this.render();\n        return;\n      }\n    }\n\n    /**\r\n     *设置高亮方块位置\r\n     */\n\n  }, {\n    key: 'highlightCubeInPosition',\n    value: function highlightCubeInPosition(row, column) {\n      var _this = this;\n\n      this.setHighlightPlanePosition(row, column);\n      var gridCubeArr = this.gridData.getGridCubeArr();\n      gridCubeArr.forEach(function (rowObjects, rowIndex) {\n        rowObjects.forEach(function (h, columnIndex) {\n          for (var i = 0; i < h; i++) {\n            var _gridData$getGridObje = _this.gridData.getGridObject(rowIndex, columnIndex, i),\n                _gridData$getGridObje2 = _slicedToArray(_gridData$getGridObje, 2),\n                cube = _gridData$getGridObje2[0],\n                cubeBorder = _gridData$getGridObje2[1];\n\n            if (cube != undefined && cubeBorder != undefined) {\n              if (rowIndex == row && columnIndex == column) {\n                cube.material = _this.visual === 'origin' ? _this.CubeHighlightMaterial[i] : _this.CubeHighlightBasicMaterial[i];\n                // cubeBorder.material.color.setHex(0x000000)\n              } else {\n                cube.material = _this.visual === 'origin' ? _this.CubeMaterial[i] : _this.CubeBasicMaterial[i];\n                // cubeBorder.material.color.setHex(this.CubeBorderColor)\n              }\n            }\n          }\n        });\n      });\n      this.gridData.highlightPosition = { row: row, column: column };\n      this.render();\n    }\n  }, {\n    key: 'updateCubeMaterial',\n    value: function updateCubeMaterial(row, column) {\n      var _this2 = this;\n\n      var pos = this.gridData.highlightPosition;\n      row = row || pos.row;\n      column = column || pos.column;\n      var gridCubeArr = this.gridData.getGridCubeArr();\n      gridCubeArr.forEach(function (rowObjects, rowIndex) {\n        rowObjects.forEach(function (h, columnIndex) {\n          for (var i = 0; i < h; i++) {\n            var _gridData$getGridObje3 = _this2.gridData.getGridObject(rowIndex, columnIndex, i),\n                _gridData$getGridObje4 = _slicedToArray(_gridData$getGridObje3, 2),\n                cube = _gridData$getGridObje4[0],\n                cubeBorder = _gridData$getGridObje4[1];\n\n            if (cube != undefined && cubeBorder != undefined) {\n              if (rowIndex == row && columnIndex == column) {\n                cube.material = _this2.visual === 'origin' ? _this2.CubeHighlightMaterial[i] : _this2.CubeHighlightBasicMaterial[i];\n              } else {\n                cube.material = _this2.visual === 'origin' ? _this2.CubeMaterial[i] : _this2.CubeBasicMaterial[i];\n              }\n            }\n          }\n        });\n      });\n      this.gridData.highlightPosition = { row: row, column: column };\n    }\n\n    /**\r\n     * 删除方块公共接口\r\n     * @param row 行\r\n     * @param column 列\r\n     * @returns {boolean} true 删除成功;false 删除失败\r\n     */\n\n  }, {\n    key: 'deleteCube',\n    value: function deleteCube(row, column) {\n      var _gridData$popObjectAt = this.gridData.popObjectAtPosition(row, column),\n          _gridData$popObjectAt2 = _slicedToArray(_gridData$popObjectAt, 2),\n          toDeleteObj = _gridData$popObjectAt2[0],\n          toDeleteBorder = _gridData$popObjectAt2[1];\n\n      if (toDeleteObj != undefined && toDeleteBorder != undefined) {\n        this.perspectiveViewScene.remove(toDeleteObj);\n        this.perspectiveViewScene.remove(toDeleteBorder);\n        (0, _destroyThreeObject2.default)(toDeleteObj);\n        (0, _destroyThreeObject2.default)(toDeleteBorder);\n        this.render();\n        return true;\n      }\n      return false;\n    }\n\n    /**\r\n     * 添加方块公共接口\r\n     * @param row 行\r\n     * @param column 列\r\n     * @param h 第几个方块\r\n     */\n\n  }, {\n    key: 'addCube',\n    value: function addCube(row, column) {\n      var h = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      //方格中已经添加的方块数\n      var cubeCount = this.gridData.getObjectCountAtPosition(row, column);\n      if (cubeCount < _constants.GRID_SETTING.h) {\n        //构造方块，方块中心点决定方块位置\n        var cube = new _THREE2.default.Mesh(this.CubeGeometry, this.CubeHighlightMaterial[h]);\n\n        var _gridHelper$getCubePo3 = this.gridHelper.getCubePosition(row, column),\n            _gridHelper$getCubePo4 = _slicedToArray(_gridHelper$getCubePo3, 2),\n            x = _gridHelper$getCubePo4[0],\n            z = _gridHelper$getCubePo4[1];\n\n        var point = new _THREE2.default.Vector3(x, (cubeCount + 0.5) * this.CubeSize, z);\n        cube.position.copy(point).add(new _THREE2.default.Vector3(0, 1, 0));\n        cube.position.divideScalar(this.CubeSize).floor().multiplyScalar(this.CubeSize).addScalar(this.CubeSize / 2);\n        var cubeBorder = new _THREE2.default.BoxHelper(cube);\n        cubeBorder.material.color.setHex(this.CubeBorderColor);\n        cube.scale.multiplyScalar(0.98);\n        this.perspectiveViewScene.add(cube);\n        this.perspectiveViewScene.add(cubeBorder);\n        cube.position.y += this.bottom;\n        cubeBorder.position.y += this.bottom;\n        this.gridData.pushObjectAtPosition(row, column, cube, cubeBorder);\n        this.render();\n      }\n    }\n\n    /**\r\n     * 修改四面旋转按钮的状态\r\n     * @param state {Boolean}\r\n     */\n\n  }, {\n    key: 'setButtonStatus',\n    value: function setButtonStatus(state) {\n      $(this.container).find('.js-lego-canvas').find('a').each(function () {\n        if (state) {\n          $(this).addClass('disable_a_href');\n        } else {\n          $(this).removeClass('disable_a_href');\n        }\n      });\n    }\n\n    /**\r\n     * 旋转方块\r\n     * @param rotation 旋转角度\r\n     */\n\n  }, {\n    key: 'rotateCube',\n    value: function rotateCube(rotation) {\n      this.gridHelper.ROTATION = rotation % 360;\n      var alpha = rotation % 360 / 180 * Math.PI;\n      var xzLen = Math.sqrt(Math.pow(this.perspectiveViewCamera.position.x, 2) + Math.pow(this.perspectiveViewCamera.position.z, 2));\n      this.perspectiveViewCamera.position.x = Math.sin(alpha) * xzLen;\n      this.perspectiveViewCamera.position.z = Math.cos(alpha) * xzLen;\n      this.perspectiveViewCamera.lookAt(this.perspectiveViewScene.position);\n      this.render();\n    }\n\n    /**\r\n     * 设置某一格子方块数量\r\n     * @param row 行\r\n     * @param column 列\r\n     * @param count 方块数\r\n     * @returns {boolean} false 设置失败；true 设置成功\r\n     */\n\n  }, {\n    key: 'setCubeCountInPosition',\n    value: function setCubeCountInPosition(row, column, count) {\n      if (row > _constants.GRID_SETTING.row || row < 0 || column > _constants.GRID_SETTING.column || column < 0 || count < 0 || count > _constants.GRID_SETTING.h) return false;\n      //方格中已经添加的方块数\n      var curCount = this.gridData.getObjectCountAtPosition(row, column);\n      for (var i = 0, l = Math.abs(curCount - count); i < l; i++) {\n        if (curCount > count) {\n          this.deleteCube(row, column);\n        } else if (curCount < count) {\n          this.addCube(row, column, i + curCount);\n        }\n      }\n      this.updateHightLightPlane(row, column);\n      return true;\n    }\n\n    /**\r\n     * 重置方块塔状态\r\n     */\n\n  }, {\n    key: 'resetCubeStatus',\n    value: function resetCubeStatus(isRemoveAll) {\n      for (var r = 0; r < this.gridData.row; r++) {\n        for (var c = 0; c < this.gridData.column; c++) {\n          this.setCubeCountInPosition(r, c, 0);\n        }\n      }\n      this.perspectiveViewCamera.position.x = this.PERSPECTIVE_CAMERA_INIT_POSITION.x;\n      this.perspectiveViewCamera.position.y = this.PERSPECTIVE_CAMERA_INIT_POSITION.y;\n      this.perspectiveViewCamera.position.z = this.PERSPECTIVE_CAMERA_INIT_POSITION.z;\n      this.rotateCube(this.GRIDVIEW_ROTATIONS.INIT_ROTATION);\n      this.perspectiveViewCamera.lookAt(this.ZERO_POINT);\n      if (isRemoveAll) {\n        this.gridData.ROTATION = 0;\n        for (var index = this.perspectiveViewScene.children.length; index > 0; index--) {\n          var child = this.perspectiveViewScene.children[index - 1];\n          this.perspectiveViewScene.remove(child);\n          (0, _destroyThreeObject2.default)(child);\n        }\n        (0, _destroyThreeObject2.default)(this.gridData.plane);\n        this.gridData.plane = null;\n        (0, _destroyThreeObject2.default)(this.gridData.highlightPlane);\n        this.gridData.highlightPlane = null;\n        $(this.perspectiveViewRenderer.domElement).off('click');\n      } else {\n        this.setHighlightPlanePosition(0, 0);\n      }\n      this.render();\n    }\n\n    /**\r\n     * 初始化方块塔状态\r\n     * @param gridCubeData {Object} 格子中方块数据，方块高亮点\r\n     * @param gridRotation {Number} 方块旋转角度\r\n     * @param cameraPosition {Object} 相机位置\r\n     */\n\n  }, {\n    key: 'initCubeData',\n    value: function initCubeData(gridCubeData, gridRotation, cameraPosition) {\n      var _this3 = this;\n\n      gridRotation = gridRotation || this.gridHelper.ROTATION;\n      gridCubeData.gridCubeArr.forEach(function (rowArr, row) {\n        rowArr.forEach(function (count, column) {\n          _this3.setCubeCountInPosition(row, column, count);\n        });\n      });\n      this.gridData.highlightPosition.row = gridCubeData.highlightPosition.row;\n      this.gridData.highlightPosition.column = gridCubeData.highlightPosition.column;\n      this.highlightCubeInPosition(gridCubeData.highlightPosition.row, gridCubeData.highlightPosition.column);\n      this.rotateCube(gridRotation);\n      if (cameraPosition) {\n        this.perspectiveViewCamera.position.x = cameraPosition.positionX;\n        this.perspectiveViewCamera.position.y = cameraPosition.positionY;\n        this.perspectiveViewCamera.position.z = cameraPosition.positionZ;\n        this.perspectiveViewCamera.lookAt(this.ZERO_POINT);\n      }\n      this.render();\n      // 初始化平面格子\n      (0, _notify2.default)(gridCubeData.highlightPosition.row, gridCubeData.highlightPosition.column);\n      // 旋转平面格子 初始化时不应该触发 userInput 的动作\n      if (gridRotation % 90 == 0) {\n        (0, _rotateGrid2.default)($(this.container).find('.lego-view-counter-list'), 0); // 左面·正面·等，平面格子不旋转\n      } else {\n        (0, _rotateGrid2.default)($(this.container).find('.lego-view-counter-list'), gridRotation - this.GRIDVIEW_ROTATIONS.INIT_ROTATION);\n      }\n    }\n  }, {\n    key: 'caculateCanvasSize',\n    value: function caculateCanvasSize() {\n      var _this4 = this;\n\n      this.REAL_ESTATE = {\n        width: parseInt($(this.container).find('.main_content').width()),\n        height: parseInt($(this.container).find('.main_content').height())\n      };\n      this.CubeSize = parseInt((this.REAL_ESTATE.width > this.REAL_ESTATE.height ? this.REAL_ESTATE.height : this.REAL_ESTATE.width) / 7);\n\n      //相机视角原点\n      this.ZERO_POINT = new _THREE2.default.Vector3(0, 0, 0);\n      //网格帮助类\n      this.gridHelper = new _GridHelper2.default(_constants.GRID_SETTING.row, _constants.GRID_SETTING.column, this.CubeSize, this.CubeSize);\n      //方块数据类\n      this.gridData = new _GridData2.default(_constants.GRID_SETTING.row, _constants.GRID_SETTING.column, _constants.GRID_SETTING.h);\n      //相机距离\n      this.CAMERA_DISTANCE = Math.sqrt(Math.pow(this.PERSPECTIVE_CAMERA_INIT_POSITION.x, 2) + Math.pow(this.PERSPECTIVE_CAMERA_INIT_POSITION.y, 2) + Math.pow(this.PERSPECTIVE_CAMERA_INIT_POSITION.z, 2));\n      //this.CubeMaterial = new THREE.MeshBasicMaterial({\n      //\tcolor: this.CubeColor,\n      //\toverdraw: true\n      //});\n      this.CubeMaterial = [];\n      this.CubeColor.forEach(function (v) {\n        _this4.CubeMaterial.push(new _THREE2.default.MeshLambertMaterial({\n          color: v,\n          overdraw: 0.5\n        }));\n      });\n\n      this.CubeBasicMaterial = [];\n      this.CubeBasicColor.forEach(function (v) {\n        _this4.CubeBasicMaterial.push(new _THREE2.default.MeshBasicMaterial({\n          color: v,\n          overdraw: 0.5\n        }));\n      });\n      //this.CubeHighlightMaterial = new THREE.MeshBasicMaterial({\n      //\tcolor: this.CubeHighlightColor,\n      //\toverdraw: true\n      //});\n\n      this.CubeHighlightMaterial = [];\n      this.CubeHighlightColor.forEach(function (v) {\n        _this4.CubeHighlightMaterial.push(new _THREE2.default.MeshLambertMaterial({\n          color: v,\n          overdraw: 0.5\n        }));\n      });\n\n      this.CubeHighlightBasicMaterial = [];\n      this.CubeHighlightBasicColor.forEach(function (v) {\n        _this4.CubeHighlightBasicMaterial.push(new _THREE2.default.MeshBasicMaterial({\n          color: v,\n          overdraw: 0.5\n        }));\n      });\n\n      this.CubeGeometry = new _THREE2.default.BoxGeometry(this.CubeSize, this.CubeSize, this.CubeSize);\n    }\n  }, {\n    key: 'onWindowResize',\n    value: function onWindowResize() {\n      this.perspectiveViewCamera.aspect = window.innerWidth / window.innerHeight;\n      this.perspectiveViewCamera.updateProjectionMatrix();\n      this.render();\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      //记录动画播放状态\n      this.playing = null;\n      // 记录状态\n      this.preState = null;\n      // 记录动画数据\n      this.animateData = null;\n\n      $(this.perspectiveViewRenderer.domElement).off('click');\n      $(this.perspectiveViewRenderer.domElement).remove();\n      this.gridPlane = null;\n      this.gridData = null;\n\n      (0, _destroyThreeObject2.default)(this.perspectiveViewScene);\n      this.perspectiveViewScene = null;\n      if (this.perspectiveViewRenderer.hasOwnProperty('dispose')) {\n        this.perspectiveViewRenderer.dispose();\n      }\n      this.perspectiveViewRenderer = null;\n      this.perspectiveViewCamera = null;\n      this.CubeMaterial = null;\n      this.CubeHighlightMaterial = null;\n      this.CubeGeometry.dispose();\n      this.CubeGeometry = null;\n\n      this.mouse = null;\n      this.raycaster = null;\n\n      this.gridHelper.destroy();\n      this.gridHelper = null;\n      this.gridPlane = null;\n      $(this.container).find('button').off('click');\n      this.container = null;\n\n      this.gridTargetRotation = null;\n      this.gridTargetY = null;\n    }\n  }]);\n\n  return PerspectiveViewHelper;\n}();\n\nexports.default = PerspectiveViewHelper;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/PerspectiveViewHelper.js\n// module id = 30\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/PerspectiveViewHelper.js?");

/***/ },
/* 31 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// const three = require('three') // 测试环境使用\nvar three = window.THREE; // 正式环境使用\nexports.default = three;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/THREE.js\n// module id = 31\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/THREE.js?");

/***/ },
/* 32 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * @author 吴玉坤 on 2015/11/11.\r\n * 记录4*4网格每个格子的方块数\r\n */\nvar GridData = function () {\n\t/**\r\n  * 构造 row * column * h 网格\r\n  * @param row 行数\r\n  * @param column 列数\r\n  * @param h 每个格子最多几个方块\r\n  */\n\tfunction GridData(row, column, h) {\n\t\t_classCallCheck(this, GridData);\n\n\t\tthis.row = row;\n\t\tthis.column = column;\n\t\tthis.h = h;\n\t\tthis.grid = new Array();\n\t\tthis.plane = null;\n\t\tthis.highlightPlane = null;\n\t\tthis.meshObjects = [];\n\t\tthis.highlightPosition = { row: 0, column: 0 };\n\t\tthis.initGridData();\n\t}\n\n\t/**\r\n  * 初始化网格\r\n  */\n\n\n\t_createClass(GridData, [{\n\t\tkey: \"initGridData\",\n\t\tvalue: function initGridData() {\n\t\t\tfor (var i = 0; i < this.row; i++) {\n\t\t\t\tthis.grid[i] = new Array();\n\t\t\t\tfor (var j = 0; j < this.column; j++) {\n\t\t\t\t\tthis.grid[i][j] = new Array();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\r\n   * 添加底部平面层\r\n   * @param object\r\n   */\n\n\t}, {\n\t\tkey: \"setPlane\",\n\t\tvalue: function setPlane(object) {\n\t\t\tthis.plane = object;\n\t\t}\n\n\t\t/**\r\n   * 添加高亮层\r\n   * @returns {null|*}\r\n   */\n\n\t}, {\n\t\tkey: \"setHighlightPlane\",\n\t\tvalue: function setHighlightPlane(object) {\n\t\t\tthis.highlightPlane = object;\n\t\t}\n\n\t\t/**\r\n   * 获取高亮层\r\n   * @returns {object} 高亮层Mesh\r\n   */\n\n\t}, {\n\t\tkey: \"getHighlightPlane\",\n\t\tvalue: function getHighlightPlane() {\n\t\t\treturn this.highlightPlane;\n\t\t}\n\n\t\t/**\r\n   * 在某个位置上添加方块\r\n   * @param row 行\r\n   * @param column 列\r\n   * @param cube 方块对象\r\n   * @returns {boolean} true 添加成功；false 添加失败\r\n   */\n\n\t}, {\n\t\tkey: \"pushObjectAtPosition\",\n\t\tvalue: function pushObjectAtPosition(row, column, cube, cubeBorder) {\n\t\t\tif (row < 0 || row >= this.row || column < 0 || column >= this.column) return false;\n\t\t\tthis.meshObjects.push(cube);\n\t\t\tthis.meshObjects.push(cubeBorder);\n\t\t\tthis.grid[row][column].push(this.meshObjects.length - 1);\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\r\n   * 减少某个位置上的方块\r\n   * @param row 行\r\n   * @param column 列\r\n   * @returns [object1,object2]，从网格删除，并返回，undefined表示越界，不在网格内。object1 方块，object2 方块边界\r\n   */\n\n\t}, {\n\t\tkey: \"popObjectAtPosition\",\n\t\tvalue: function popObjectAtPosition(row, column) {\n\t\t\tif (row < 0 || row >= this.row || column < 0 || column >= this.column) return [undefined, undefined];\n\n\t\t\tvar hLen = this.grid[row][column].length;\n\t\t\tvar index = this.grid[row][column][hLen - 1];\n\t\t\tif (index == undefined) return [undefined, undefined];\n\t\t\tvar cubeBorder = this.meshObjects[index];\n\t\t\tvar cube = this.meshObjects[index - 1];\n\t\t\tif (cube != undefined) {\n\t\t\t\tthis.grid[row][column].splice(hLen - 1, 1);\n\t\t\t\t//each obj's index in meshObjects changed,need reindex the grid\n\t\t\t\tfor (var i = 0; i < this.row; i++) {\n\t\t\t\t\tfor (var j = 0; j < this.column; j++) {\n\t\t\t\t\t\tfor (var k = 0, l = this.grid[i][j].length; k < l; k++) {\n\t\t\t\t\t\t\tvar val = this.grid[i][j][k];\n\t\t\t\t\t\t\tif (val > 1 && val > index) this.grid[i][j][k] = val - 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.meshObjects.splice(index - 1, 2);\n\t\t\t}\n\t\t\treturn [cube, cubeBorder];\n\t\t}\n\n\t\t/**\r\n   * 获取某个位置的方块\r\n   * @param row 行\r\n   * @param column 列\r\n   * @param h 高度，纵向第几个方块，\r\n   * @returns [object1,object2]， 方块和网格对象，undefined表示越界，不在网格内\r\n   */\n\n\t}, {\n\t\tkey: \"getGridObject\",\n\t\tvalue: function getGridObject(row, column, h) {\n\t\t\tif (row < 0 || row >= this.row || column < 0 || column >= this.column) return [undefined, undefined];\n\t\t\tvar index = this.grid[row][column][h];\n\t\t\tif (index == undefined) return [undefined, undefined];\n\t\t\treturn [this.meshObjects[index - 1], this.meshObjects[index]];\n\t\t}\n\n\t\t/**\r\n   * 获取第row行,第column列上的方块个数\r\n   * @param row 行\r\n   * @param column 列\r\n   * @returns {int} 方块数,undefined表示越界，不在网格内\r\n   */\n\n\t}, {\n\t\tkey: \"getObjectCountAtPosition\",\n\t\tvalue: function getObjectCountAtPosition(row, column) {\n\t\t\tif (row < 0 || row >= this.row || column < 0 || column >= this.column) return undefined;\n\t\t\treturn this.grid[row][column].length;\n\t\t}\n\n\t\t/**\r\n   * 放回网格上的所有mesh对象\r\n   * @returns {Array} 所有mesh对象\r\n   */\n\n\t}, {\n\t\tkey: \"getMeshObjects\",\n\t\tvalue: function getMeshObjects() {\n\t\t\tvar objects = [];\n\t\t\tobjects.push(this.plane);\n\t\t\treturn objects.concat(this.meshObjects);\n\t\t}\n\n\t\t/**\r\n   * 获取网格所有方块数量\r\n   */\n\n\t}, {\n\t\tkey: \"getGridCubeTotalCount\",\n\t\tvalue: function getGridCubeTotalCount() {\n\t\t\tvar totalCount = 0;\n\t\t\tfor (var i = 0; i < this.row; i++) {\n\t\t\t\tfor (var j = 0; j < this.column; j++) {\n\t\t\t\t\ttotalCount += this.grid[i][j].length;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn totalCount;\n\t\t}\n\n\t\t/**\r\n   * 获取网格上每个格子方块数量\r\n   * @returns {Array} 网格上每个格子方块数量\r\n   */\n\n\t}, {\n\t\tkey: \"getGridCubeArr\",\n\t\tvalue: function getGridCubeArr() {\n\t\t\tvar gridCubeArr = new Array();\n\t\t\tfor (var i = 0; i < this.column; i++) {\n\t\t\t\tvar columnArr = new Array();\n\t\t\t\tfor (var j = 0; j < this.row; j++) {\n\t\t\t\t\tcolumnArr.push(this.grid[i][j].length);\n\t\t\t\t}\n\t\t\t\tgridCubeArr.push(columnArr);\n\t\t\t}\n\t\t\treturn gridCubeArr;\n\t\t}\n\t}]);\n\n\treturn GridData;\n}();\n\nexports.default = GridData;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/GridData.js\n// module id = 32\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/GridData.js?");

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author 吴玉坤 on 2015/11/11.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _THREE = __webpack_require__(31);\n\nvar _THREE2 = _interopRequireDefault(_THREE);\n\nvar _destroyThreeObject = __webpack_require__(34);\n\nvar _destroyThreeObject2 = _interopRequireDefault(_destroyThreeObject);\n\nvar _autoDetectRenderer = __webpack_require__(35);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar GRID_COLOR = 0x95abbb;\nvar GRID_FILL_COLOR = 0xffffff;\n\nvar GridHelper = function () {\n\tfunction GridHelper(row, column, rSize, cSize) {\n\t\t_classCallCheck(this, GridHelper);\n\n\t\tthis.row = row;\n\t\tthis.column = column;\n\t\tthis.rSize = rSize;\n\t\tthis.cSize = cSize;\n\t\tthis.ROTATION = 0;\n\t}\n\n\t_createClass(GridHelper, [{\n\t\tkey: 'createView',\n\t\tvalue: function createView() {\n\t\t\tif (!this.gridPlane) {\n\t\t\t\tthis.rStart = -Math.floor(this.row / 2) * this.rSize;\n\t\t\t\tthis.rEnd = this.row * this.rSize + this.rStart;\n\n\t\t\t\tthis.cStart = Math.floor(this.column / 2) * this.cSize;\n\t\t\t\tthis.cEnd = -this.column * this.cSize + this.cStart;\n\n\t\t\t\tthis.gridPlane = new _THREE2.default.Object3D();\n\t\t\t\tthis.gridMaterial = new _THREE2.default.LineBasicMaterial({ color: GRID_COLOR, linewidth: 1, overdraw: 0.5 });\n\t\t\t\tthis.backgroundMaterial = new _THREE2.default.MeshBasicMaterial({ color: GRID_FILL_COLOR, overdraw: 0.5 });\n\t\t\t\tthis.gridMeshMaterial = new _THREE2.default.MeshBasicMaterial({ color: GRID_COLOR, overdraw: 0.5 });\n\t\t\t\tif (!_autoDetectRenderer.isWebGLRenderer) {\n\t\t\t\t\tfor (var i = 0; i < this.row; i++) {\n\t\t\t\t\t\tfor (var j = 0; j < this.column; j++) {\n\t\t\t\t\t\t\tvar shape = new _THREE2.default.Shape();\n\t\t\t\t\t\t\tshape.moveTo(0, 0);\n\t\t\t\t\t\t\tshape.lineTo(0, this.cSize - 2);\n\t\t\t\t\t\t\tshape.lineTo(this.rSize - 2, this.cSize - 2);\n\t\t\t\t\t\t\tshape.lineTo(this.rSize - 2, 0);\n\t\t\t\t\t\t\tshape.lineTo(0, 0);\n\n\t\t\t\t\t\t\tvar group = new _THREE2.default.Object3D();\n\t\t\t\t\t\t\tvar geometry = new _THREE2.default.ShapeGeometry(shape);\n\n\t\t\t\t\t\t\tvar gridFill = new _THREE2.default.Mesh(geometry, this.backgroundMaterial);\n\t\t\t\t\t\t\tvar points = shape.createPointsGeometry();\n\t\t\t\t\t\t\tvar border = new _THREE2.default.Line(points, this.gridMaterial);\n\t\t\t\t\t\t\tborder.name = 'border';\n\t\t\t\t\t\t\tgridFill.name = 'gridFill';\n\t\t\t\t\t\t\tgroup.add(border);\n\t\t\t\t\t\t\tgroup.add(gridFill);\n\t\t\t\t\t\t\tgroup.rotateX(-Math.PI / 2);\n\t\t\t\t\t\t\tgroup.position.set(i * this.rSize + this.rStart, 0, this.cStart - j * this.cSize);\n\t\t\t\t\t\t\tthis.gridPlane.add(group);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar outBorderShape = new _THREE2.default.Shape();\n\t\t\t\t\toutBorderShape.name = 'border';\n\t\t\t\t\toutBorderShape.moveTo(this.rStart, this.cStart);\n\t\t\t\t\toutBorderShape.lineTo(this.rStart, this.cEnd);\n\t\t\t\t\toutBorderShape.lineTo(this.rEnd, this.cEnd);\n\t\t\t\t\toutBorderShape.lineTo(this.rEnd, this.cStart);\n\t\t\t\t\toutBorderShape.lineTo(this.rStart, this.cStart);\n\t\t\t\t\tvar outBorder = new _THREE2.default.Line(outBorderShape.createPointsGeometry(), this.gridMaterial);\n\t\t\t\t\toutBorder.rotateX(-Math.PI / 2);\n\t\t\t\t\tthis.gridPlane.add(outBorder);\n\t\t\t\t} else {\n\t\t\t\t\tvar _border = new _THREE2.default.Object3D();\n\t\t\t\t\tfor (var _i = 0; _i <= this.row; _i++) {\n\t\t\t\t\t\tvar _3DLine = new _THREE2.default.Mesh(new _THREE2.default.CylinderGeometry(0.5, 0.5, this.column * this.rSize, 4), this.gridMeshMaterial);\n\t\t\t\t\t\t_3DLine.position.set(0, 0, (_i - 2) * this.rSize);\n\t\t\t\t\t\t_border.add(_3DLine);\n\t\t\t\t\t}\n\t\t\t\t\tfor (var _i2 = 0; _i2 <= this.column; _i2++) {\n\t\t\t\t\t\tvar _3DLine2 = new _THREE2.default.Mesh(new _THREE2.default.CylinderGeometry(0.5, 0.5, this.row * this.rSize, 4), this.gridMeshMaterial);\n\t\t\t\t\t\t_3DLine2.position.set(0, (_i2 - 2) * this.rSize, 0);\n\t\t\t\t\t\t_3DLine2.rotateX(Math.PI / 2);\n\t\t\t\t\t\t_border.add(_3DLine2);\n\t\t\t\t\t}\n\t\t\t\t\t//网格\n\t\t\t\t\t//let geometry = new THREE.Geometry();\n\t\t\t\t\t//for (var i = this.cStart; i >= this.cEnd; i -= this.cSize) {\n\t\t\t\t\t//\tgeometry.vertices.push(new THREE.Vector3(this.rStart, 0, i));\n\t\t\t\t\t//\tgeometry.vertices.push(new THREE.Vector3(this.rEnd, 0, i));\n\t\t\t\t\t//}\n\t\t\t\t\t//for (var i = this.rStart; i <= this.rEnd; i += this.rSize) {\n\t\t\t\t\t//\tgeometry.vertices.push(new THREE.Vector3(i, 0, this.cStart));\n\t\t\t\t\t//\tgeometry.vertices.push(new THREE.Vector3(i, 0, this.cEnd));\n\t\t\t\t\t//}\n\t\t\t\t\t//let grid = new THREE.LineSegments(geometry, this.gridMaterial);\n\t\t\t\t\t_border.name = 'border';\n\t\t\t\t\t_border.position.y = -1;\n\t\t\t\t\t_border.rotateZ(Math.PI / 2);\n\t\t\t\t\tthis.gridPlane.add(_border);\n\t\t\t\t\tvar planeGeometry = new _THREE2.default.PlaneBufferGeometry(this.row * this.rSize, this.column * this.cSize);\n\t\t\t\t\t// planeGeometry.rotateX(-Math.PI / 2);\n\t\t\t\t\t//网格白色底层\n\t\t\t\t\tvar gridBackground = new _THREE2.default.Mesh(planeGeometry, this.backgroundMaterial);\n\t\t\t\t\tgridBackground.name = 'gridFill';\n\t\t\t\t\tgridBackground.rotateX(-Math.PI / 2);\n\t\t\t\t\tgridBackground.position.y = -2;\n\t\t\t\t\tthis.gridPlane.add(gridBackground);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this.gridPlane;\n\t\t}\n\t}, {\n\t\tkey: 'getRowStart',\n\t\tvalue: function getRowStart() {\n\t\t\treturn this.rStart;\n\t\t}\n\t}, {\n\t\tkey: 'getRowEnd',\n\t\tvalue: function getRowEnd() {\n\t\t\treturn this.rStart;\n\t\t}\n\t}, {\n\t\tkey: 'getColumnStart',\n\t\tvalue: function getColumnStart() {\n\t\t\treturn this.cStart;\n\t\t}\n\t}, {\n\t\tkey: 'getColumnEnd',\n\t\tvalue: function getColumnEnd() {\n\t\t\treturn this.cStart;\n\t\t}\n\t}, {\n\t\tkey: 'isPointInGrid',\n\t\tvalue: function isPointInGrid(positionRow, positionColumn) {\n\t\t\treturn positionColumn <= this.cStart && positionColumn >= this.cEnd && positionRow >= this.rStart && positionRow <= this.rEnd;\n\t\t}\n\t}, {\n\t\tkey: 'getIndexByPosition',\n\t\tvalue: function getIndexByPosition(positionRow, positionColumn, faceRow, faceColumn) {\n\t\t\t//特殊处理，纠正鼠标事件误差。\n\t\t\tif ((faceRow == 1 || faceRow == -1) && (Math.abs(Math.abs(positionRow % this.rSize) - this.rSize) < 0.000001 || Math.abs(Math.abs(positionRow % this.rSize) - this.rSize) > this.rSize - 0.000001)) {\n\t\t\t\tpositionRow = faceRow == 1 ? Math.floor(positionRow) : Math.ceil(positionRow);\n\t\t\t}\n\t\t\tif ((faceColumn == 1 || faceColumn == -1) && (Math.abs(Math.abs(positionColumn % this.cSize) - this.cSize) < 0.000001 || Math.abs(Math.abs(positionColumn % this.cSize) - this.cSize) > this.cSize - 0.000001)) {\n\t\t\t\tpositionColumn = faceColumn == -1 ? Math.ceil(positionColumn) : Math.floor(positionColumn);\n\t\t\t}\n\t\t\tvar rIndex = faceRow > 0 ? Math.ceil((positionRow - this.rStart) / this.rSize) - 1 : Math.floor((positionRow - this.rStart) / this.rSize);\n\t\t\tvar cIndex = faceColumn < 0 ? Math.ceil((this.cStart - positionColumn) / this.cSize) - 1 : Math.floor((this.cStart - positionColumn) / this.cSize);\n\t\t\treturn [rIndex, cIndex];\n\t\t}\n\n\t\t/**\r\n   * @param row 第几行\r\n   * @param column 第几列\r\n   * @returns {*[]} 方格的中心点\r\n   */\n\n\t}, {\n\t\tkey: 'getCubePosition',\n\t\tvalue: function getCubePosition(row, column) {\n\t\t\treturn [(row + 0.5) * this.rSize + this.rStart, this.cStart - (column + 0.5) * this.cSize];\n\t\t}\n\t}, {\n\t\tkey: 'updateSize',\n\t\tvalue: function updateSize(rSize, cSize) {\n\t\t\tthis.rSize = rSize;\n\t\t\tthis.cSize = cSize;\n\t\t}\n\t}, {\n\t\tkey: 'destroy',\n\t\tvalue: function destroy() {\n\t\t\tif (!this.gridPlane) {\n\t\t\t\t(0, _destroyThreeObject2.default)(this.gridPlane);\n\t\t\t\tthis.gridPlane = null;\n\t\t\t\tthis.gridMaterial = null;\n\t\t\t\tthis.backgroundMaterial = null;\n\t\t\t}\n\t\t\tthis.row = null;\n\t\t\tthis.column = null;\n\t\t\tthis.rSize = null;\n\t\t\tthis.cSize = null;\n\t\t\tthis.ROTATION = null;\n\t\t\tthis.rStart = null;\n\t\t\tthis.rEnd = null;\n\t\t\tthis.cStart = null;\n\t\t\tthis.cEnd = null;\n\t\t}\n\t}]);\n\n\treturn GridHelper;\n}();\n\nexports.default = GridHelper;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/GridHelper.js\n// module id = 33\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/GridHelper.js?");

/***/ },
/* 34 */
/***/ function(module, exports) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.default = destroyThreeObj;\n/**\r\n *释放threejs对象内存\r\n */\nfunction destroyThreeObj(obj) {\n\tif (!obj) return;\n\tif (Object.keys(obj).length < 1) return;\n\tif (obj.children && obj.children.length > 0) {\n\t\tfor (var i = 0; i < obj.children.length; i++) {\n\t\t\tdestroyThreeObj(obj.children[i]);\n\t\t}\n\t}\n\tif (obj.geometry) obj.geometry.dispose();\n\tif (obj.material) {\n\t\tobj.material.dispose();\n\t\tif (obj.material.map && obj.material.map.dispose) {\n\t\t\tobj.material.map.dispose();\n\t\t}\n\t}\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/destroyThreeObject.js\n// module id = 34\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/destroyThreeObject.js?");

/***/ },
/* 35 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.isWebGLRenderer = undefined;\nexports.default = autoDetectRender;\n\nvar _THREE = __webpack_require__(31);\n\nvar _THREE2 = _interopRequireDefault(_THREE);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar isWebGLRenderer = undefined;\n\nexports.isWebGLRenderer = isWebGLRenderer;\nfunction autoDetectRender(options, noWebGL) {\n\tif (!noWebGL && isWebGLSupported()) {\n\t\texports.isWebGLRenderer = isWebGLRenderer = true;\n\t\treturn new _THREE2.default.WebGLRenderer(options);\n\t}\n\n\texports.isWebGLRenderer = isWebGLRenderer = false;\n\treturn new _THREE2.default.CanvasRenderer(options);\n}\n\nfunction isWebGLSupported() {\n\tvar contextOptions = { stencil: true };\n\ttry {\n\t\tif (!window.WebGLRenderingContext) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar canvas = document.createElement('canvas'),\n\t\t    gl = canvas.getContext('webgl', contextOptions) || canvas.getContext('experimental-webgl', contextOptions);\n\n\t\tvar isSuport = !!(gl && gl.getContextAttributes().stencil);\n\t\tcanvas = null;\n\t\tgl = null;\n\t\treturn isSuport;\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/autoDetectRenderer.js\n// module id = 35\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/autoDetectRenderer.js?");

/***/ },
/* 36 */
/***/ function(module, exports) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n// 定义网格方块数量\nvar GRID_SETTING = exports.GRID_SETTING = {\n\trow: 4,\n\tcolumn: 4,\n\th: 4\n};\n\n// 与 native 通信的事件名\nvar eventName = exports.eventName = 'drawLego';\n// addon 的名称\nvar addonName = exports.addonName = 'Lego';\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/constants.js\n// module id = 36\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/constants.js?");

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	eval("\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (input) {\n  var emSize = parseFloat($(_presenter2.default.view).find(\".exam_skin_wood\").css(\"font-size\"));\n  return emSize * input;\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/utils/em.js\n// module id = 37\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/utils/em.js?");

/***/ },
/* 38 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getState = getState;\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  var legoData = {\n    width: '100%',\n    playing: _presenter2.default.perspectiveViewHelper.playing !== 0,\n    modalActive: _presenter2.default.modalActive,\n    clearDisabled: _presenter2.default.perspectiveViewHelper.clearDisabled,\n    visual: _presenter2.default.perspectiveViewHelper.visual\n  };\n  if (legoData.playing) {\n    legoData.data = _presenter2.default.perspectiveViewHelper.preState;\n    legoData.animateData = _presenter2.default.perspectiveViewHelper.animateData;\n  } else {\n    legoData.data = getState();\n  }\n  return legoData;\n};\n\nfunction getState() {\n  var legoState = new Object();\n  legoState.gridData = new Object();\n  legoState.gridData.gridCubeArr = _presenter2.default.perspectiveViewHelper.gridData.getGridCubeArr();\n  legoState.gridData.highlightPosition = _presenter2.default.perspectiveViewHelper.gridData.highlightPosition;\n  legoState.gridRotation = _presenter2.default.perspectiveViewHelper.gridTargetRotation;\n  if (legoState.gridRotation == null) {\n    legoState.gridRotation = _presenter2.default.perspectiveViewHelper.gridHelper.ROTATION;\n    legoState.cameraPosition = new Object();\n    legoState.cameraPosition.positionX = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.x;\n    legoState.cameraPosition.positionY = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.y;\n    legoState.cameraPosition.positionZ = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.z;\n  } else {\n    legoState.cameraPosition = new Object();\n    legoState.cameraPosition.positionY = _presenter2.default.perspectiveViewHelper.gridTargetY;\n    var xzLen = Math.sqrt(Math.pow(_presenter2.default.perspectiveViewHelper.CAMERA_DISTANCE, 2) - Math.pow(_presenter2.default.perspectiveViewHelper.gridTargetY, 2));\n    legoState.cameraPosition.positionX = xzLen * Math.sin(legoState.gridRotation / 180 * Math.PI);\n    legoState.cameraPosition.positionZ = xzLen * Math.cos(legoState.gridRotation / 180 * Math.PI);\n  }\n  return legoState;\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/getExtendData.js\n// module id = 38\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/getExtendData.js?");

/***/ },
/* 39 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function () {\n    var $view = $(_presenter2.default.view);\n    $view.find('.btn-left-view').find('.ui_btn_handle_text').html(_presenter2.default._i18n['lego_left']);\n    $view.find('.btn-vertical-view').find('.ui_btn_handle_text').html(_presenter2.default._i18n['lego_top']);\n    $view.find('.btn-front-view').find('.ui_btn_handle_text').html(_presenter2.default._i18n['lego_front']);\n    $view.find('.btn-origin-view').find('.ui_btn_handle_text').html(_presenter2.default._i18n['lego_original']);\n    $view.find('.i18n_clear').html(_presenter2.default._i18n['lego_clear']);\n    $view.find('.i18n_sure').html(_presenter2.default._i18n['lego_sure']);\n    $view.find('.i18n_cancel').html(_presenter2.default._i18n['lego_cancel']);\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/setLanguage.js\n// module id = 39\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/setLanguage.js?");

/***/ },
/* 40 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  $('._js_fontana_clear').on('mouseup click touchup', function (e) {\n    e.stopPropagation();\n    if ($('._js_fontana_clear').hasClass('disabled')) return;\n    $('._js_fontana_mask').removeClass('hide_dom');\n    _presenter2.default.modalActive = true;\n  });\n  $('._js_fontana_sure').on('mousedown click touchstart', function (e) {\n    e.stopPropagation();\n    var initGridData = {\n      gridCubeArr: [[0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0]],\n      highlightPosition: {\n        row: -1,\n        column: -1\n      }\n    };\n    _presenter2.default.perspectiveViewHelper.initCubeData(initGridData);\n    $('._js_fontana_mask').addClass('hide_dom');\n    _presenter2.default.modalActive = false;\n  });\n  $('._js_fontana_cancel').on('mouseup click touchup', function (e) {\n    e.stopPropagation();\n    $('._js_fontana_mask').addClass('hide_dom');\n    _presenter2.default.modalActive = false;\n  });\n  $(_presenter2.default.view).on('mousedown click touchstart', function (e) {\n    e.stopPropagation();\n    var tagName = e.target.tagName;\n    var cond = tagName === 'CANVAS';\n    var target = $(e.target);\n    // console.log(target)\n\n    var classNames = ['lego-view__panel__cell', 'plus', 'sign', '_js_keep_focus'];\n    if (!(isArea(target, classNames) || cond)) _presenter2.default.perspectiveViewHelper.clearHightLight();\n  });\n  $('body').keydown(function (e) {\n    var keyCode = e.keyCode;\n    var cond1 = keyCode >= 48 && keyCode <= 52;\n    var cond2 = keyCode >= 96 && keyCode <= 100;\n    cond1 && setCube(keyCode - 48);\n    cond2 && setCube(keyCode - 96);\n  });\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _notify = __webpack_require__(11);\n\nvar _notify2 = _interopRequireDefault(_notify);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * 设置当前高亮块的数量\r\n * @param count\r\n */\n/**\r\n * Created by hellohy on 2017/5/9.\r\n * 键盘输入0-4生成相应方块，清空按钮功能\r\n */\nvar setCube = function setCube(count) {\n  var helper = _presenter2.default.perspectiveViewHelper;\n  var pos = helper.gridData.highlightPosition;\n  helper.setCubeCountInPosition(pos.row, pos.column, count);\n  (0, _notify2.default)(pos.row, pos.column);\n};\n\n/**\r\n * 根据类名判断是否是点击失去焦点区域\r\n * @param $target\r\n * @param classNames\r\n */\nvar isArea = function isArea($target, classNames) {\n  var returnVal = false;\n  classNames.every(function (v) {\n    returnVal = $target.hasClass(v) || $target.parent().hasClass(v) || $target.parent().parent().hasClass(v);\n    return !returnVal;\n  });\n  return returnVal;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/bindEvent.js\n// module id = 40\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/bindEvent.js?");

/***/ },
/* 41 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (jsonData, options) {\n\tconsole.log('set state:');\n\tif (options && options.isClassroomExam) {\n\t\t//字符串转json\n\t\tvar state = null;\n\t\ttry {\n\t\t\tstate = JSON.parse(jsonData);\n\t\t} catch (err) {\n\t\t\tconsole.log('state data error');\n\t\t}\n\t\tif (state) {\n\t\t\t//状态恢复\n\t\t\t_presenter2.default.perspectiveViewHelper.initCubeData(state.legoState.gridData, state.legoState.gridRotation, state.legoState.cameraPosition);\n\t\t}\n\t}\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/setState.js\n// module id = 41\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/setState.js?");

/***/ },
/* 42 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (params) {\n\tif (_presenter2.default.controller) {\n\t\t_presenter2.default.controller.getState().savePageState();\n\t}\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/saveState.js\n// module id = 42\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/saveState.js?");

/***/ },
/* 43 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function () {\n\tvar legoState = new Object();\n\tlegoState.gridData = new Object();\n\tlegoState.gridData.gridCubeArr = _presenter2.default.perspectiveViewHelper.gridData.getGridCubeArr();\n\tlegoState.gridData.highlightPosition = _presenter2.default.perspectiveViewHelper.gridData.highlightPosition;\n\tlegoState.gridRotation = _presenter2.default.perspectiveViewHelper.gridHelper.ROTATION;\n\tlegoState.cameraPosition = new Object();\n\tlegoState.cameraPosition.positionX = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.x;\n\tlegoState.cameraPosition.positionY = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.y;\n\tlegoState.cameraPosition.positionZ = _presenter2.default.perspectiveViewHelper.perspectiveViewCamera.position.z;\n\n\tvar state = {\n\t\tmodule_id: _presenter2.default.model.ID,\n\t\tlegoState: legoState\n\t};\n\treturn JSON.stringify(state);\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/getState.js\n// module id = 43\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/getState.js?");

/***/ },
/* 44 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  (0, _reset2.default)(false);\n  window.$(_presenter2.default.view).find('.js-lego-view').addClass('is-hide');\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _reset = __webpack_require__(10);\n\nvar _reset2 = _interopRequireDefault(_reset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/pageChange.js\n// module id = 44\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/pageChange.js?");

/***/ },
/* 45 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  (0, _reset2.default)(true);\n};\n\nvar _reset = __webpack_require__(10);\n\nvar _reset2 = _interopRequireDefault(_reset);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/pageLeave.js\n// module id = 45\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/pageLeave.js?");

/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _getExtendData = __webpack_require__(38);\n\nvar _getExtendData2 = _interopRequireDefault(_getExtendData);\n\nvar _getQuestionInfo = __webpack_require__(47);\n\nvar _getQuestionInfo2 = _interopRequireDefault(_getQuestionInfo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n\treturn {\n\t\tgetQuestionInfo: _getQuestionInfo2.default,\n\t\tgetExtendData: _getExtendData2.default\n\t};\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/getService.js\n// module id = 46\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/getService.js?");

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n\tvar question_id = '',\n\t    question_url = '';\n\tif (_presenter2.default.model !== undefined) {\n\t\ttry {\n\t\t\tquestion_id = _presenter2.default.model.question_id;\n\t\t\tquestion_url = JSON.stringify(_presenter2.default.model.question_url);\n\t\t} catch (e) {\n\t\t\tconsole.log('json stringify failed');\n\t\t}\n\t}\n\treturn {\n\t\tid: question_id,\n\t\tdispatchOnly: true,\n\t\ttype_code: 'nd_lego',\n\t\ttype_name: '方块塔',\n\t\turl: question_url,\n\t\tnotExistStatistics: true,\n\t\tnoNeedQuizProgress: true\n\t};\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/getQuestionInfo.js\n// module id = 47\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/getQuestionInfo.js?");

/***/ },
/* 48 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (controller) {\n\t_presenter2.default.controller = controller;\n\t_presenter2.default.eventBus = controller.getEventBus();\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/setPlayerController.js\n// module id = 48\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/setPlayerController.js?");

/***/ },
/* 49 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (eventName, eventData) {\n\tswitch (eventName) {\n\t\tcase 'SyncCallback':\n\t\t\tSyncCallback(eventData);\n\t\t\tbreak;\n\t\tcase 'PageLoaded':\n\t\t\t//console.log('PageLoaded');\n\t\t\tbreak;\n\t\tdefault:\n\t\t// console.log nothing\n\t}\n};\n\nvar SyncCallback = function SyncCallback(eventData) {\n\tvar type = eventData.type,\n\t    value = eventData.value;\n\n\tvar $view = window.$(_presenter2.default.view);\n\tswitch (type) {\n\t\tcase 'request':\n\t\t\t// 发送任务\n\t\t\t_presenter2.default.syncId = value.syncId;\n\t\t\tif (value.result) {\n\t\t\t\t// 成功\n\t\t\t\t$view.find('.js-stop-sync-button').show();\n\t\t\t} else {\n\t\t\t\twindow.ClassroomUtils.showTipMessageBox('同步题目失败');\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'cancel':\n\t\t\t// 结束同步\n\t\t\tif (value.result) {\n\t\t\t\t$view.find('.js-stop-sync-button').hide();\n\t\t\t} else {\n\t\t\t\twindow.ClassroomUtils.showMessageBox([{\n\t\t\t\t\thtml: '关闭'\n\t\t\t\t}, {\n\t\t\t\t\thtml: '重试',\n\t\t\t\t\ttarget: 'h5',\n\t\t\t\t\tcallback: {\n\t\t\t\t\t\teventName: 'Lego',\n\t\t\t\t\t\teventData: {\n\t\t\t\t\t\t\tsource: _presenter2.default.model.ID,\n\t\t\t\t\t\t\titem: 'retry'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}], '结束任务失败！');\n\t\t\t}\n\t\t\tbreak;\n\t}\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/onEventReceived.js\n// module id = 49\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/onEventReceived.js?");

/***/ },
/* 50 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (view, model) {\n\t// 初始化数据\n\tif (model !== undefined && model.hasOwnProperty('question_url')) {\n\t\ttry {\n\t\t\tvar content = model.question_url.content;\n\t\t\t_presenter2.default.perspectiveViewHelper.initCubeData(content.gridData, content.gridRotation, content.cameraPosition);\n\t\t} catch (e) {}\n\t}\n\n\tif (model.__ExtendModel && !$.isEmptyObject(model.__ExtendModel)) {\n\t\ttry {\n\t\t\tvar _content = model.__ExtendModel;\n\t\t\t_presenter2.default.perspectiveViewHelper.initCubeData(_content.gridData, _content.gridRotation, _content.cameraPosition);\n\t\t} catch (e) {}\n\t}\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/pageShow.js\n// module id = 50\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/pageShow.js?");

/***/ },
/* 51 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function () {\n\t_presenter2.default.perspectiveViewHelper.destroy();\n\t_presenter2.default.perspectiveViewHelper = null;\n\t_presenter2.default.view = null;\n\t_presenter2.default.model = null;\n\t$('._js_fontana_clear').off();\n\t$('._js_fontana_sure').off();\n\t$('._js_fontana_cancel').off();\n\t$('body').off();\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/destroy.js\n// module id = 51\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/destroy.js?");

/***/ },
/* 52 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nexports.default = function (urlParams) {\n\t_presenter2.default.langType = urlParams._lang_;\n\tif (urlParams.sys) {\n\t\tswitch (urlParams.sys) {\n\t\t\tcase 'homework':\n\t\t\t\t_presenter2.default.isHomeWork = true;\n\t\t\t\tbreak;\n\t\t\tcase 'pptshell':\n\t\t\t\t_presenter2.default.isPPTShell = true;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t_presenter2.default.isHomeWork = false;\n\t\t}\n\t}\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Created by wuyukun on 2015/12/10.\r\n */\n;\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/setUrlParams.js\n// module id = 52\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/setUrlParams.js?");

/***/ },
/* 53 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (path) {\n  _presenter2.default.path = path;\n};\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/setBasePath.js\n// module id = 53\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/setBasePath.js?");

/***/ },
/* 54 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.initTeacherMobile = initTeacherMobile;\nexports.initStudentMobile = initStudentMobile;\nexports.initProjectionMobile = initProjectionMobile;\nexports.initWeb = initWeb;\nexports.initTeacherPc = initTeacherPc;\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction initDefault() {\n\t_presenter2.default.isTeacherMobile = false;\n\t_presenter2.default.isStudentMobile = false;\n\t_presenter2.default.isProjectionMobile = false;\n\t_presenter2.default.isTeacherPc = false;\n\t_presenter2.default.isWeb = false;\n\t_presenter2.default.isApp = false;\n}\n\nfunction initTeacherMobile() {\n\tinitDefault();\n\t_presenter2.default.isTeacherMobile = true;\n\t_presenter2.default.isApp = true;\n}\n\nfunction initStudentMobile() {\n\tinitDefault();\n\t_presenter2.default.isStudentMobile = true;\n\t_presenter2.default.isApp = true;\n}\n\nfunction initProjectionMobile() {\n\tinitDefault();\n\t_presenter2.default.isProjectionMobile = true;\n\t_presenter2.default.isApp = true;\n}\n\nfunction initWeb() {\n\tinitDefault();\n\t_presenter2.default.isWeb = true;\n\t_presenter2.default.isApp = false;\n}\n\nfunction initTeacherPc() {\n\tinitDefault();\n\t_presenter2.default.isTeacherPc = true;\n\t_presenter2.default.isApp = false;\n}\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/runtime.js\n// module id = 54\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/runtime.js?");

/***/ },
/* 55 */
/***/ function(module, exports, __webpack_require__) {

	eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _presenter = __webpack_require__(2);\n\nvar _presenter2 = _interopRequireDefault(_presenter);\n\nvar _destroyThreeObject = __webpack_require__(34);\n\nvar _destroyThreeObject2 = _interopRequireDefault(_destroyThreeObject);\n\nvar _getExtendData = __webpack_require__(38);\n\nvar _getExtendData2 = _interopRequireDefault(_getExtendData);\n\nvar _main = __webpack_require__(12);\n\nvar _main2 = _interopRequireDefault(_main);\n\nvar _normalize = __webpack_require__(20);\n\nvar _normalize2 = _interopRequireDefault(_normalize);\n\nvar _cacheVnode = __webpack_require__(19);\n\nvar _cacheVnode2 = _interopRequireDefault(_cacheVnode);\n\nvar _counterList = __webpack_require__(21);\n\nvar _counterList2 = _interopRequireDefault(_counterList);\n\nvar _PerspectiveViewHelper = __webpack_require__(30);\n\nvar _PerspectiveViewHelper2 = _interopRequireDefault(_PerspectiveViewHelper);\n\nvar _setLanguage = __webpack_require__(39);\n\nvar _setLanguage2 = _interopRequireDefault(_setLanguage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    resizeScreen: function resizeScreen(data) {\n\n        var helper = _presenter2.default.perspectiveViewHelper;\n\n        var width = parseInt($(helper.container).find('.main_content').width());\n        var height = parseInt($(helper.container).find('.main_content').height());\n        helper.perspectiveViewRenderer.setSize(width, height);\n\n        var camera = helper.perspectiveViewCamera;\n        camera.left = width / -2;\n        camera.right = width / 2;\n        camera.top = height / 2;\n        camera.bottom = height / -2;\n\n        camera.updateProjectionMatrix();\n\n        // // todo 遍历已经存在的图形，改变尺寸\n        // helper.CubeSize = parseInt((width > height ? height : width) / 7)\n        // destroyThreeObject(helper.CubeGeometry)\n        // helper.CubeGeometry = new THREE.BoxGeometry(helper.CubeSize, helper.CubeSize, helper.CubeSize)\n        // const gridCubeArr = helper.gridData.getGridCubeArr()\n        //\n        // gridCubeArr.forEach((rowArr, row) => {\n        //   rowArr.forEach((count, column) => {\n        //     helper.setCubeCountInPosition(row, column, count)\n        //   })\n        // })\n        // helper.gridHelper.updateSize(helper.CubeSize, helper.CubeSize)\n\n        helper.render();\n    }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./ref/presenters/nd_lego/libs/presenter/interface.js\n// module id = 55\n// module chunks = 0\n//# sourceURL=webpack:///./ref/presenters/nd_lego/libs/presenter/interface.js?");

/***/ }
/******/ ]);]]></presenter><resources><file src="./resources/images/icon_exitexam.png"/><file src="./resources/wood/images/delete_btn_active.png"/><file src="./resources/wood/images/delete_btn_disabled.png"/><file src="./resources/wood/images/delete_btn.png"/><file src="./resources/wood/images/icon_plus_hover.png"/><file src="./resources/wood/images/icon_plus.png"/><file src="./resources/wood/images/icon_sign_hover.png"/><file src="./resources/wood/images/icon_sign.png"/><file src="./resources/wood/images/line_bg.png"/><file src="./resources/wood/images/rotate_lf_btn_active.png"/><file src="./resources/wood/images/rotate_lf_btn.png"/><file src="./resources/wood/images/rotate_rt_btn_active.png"/><file src="./resources/wood/images/rotate_rt_btn.png"/></resources></addon>