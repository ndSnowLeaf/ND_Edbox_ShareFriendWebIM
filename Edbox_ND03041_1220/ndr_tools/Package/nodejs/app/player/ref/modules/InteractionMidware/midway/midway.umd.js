!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";function t(){String.prototype.trim=function(e,t){return e?"left"===t?this.replace(new RegExp("^\\"+e+"+","g"),""):"right"===t?this.replace(new RegExp("\\"+e+"+$","g"),""):this.replace(new RegExp("^\\"+e+"+|\\"+e+"+$","g"),""):this.replace(/^\s+|\s+$/g,"")},"function"!=typeof String.prototype.insert&&(String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substring(e,this.length):t+this})}function n(){"function"!=typeof Array.prototype.from&&(Array.prototype.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var t=n(e);return Math.min(Math.max(t,0),r)};return function(e){var n=this,r=Object(e);if(null===e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i=arguments.length>1?arguments[1]:void 0,a=void 0;if("undefined"!=typeof i){if(!t(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(a=arguments[2])}for(var s=o(r.length),u=t(n)?Object(new n(s)):new Array(s),c=0,l=void 0;c<s;)l=r[c],i?u[c]="undefined"==typeof a?i(l,c):i.call(a,l,c):u[c]=l,c+=1;return u.length=s,u}}()),"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){var n=void 0,r=void 0;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<i;){var a=void 0;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),"function"!=typeof Array.prototype.each&&(Array.prototype.each=function(e,t){var n=void 0,r=void 0;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),i=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<i;){var a=void 0;r in o&&(a=o[r],e.call(n,a,r,o)),r++}}),"function"!=typeof Array.prototype.isArray&&(Array.prototype.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Array.prototype.includes&&(Array.prototype.includes=function(e,t){if(null===this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var o=0|t,i=Math.max(o>=0?o:r-Math.abs(o),0);i<r;){if(n[i]===e)return!0;i++}return!1}),"function"!=typeof Array.prototype.find&&(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],o=void 0,i=0;i<n;i++)if(o=t[i],e.call(r,o,i,t))return o}),"function"!=typeof Array.prototype.findIndex&&(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,r=arguments[1],o=void 0,i=0;i<n;i++)if(o=t[i],e.call(r,o,i,t))return i;return-1}),"function"!=typeof Array.prototype.compact&&(Array.prototype.compact=function(){for(var e=-1,t=null===this?0:this.length,n=0,r=[];++e<t;){var o=this[e];o&&(r[n++]=o)}return r})}function r(){var e=[Element.prototype,CharacterData.prototype,DocumentType.prototype];e.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}function o(e,t){if(e)throw new Error("[midway] "+t)}function i(e,t){return e.substr(0,t.length)===t}function a(e,t){return i(e,"file://")?e=e.replace(/(\/{0,3})\/*/g,"$1"):(e=e.replace(/:\//g,"://"),e=e.replace(/([^:\s\%\3\A])\/+/g,"$1/")),e=e.replace(/\/(\?|&|#[^!])/g,"$1"),e=e.replace(/(\?.+)\?/g,"$1&")}function s(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=void 0;if(t.Online===!1)a=U.urlJoin(t.ConfigPath||"configuration",o);else if("development"===t.RunEnvironment);else{if(void 0===n||void 0===r)throw Error("invalid arguments");a=U.urlJoin(t.BasePath,"players",n,r,o)}return e.ajax({url:a,dataType:"json",method:"GET",cache:!1,async:i})}function u(t,n,r){var o=[],i=[],a=t.Online?t.BasePath:"ref";return r.forEach(function(e){t.Online===!1?o.push(U.applyTemplate(e,{"ref-path-addon":a})):o.push(U.applyTemplate(e,{"ref-path-addon":a}))}),o.forEach(function(t){var n=e.ajax({url:t,dataType:"json",method:"GET",cache:!1,async:!1});i.push(n)}),e.when.apply(e,i).done(function(){for(var t={},r=0,o=arguments.length;r<o;r++)void 0!==arguments[r][0]&&e.extend(!0,t,arguments[r][0]);n.forEach(function(e){if(t[e.name]){for(var n=0,r=t[e.name].css.length;n<r;n++){var o=t[e.name].css[n];t[e.name].css[n]=U.applyTemplate(o,{"ref-path-addon":a})}for(var i=0,s=t[e.name].script.length;i<s;i++){var u=t[e.name].script[i];t[e.name].script[i]=U.applyTemplate(u,{"ref-path-addon":a})}e.css=t[e.name].css,e.script=t[e.name].script,e.dependencies=t[e.name].dependencies}})})}function c(e,t){e.callback.apply(e.scope||window,t.concat(e.args))}function l(e){return!(!e[fe.BEFORE_RUN]||!e[fe.AFTER_RUN])}function d(t,n,r,o){return e.isPlainObject(t)||(o=r,r=n,n=t,t={}),n&&r.forEach(function(r){var i=void 0;if("string"==typeof r)i=r;else for(var a in r)i=a,r=r[a];var s=(e.isFunction(r)?r(n.getAttribute(i)||""):n.getAttribute(r))||"";e.isFunction(o)&&(s=o(s,i)),t[i]=s}),t}function f(t){var n=e(e.parseXML(t)),r=new be,o=r.getAttribute("commons"),i=0,a=void 0;return n.find("page").each(function(e,t){var n=d(t,["id","name","href","preview"]);if(n.id=n.id||"page_"+i,a=t.parentNode.tagName.toLowerCase(),"folder"===a)n.name&&o.addItem(n.name,n);else{if("coursewareobject"===a){var s=t.parentNode.getAttribute("rootPath");n.href=s+n.href}r.addPage(n)}i++}),r}function h(t,n){var r=n.getPages();if(r&&r.length>0){var o=U.urlJoin(n.baseUrl,r[0].href);e.ajax({url:o,method:"GET",async:!1}).done(function(r){e(r).find("page").children("modules").each(function(e,r){p(t,n,r)})})}}function p(t,n,r){var o=0;e(r).children("module, addonModule").each(function(r,i){var a=new we,s=d(i,["addonId","moduleId","presenterId","id","isVisible","isLocked","style",{"lazy-init":function(e){return"true"===e.toLowerCase()}}]);s.addonId!==t&&s.moduleId!==t||(!s.presenterId&&s.addonId&&(s.presenterId=s.addonId),s.id=s.id||"module_"+o,$(i).children().each(function(t,n){var r=ke[n.tagName];e.isFunction(r)&&r(a,n)}),n.addModule(a),o++)})}function v(e){if(e.indexOf("main.xml")===-1)return console.error("can not found main.xml!"),{absolute:!1,url:void 0};var t=e.replace("main.xml",""),n=e.match(_e);return{absolute:null!==n,baseUrl:t,url:e}}function y(t,n){e(t).children("property").each(function(t,r){var o=void 0;if("list"===r.getAttribute("type"))o=utilsXML.toJsonByAttr(r,["name","type"]),o.value=[],e(r).find("items>item").each(function(e,t){var n=[];y(t,function(e){n.push(e)}),o.value.push(n)});else{o=d(r,["name","type","value"]);var i=e.trim($(r).text());i&&(o.text=i)}n(o)})}function g(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:n}):e[t]=n}function m(e,t){if(!b(e)||!Object.prototype.hasOwnProperty.call(e,"_id"))throw new TypeError(t+" method called on incompatible receiver "+("undefined"==typeof e?"undefined":C(e)))}function b(e){return Object(e)===e}function w(e){return e+"_"+_()+"."+_()}function _(){return Math.random().toString().substring(2)}function E(t){return T.hasProp(Ie,t)||(Ie[t]=e.Deferred()),T.getOwn(Ie,t)}function k(e){return T.hasProp(e)?T.getOwn(Ie,e):E(e)}function P(e,t){var n=this,r=new e,o=t.code,i=void 0===o?t.code:o,a=t.model,s=void 0===a?t.model||{}:a,u=t.attributes,c=void 0===u?t.attributes||void 0:u,l=void 0===t.rendTo||null===t.rendTo?this._containElement:t.rendTo,d=void 0;void 0!==e.prototype.__template&&(d=e.prototype.__template.cloneNode(!0));var f=new pe({code:i,template:d,style:e.prototype.__style,model:s,instance:r,container:l,context:this});return this.Processors.push(f),f.runInit(),f.runLifecycle(he.render),f.render(c),M.call(this,fe.BEFORE_RUN,f),f.runLifecycle(he.run).done(function(){M.call(n,fe.AFTER_RUN,f),f.runLifecycle(he.show)}),f}function M(e,t){var n=this.Processors;n.forEach(function(n){var r=t.ProcessorKey,o=n.ProcessorKey;o!==r&&n.IsController&&(T.hasProp(n.RunningModules,e)||(n.RunningModules[e]=[]),n.RunningModules[e].findIndex(function(e){return e===r})===-1&&(n.RunningModules[e].push(r),T.execute(n.ModuleInstance,e,t.ModuleInstance)))}),t.IsController&&n.forEach(function(n){var r=t.ProcessorKey,o=n.ProcessorKey;o!==r&&(T.hasProp(t.RunningModules,e)||(t.RunningModules[e]=[]),t.RunningModules[e].findIndex(function(e){return e===o})===-1&&(t.RunningModules[e].push(r),T.execute(t.ModuleInstance,e,n.ModuleInstance)))})}function L(e){var t=H.getInstance().ModuleConfig;if(!T.hasProp(t,e))throw Error("Can not find configuration information for specified Bundle!");var n=t[e],r=k(e);return n.loaded===!0?r.promise():(H.getInstance().exists(e)?r.resolve({module:H.getInstance().get(e)}):(n.loaded=!0,A.addJavascript(n.href).done(function(){r.resolve({module:H.getInstance().get(e)})}).fail(function(){throw r.reject(),Error("Load Bundle error")})),r.promise())}function j(t){var n=t.code,r=void 0===n?t.code:n,i=t.template,a=void 0===i?t.template||void 0:i,s=t.style,u=void 0===s?t.style||void 0:s,c=t.dependLibs,l=void 0===c?t.dependLibs||[]:c;o(void 0===r,"the module name is empty!");var d=void 0!==u,f=void 0!==a,h=void 0;return f===!0&&(h=e.parseHTML(a),h.length>1&&(console.warn("component template can only one root element, but got "+h.length),f=!1)),d&&"function"!=typeof u.toString&&(console.warn("component style not valid, please check it!"),d=!1),function(e){Object.defineProperty(e.prototype,"__dependLibs",{value:l}),Object.defineProperty(e.prototype,"__code",{value:r}),f&&Object.defineProperty(e.prototype,"__template",{value:h[0]}),d&&Object.defineProperty(e.prototype,"__style",{value:u}),H.getInstance().add(r,e)}}function O(e){var t=e.configurable,n=void 0===t?e.configurable||!1:t,r=e.writable,o=void 0===r?e.writable||!1:r,i=e.enumerable,a=void 0===i?e.enumerable||!1:i;return function(e,t,r){return r.configurable=n,r.writable=o,r.enumerable=a,r}}e="default"in e?e.default:e;var I=document.head||document.getElementsByTagName("head")[0]||document.documentElement,A={addStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;o(void 0===e,"style url is undefined");var n=document.createElement("link");if(n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),void 0!==t)for(var r in t)script.setAttribute(r,attr[r]);return I.appendChild(n),n},addJavascript:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;o(void 0===e,"script url is undefined");var n=$.Deferred(),r=document.createElement("script");if(r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=e,void 0!==t)for(var i in t)r.setAttribute(i,attr[i]);return r.onerror=function(){console.error("javascript load failure!, URL="+e),n.reject()},r.onload=r.onreadystatechange=function(t,o){(o||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,r=null,o?(n.reject(),console.error("load javascript abort!, URL="+e)):n.resolve())},I.appendChild(r),n.promise()},addEmbedStyle:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=document.createElement("style");if(n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,void 0!==t)for(var r in t)n.setAttribute(r,t[r]);return I.appendChild(n),n},addEmbedScript:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=document.createElement("script");if(n.setAttribute("language","Javascript"),n.text=e,void 0!==t)for(var r in t)n.setAttribute(r,t[r]);return I.appendChild(n),n},checkStyle:function(e){var t=!1;return"string"==typeof e?$.each(document.head.childNodes,function(n,r){if("LINK"===r.nodeName&&r.attributes.href.value===e)return t=!0,!1}):"function"==typeof e&&$.each(document.head.childNodes,function(n,r){if(("LINK"===r.nodeName||"STYLE"===r.nodeName)&&e.call(void 0,r))return t=!0,!1}),t},removeStyle:function(e){if("string"==typeof e){var t=e;document.head.childNodes.forEach(function(e){"LINK"===e.nodeName&&e.attributes.href.value===t&&I.removeChild(e)})}else"function"==typeof e&&document.head.childNodes.forEach(function(t){"LINK"===t.nodeName&&e.call(void 0,t)&&I.removeChild(t)})},removeStyleElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;o(void 0===e,"style element is undefined"),I.removeChild(e),e=null}},B=arguments,T={runSequence:function(e,t){var n=$.Deferred().resolve(),r=void 0;return e.forEach(function(e,t){$.isFunction(e.fn)&&(n=n.then(function(){try{r=t;var n=e.args||B;return e.isAppendArgs===!0&&(n=Array.prototype.slice.call(B,0),n=n.concat(fnConfig.args)),e.fn.apply(e.scope||window,n)}catch(e){return $.Deferred(function(t){t.reject(e)})}},function(e){return e}))}),n.fail(function(e){console.error("execute %s, number of %d error",t||"task",++r,e||"")})},execute:function(e,t,n,r){var o="",i={};if("string"==typeof t&&(o=t,t={},t[o]=n||[]),e)for(var a in t){var s=e[a];if($.isFunction(s)){var u=t[a],c=$.isArray(u)?"apply":"call";i[a]=Function.prototype[c].call(s,e,u)}else r===!0&&logger.error("不存在["+a+"]方法")}return o?i[o]:i},createDelegate:function(e,t,n,r,o){return function(){var i=t||B;n===!0&&(i=Array.prototype.slice.call(B,0),i=i.concat(t));try{return e.apply(r||window,i)}catch(e){if($.isFunction(o))return o(e);throw e}}},defer:function(e,t,n,r,o){var i=functionHelper.createDelegate(t,n,r,o);return e>0?window.setTimeout(i,e):(i(),0)},createPromiseThen:function(e,t,n,r,o){return $.isFunction(e.reject)||(o=r,r=n,n=t,t=e,e=$.Deferred()),T.createDelegate(t,n,r,o,function(t){return e.reject(t),e.promise()})},isEmptyObject:function(e){for(var t in e)return!1;return!0},isOwnEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},hasProp:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},getOwn:function(e,t){return e&&Object.prototype.hasOwnProperty.call(e,t)&&e[t]},defineProperty:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{configurable:!1,enumerable:!1,writable:!1};Object.defineProperty(e,t,{configurable:r.configurable||!1,enumerable:r.enumerable||!1,writable:r.writable||!1,value:n})}},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),R=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},S=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},F=/\$\{(.+?)\}/g,D="0123456789abcdefghijklmnopqrstuvwxyz",U={applyTemplate:function(e,t){return e.replace(F,function(e,n){return t[n]||e})},createReg:function(e){return e.length?new RegExp("^("+e.join("|")+")$"):/^$/},uuid:function(e){for(var t=[],n=0;n<e;n++)t[n]=D.substr(Math.floor(36*Math.random()),1);return t.join("")},urlJoin:function(){var e=arguments,t={};"object"===C(arguments[0])&&(e=arguments[0],t=arguments[1]||{}),e=Array.prototype.compact.call(e);var n=[].splice.call(e,0).join("/");return a(n,t)},randomWord:function(e,t,n){var r="",o=t,i=["0","1","2","3","4","5","6","7","8","9"];e&&(o=Math.round(Math.random()*(n-t))+t);for(var a=-1,s=0;s<o;s++)a=Math.round(Math.random()*(i.length-1)),r+=i[a];return r}},J=function(){function e(t,n,r){x(this,e),this.promises={},this.getKey=t,this.context=r||window,this.createLoadPromise=n}return N(e,[{key:"load",value:function(e){var t=this,n=Array.prototype.isArray(e)?e:Array.prototype.slice.call(arguments,1),r=[];return n.forEach(function(e){var n=t.getKey(e),o=t.promises[n]||(t.promises[n]=t.createLoadPromise.call(t.context,e));r.push(o)}),$.when.apply($,r)}}]),e}(),K=function(){function e(){x(this,e),this.collection={}}return N(e,[{key:"add",value:function(e,t){o(void 0===t,"manage item can't NULL!"),void 0===this.collection[e]&&(this.collection[e]=t)}},{key:"get",value:function(e){if(this.collection[e])return this.collection[e]}},{key:"exists",value:function(e){return!(void 0===this.collection[e])}},{key:"remove",value:function(e){this.collection[e]&&(this.beforeRemove(this.collection[e]),this.collection[e]=null,delete this.collection[e],this.afterRemove())}},{key:"release",value:function(){for(var e in this.collection)delete this.collection[e];this.collection=null}},{key:"each",value:function(e){if("function"==typeof e)for(var t in this.collection)e.call(this,t,this.collection[t])}},{key:"beforeRemove",value:function(e){}},{key:"afterRemove",value:function(){}}]),e}(),W=function(e){function t(){x(this,t);var e=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._scriptSettings=[],e}return R(t,e),N(t,[{key:"ScriptSettings",get:function(){return this._scriptSettings},set:function(e){this._scriptSettings=e}}]),t}(K),q=function(){var e=void 0;return{name:"DependLibraryCollection",getInstance:function(){return void 0===e&&(e=new W),e}}}(),V=function(){function t(){x(this,t),this._loader=void 0,this._defMappings={}}return N(t,[{key:"create",value:function(){return void 0===this._loader&&(this._loader=new J(this._getKey,this._createLoadPromise,this)),this._loader}},{key:"_getKey",value:function(e){return e.name}},{key:"_createLoadPromise",value:function(t){var n=this,r=$.Deferred();return r.resolve().then(function(){return n._importStyle(t)}).then(function(){if(0===t.depends.length)return n._importJsLib(t);var r=n._getDependDef(t.depends);return e.when.apply(n,r).done(function(){return n._importJsLib(t)})})}},{key:"_importJsLib",value:function(e){var t=[];return e.scripts.forEach(function(n){t.push({fn:A.addJavascript,args:[n+"?release="+e.release]})}),T.hasProp(this._defMappings,e.name)||(this._defMappings[e.name]=T.runSequence(t,"Load Javascript Library")),this._defMappings[e.name]}},{key:"_importStyle",value:function(e){var t=[];return e.styles.forEach(function(n){t.push({fn:A.addStyle,args:[n+"?release="+e.release]})}),T.runSequence(t,"Load Style Library")}},{key:"_getDependDef",value:function(e){var t=this,n=[];return e.forEach(function(e){T.hasProp(t._defMappings,e.name)&&n.push(t._defMappings[e.name])}),n}}]),t}(),z=function(){var e=void 0;return{name:"ThirdLibraryLoader",getInstance:function(){return void 0===e&&(e=new V),e},findDependScript:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];0===e.depends.length?T.hasProp(t,e.name)||z.addToLoadLibs(e,t,e.autoLoad,n):(e.depends.forEach(function(r){if(q.getInstance().exists(r.name)){var o=q.getInstance().get(r.name);o.depends.length>0?z.findDependScript(o,t):z.addToLoadLibs(o,t,e.autoLoad,n)}else{var i=q.getInstance().ScriptSettings.find(function(e){return e.name===r.name});if(i){q.getInstance().add(i.name,{name:i.name,autoLoad:i.autoLoad,version:i.version,styles:i.css||[],scripts:i.script||[],depends:i.dependencies||[],loaded:!1});var a=q.getInstance().get(i.name);a.depends.length>0?z.findDependScript(a,t):z.addToLoadLibs(a,t,e.autoLoad,n)}else console.warn("Failed to find the configuration of "+r.name+" on which "+e.name+" depends")}}),z.addToLoadLibs(e,t,e.autoLoad,n))},addToLoadLibs:function(e,t,n,r){if(e.loaded!==!0){var o=t.findIndex(function(t){return t.name===e.name});o===-1&&(r===!0&&"true"===n||r===!1)&&t.push(e)}}}}(),G=function(e){function t(){x(this,t);var e=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._bundleConfig={},e}return R(t,e),N(t,[{key:"ModuleConfig",get:function(){return this._bundleConfig},set:function(e){this._bundleConfig=e}}]),t}(K),H=function(){var e=void 0;return{name:"ModuleCollection",getInstance:function(){return void 0===e&&(e=new G),e}}}(),X=function(){function t(){x(this,t)}return N(t,[{key:"load",value:function(t){var n=e.Deferred();T.hasProp(t,"presenters")&&(H.getInstance().ModuleConfig=this._fixPresenterToModule(T.getOwn(t,"presenters")));var r=[],o=q.getInstance(),i=[];if(T.hasProp(t,"mScript")&&T.hasProp(t,"script")){for(var a in t.mScript)i.push(t.mScript[a].href);var s=T.getOwn(t,"script");u(Ue,s,i).done(function(){o.ScriptSettings=s,s.forEach(function(e){var t=e.name,n=void 0;o.exists(t)||o.add(t,{name:t,autoLoad:e.autoLoad,version:e.version,styles:e.css||[],scripts:e.script||[],depends:e.dependencies||[],release:e.releaseNum||"000000",loaded:!1}),n=o.get(t),z.findDependScript(n,r,!0)});var e=z.getInstance().create();e.load(r).done(function(){r.forEach(function(e){e.loaded=!0}),n.resolve()})}).fail(function(){console.error("Load preload configured error"),n.reject()})}else n.resolve();return n.promise()}},{key:"_fixPresenterToModule",value:function(e){var t={};for(var n in e){var r=e[n];if(!T.hasProp(t,n)){var o=r.presenterCode+".dist.js",i=Ue.Online?U.urlJoin(Ue.BasePath,Ue.BundlePath,r.presenterCode,r.version,o,"?release="+r.releaseNum):"development"===Ue.RunEnvironment?U.urlJoin(Ue.BasePath,Ue.BundlePath,r.presenterCode,"dist",o,"?release="+r.releaseNum):U.urlJoin(Ue.BasePath,Ue.BundlePath,r.presenterCode,o,"?release="+r.releaseNum);t[n]={href:i,version:r.version}}}return t}}]),t}(),Q=function(){function e(){x(this,e),this.listeners=[]}return N(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=4,o=arguments.length>r?Array.prototype.slice.call(arguments,r):[],i=this.listeners[e]||(this.listeners[e]=[]);i.push({scope:n,callback:t,args:o})}},{key:"removeEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if("undefined"!=typeof this.listeners.name){for(var r=[],o=0,i=this.listeners[e].length;o<i;o++){var a=this.listeners[e][o];a.scope===n&&a.callback===t||r.push(a)}this.listeners[e]=r}}},{key:"hasEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;if("undefined"==typeof this.listeners.name)return!1;for(var r=0,o=this.listeners[e].length;r<o;r++){var i=this.listeners[e][r];if((!n||i.scope===n)&&i.callback===t)return!0}return!1}},{key:"dispatch",value:function(e){var t=arguments.length>1?Array.prototype.slice.call(arguments,1):[];t.push(e),this.listeners&&this.listeners[e]&&this.listeners[e].forEach(function(e){c(e,t)})}}]),e}(),Y={GlobalBundle:"global_bundle",CurrentBundle:"current_bundle"},Z={WebEvent:"web_event",NativeEvent:"native_event",PPTEvent:"ppt_native_event"},ee=function(){function e(t,n){x(this,e),this._webEventBus=t,this._nativeEventBus=n}return N(e,[{key:"addEventListener",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;switch(t){case Z.WebEvent:this._webEventBus.addEventListener(e,n,r);break;case Z.NativeEvent:case Z.PPTEvent:this._nativeEventBus&&this._nativeEventBus.registerListener(e,n,r);break;default:console.warn("Unsupported event type")}}},{key:"removeEventListener",value:function(e,t){switch(t){case Z.WebEvent:break;case Z.NativeEvent:case Z.PPTEvent:break;default:console.warn("Unsupported event type")}}},{key:"removeAllEventListener",value:function(){}},{key:"dispatchEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Y.CurrentBundle;if(r===Y.GlobalBundle&&t===Z.WebEvent)return ne.getInstance().broadcast(e,n),-1;switch(t){case Z.WebEvent:return this._webEventBus.dispatch(e,n),0;case Z.NativeEvent:return this._nativeEventBus.callNative(Ue.NativeBridgeClass,e,n);case Z.PPTEvent:return this._nativeEventBus.callNative(Ue.NativeBridgeClass,"sendEvent",{eventName:e,eventData:n});default:console.warn("Unsupported event type")}}},{key:"WebEventBus",get:function(){return this._webEventBus}}]),e}(),te=function(e){function t(){return x(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return R(t,e),N(t,[{key:"create",value:function(e){var t=new Q,n=void 0===window.top?window.Bridge:window.top.Bridge,r=new ee(t,n);return this.add(e.Key,r),r}},{key:"broadcast",value:function(e,t){this.each(function(n,r){r.WebEventBus.dispatch(e,t)})}}]),t}(K),ne=function(){var e=void 0;return{name:"EventBusCollection",getInstance:function(){return void 0===e&&(e=new te),e}}}(),re=function(){function t(){x(this,t)}return N(t,[{key:"load",value:function(t){var n=e.Deferred();if(t.prototype.__dependLibs&&Array.prototype.isArray(t.prototype.__dependLibs)){var r=t.prototype.__dependLibs,o=[];if(r.forEach(function(e){if(q.getInstance().exists(e)){var t=q.getInstance().get(e);t.loaded===!1&&o.push(t)}}),0===o.length)n.resolve();else{var i=[];o.forEach(function(e){z.findDependScript(e,i)});var a=z.getInstance().create();a.load(i).done(function(){i.forEach(function(e){e.loaded=!0}),n.resolve()}).fail(function(){console.error("Load bundle depend library error"),n.reject()})}}else n.resolve();return n.promise()}}]),t}(),oe=function(){var e=void 0;return{name:"ModuleLoader",getInstance:function(){return void 0===e&&(e=new re),e}}}(),ie="<div class='module_${module}' id='${id}'></div>",ae=/url\s*\(\s*(['"]?)(resources[\\/].*?)\1\s*\)/gi,se='url("${base}/${code}/${name}")',ue={render:function(t,n,r,o,i,a){if(r){var s=A.checkStyle(function(e){return!!e.attributes.moduleCode&&e.attributes.moduleCode.value===n});if(!s){var u=r.toString(),c=u.replace(ae,function(e,t,r){return U.applyTemplate(se,{base:Ue.BundlePath,code:n,name:r})});A.addEmbedStyle(c,{moduleCode:n})}}if(o){var l=e.parseHTML(U.applyTemplate(ie,{module:n,id:t}))[0];if(a)for(var d in a)if("style"===d)for(var f in a[d])l.style[f]=a[d][f];else l.setAttribute(d,a[d]);l.appendChild(o),i.appendChild(l)}}},ce={params:{},get:function(){return ce.params}},le=location.search;le=le.substr(1,le.length);var de=le.split("&");de.forEach(function(e){var t=e.split("="),n=t[0];n&&(ce.params[n]=decodeURIComponent(t[1]))});var fe={BEFORE_RUN:"processBeforeRun",AFTER_RUN:"processAfterRun"},he={render:["beforeRender"],run:["beforeRun","run","afterRun"],update:["update"],show:["pageShow"],destroy:["destroy"]},pe=function(){function e(t){x(this,e),this._instance=t.instance,this._context=t.context,this._key=U.randomWord(!1,8),this._code=t.code,this._style=t.style,this._container=t.container,this._model=t.model,this._view=t.template,this._hasRunning={},this._isController=l(this._instance)}return N(e,[{key:"render",value:function(e){ue.render(this._key,this._code,this._style,this._view,this._container,e)}},{key:"runInit",value:function(){T.execute(this._instance,{setPlayerController:this._context,setUrlParams:ce.get(),setBasePath:Ue.BasePath})}},{key:"runLifecycle",value:function(e){var t=this,n=[];return e.forEach(function(e){n.push({fn:t._instance[e],args:[t._view,t._model],scope:t._instance,name:""})}),T.runSequence(n,"run bundle lifecycle")}},{key:"ModuleInstance",get:function(){return this._instance}},{key:"ModuleCode",get:function(){return this._code}},{key:"ProcessorKey",get:function(){return this._key}},{key:"RunningModules",get:function(){return this._hasRunning}},{key:"IsController",get:function(){return this._isController}},{key:"Model",set:function(e){e&&(this._model=e)}}]),e}(),ve=function(){function e(){x(this,e),this._playerflows={}}return N(e,[{key:"start",value:function(e,t,n){}},{key:"PlayerFlows",get:function(){return this._playerflows}}],[{key:"registerFlow",value:function(e){if(this instanceof Oe){o(void 0===e.key,"work flow key can not undefined");var t=ye.getInstance().PlayerFlows;T.hasProp(t,this.Key)||(t[this.Key]={}),t[this.Key][e.key]=e}else console.error("Please use Bundle objects for workflow calls")}},{key:"startFlow",value:function(e,t,n,r){if(this instanceof Oe){var o=ye.getInstance().PlayerFlows[this.Key];T.hasProp(o,"key")||console.error("Can not find the specified workflow configuration, key="+e)}else console.error("Please use Bundle objects for workflow calls")}}]),e}(),ye=function(){var e=void 0;return{name:"WorkFlowInstance",getInstance:function(){return void 0===e&&(e=new ve),e}}}(),ge=function e(t,n){x(this,e),this.nodeType=t,this.parent=n},me=(function(e){function t(e,n,r,o,i){x(this,t);var a=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,1,n));return a.localName=e,a.prefix=r,a.namespace=o,a.name=i,a.attributes={},a.children=[],a}return R(t,e),t}(ge),function(e){function t(e,n){x(this,t);var r=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,3,n));return r.text=e,r}return R(t,e),t}(ge),new DOMParser,function(){function e(){x(this,e),this.attributeValues={},this.attributes=[]}return N(e,[{key:"setAttribute",value:function(e,t){e in this.attributeValues&&(this.attributeValues[e]=t)}},{key:"setAttributes",value:function(e){for(var t in e)this.setAttribute(t,e[t])}},{key:"getAttribute",value:function(e){return this.attributeValues[e]}},{key:"removeAttribute",value:function(e){var t=this.getAttribute(e);return delete this.attributeValues[e],t}},{key:"AttributeValues",get:function(){return this.attributeValues}},{key:"Attributes",get:function(){return this.attributes}}]),e}()),be=function(e){function t(){x(this,t);var e=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attributes=["pages","css","style","commons","model"],e.attributes.forEach(function(t){e.attributeValues[t]=[]}),e}return R(t,e),N(t,[{key:"addPage",value:function(e){this.getAttribute("pages").push(e)}},{key:"getPages",value:function(){return this.getAttribute("pages")}},{key:"addModule",value:function(e){this.getAttribute("model").push(e)}}]),t}(me),we=function(e){function t(){x(this,t);var e=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.attributes=["id","presenterId","layout","css","style","z-index","lazy-init","properties","events"],e.attributes.forEach(function(t){e.attributeValues[t]=[]}),e}return R(t,e),N(t,[{key:"addProperty",value:function(e){this.getAttribute("properties").push(e)}}]),t}(me),_e=new RegExp(/(http|https|file):\/\/(\/)?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(#.*)?(\?.*)?/i),Ee=function(){function t(){x(this,t)}return N(t,null,[{key:"loadModel",value:function(t,n){var r=v(n);if(void 0===r.url)throw Error("can not found main.xml");return r.absolute===!1&&(r.url=U.urlJoin(MidWayConfig.BasePath,n)),e.ajax({url:r.url,method:"GET",dataType:"text",cache:!1,async:!1}).then(function(n){var o=f(n);o.baseUrl=r.baseUrl,h(t,o);var i=o.getAttribute("model"),a={};if(i.length>0){var s=i[0].getAttribute("properties");s.forEach(function(t){if("json"===t.type)a[t.name]=JSON.parse(t.value);else if("jsonFile"===t.type){var n=U.urlJoin(r.baseUrl,"pages",t.value);e.ajax({url:n,dataType:"json",async:!1}).done(function(e){a[t.name]=e})}else a[t.name]=t.value})}return a})}}]),t}(),ke={style:function e(t,n){t.setAttribute("css",$(n).attr("href"));var e=$(n).text();e&&t.setAttribute("style",e)},events:function(e,t){$(t).children("event").each(function(t,n){var r=$(n),o=r.attr("name");if(o){var i=[];r.children("handler").each(function(e,t){i.push(utilsXML.toJsonByAttr(t,[{
id:"targetId"},{name:"handlerName"}]))}),i.length&&e.addEvent(o,i)}})},properties:function(e,t){y(t,function(t){e.addProperty(t)})}},Pe=function(){function e(){if(x(this,e),void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(this._id=w("_WeakMap"),this._polyfill=!0,arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}return N(e,[{key:"delete",value:function(e){if(m(this,"delete"),!b(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)&&(delete e[this._id],!0)}},{key:"get",value:function(e){if(m(this,"get"),b(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}}},{key:"has",value:function(e){if(m(this,"has"),!b(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)}},{key:"set",value:function(e,t){if(m(this,"set"),!b(e))throw new TypeError("Invalid value used as weak map key");var n=e[this._id];return n&&n[0]===e?(n[1]=t,this):(g(e,this._id,[e,t]),this)}}]),e}();window.WeakMap||(window.WeakMap=Pe);var Me=new WeakMap,Le=new WeakMap,je=new WeakMap,Oe=function(){function t(n){var r=this;if(x(this,t),!T.hasProp(Je,"hasReady"))throw Error("Component is not initialized or initialization is not completed!");o(void 0===n,"init options can't null"),o(void 0===n.el,"init options must contain 'el' property"),o(void 0===n.launcher,"init options must contain 'launcher' property");var i=e.find(n.el);o(0===i.length,"can not find the specified container element"),this._containElement=i[0],this._launcher=n.launcher,this._model={},void 0!==n.model?this._model=n.model:void 0!==n.modelUrl&&Ee.loadModel(this._launcher,n.modelUrl).done(function(e){r._model=e}),Object.defineProperty(this,"__key",{value:U.randomWord(!1,8)}),Me.set(this,[]),Le.set(this,!1),je.set(this,void 0),this._containElement.setAttribute("bundle",this.Key)}return N(t,[{key:"start",value:function(){var e=this;return Le.get(this)===!0?void console.warn("This bundle is running"):(Le.set(this,!0),void L(this._launcher).done(function(t){t.module&&oe.getInstance().load(t.module).done(function(){var n=ne.getInstance().create(e);je.set(e,n),P.call(e,t.module,{code:t.module.prototype.__code,model:e.Model,rendTo:e._containElement,attributes:{style:{width:"100%",height:"100%"}}})})}))}},{key:"update",value:function(t){var n=this,r=Le.get(this);if(void 0===r)return void console.warn("Bundle has been destroyed and can not execute the release method");if(r===!1)return void console.warn("This bundle not running");var o=this.Processors[0];if(o){if("string"==typeof t)Ee.loadModel(this._launcher,t).done(function(e){o.Model=e});else{if(!e.isPlainObject(t))return void console.error("Invalid input parameter");o.Model=data}o.runLifecycle(he.update).done(function(e){if(void 0!==e){var t=e.dispatch||!1;if(t===!0&&void 0!==e.adaptedModel)for(var r=1,o=n.Processors.length;r<o;r++){var i=n.Processors[r];void 0!==e.adaptedModel[i.ModuleCode]&&(i.Model=e.adaptedModel[i.ModuleCode],i.runLifecycle(he.update))}}})}}},{key:"release",value:function(){var e=Le.get(this);if(void 0===e)return void console.warn("Bundle has been destroyed and can not execute the release method");if(e===!1)return void console.warn("This bundle not running");this.EventBus.removeAllEventListener(),ne.getInstance().remove(this.Key),je.delete(this);var t=Me.get(this);for(var n in t)t[n].runLifecycle(he.destroy);Me.set(this,[]),Me.delete(this),this._containElement.firstChild&&this._containElement.firstChild.remove(),Le.delete(this)}},{key:"Key",get:function(){return T.getOwn(this,"__key")}},{key:"Model",get:function(){return this._model}},{key:"Processors",get:function(){return Me.get(this)}},{key:"EventBus",get:function(){return je.get(this)}}]),t}();Object.defineProperty(Oe.prototype,"require",{value:function(t){var n=this;o("string"!=typeof t.code,"The requested module code can not be empty");var r=e.Deferred();return L(t.code).done(function(e){o(void 0===e.module,"Unable to load the specified module:"+t.code),oe.getInstance().load(e.module).done(function(){var o=P.call(n,e.module,t);r.resolve(o.ModuleInstance)})}),r.promise()}}),Object.defineProperty(Oe.prototype,"getEventBus",{value:function(){return this.EventBus}}),Object.defineProperty(Oe.prototype,"registerFlow",{value:function(){if(arguments.length<2)return void console.warn("The number of parameters is incorrect");var e=$.extend(arguments[1],{key:arguments[0]});ve.registerFlow.call(this,e)}}),Object.defineProperty(Oe.prototype,"startFlow",{value:function(){ve.startFlow.apply(this,arguments)}});var Ie={},Ae=new WeakMap,Be=new WeakMap,Te=function(){function e(t){x(this,e),this._bridgeInterface=t;for(var n in Ce)void 0===this._bridgeInterface[n]&&(this._bridgeInterface[n]=Ce[n]);Ae.set(this,{}),Be.set(this,{})}return N(e,[{key:"callNative",value:function(){if(!(arguments.length<2)){var e=arguments[0],t=arguments[1],n=arguments.length-2;if(0===n)return this._bridgeInterface.invokeMethod(e,t);if(1===n){this._bridgeInterface.printLog("==IcPlayer Player callNative: "+e+"."+t+" arg="+JSON.stringify(arguments[2]));var r=this._bridgeInterface.invokeMethod(e,t,JSON.stringify(arguments[2]));try{return JSON.parse(r)}catch(e){return{}}}}}},{key:"callNativeAsync",value:function(){if(!(arguments.length<3)){var e=arguments[0],t=arguments[1],n=arguments[2],r=void 0;if("function"==typeof n)return r=this._addCallbackFunc(n),this._bridgeInterface.invokeMethodAsync(e,t,r);var o=n;return n=arguments[3],"function"==typeof n?(r=this._addCallbackFunc(n),this._bridgeInterface.invokeMethodAsync(e,t,r,JSON.stringify(o))):void 0}}},{key:"registerListener",value:function(e,t,n){var r=this._addListenerFunc(e,t,n),o="Bridge.listenerInvokeFromNative('"+r+"',==param==)";this._bridgeInterface.registerListener(e,o)}},{key:"listenerInvokeFromNative",value:function(e,t){var n=this.ListenerMap[e];void 0!==n&&void 0!==n.callback&&n.callback.call(n.scope,t)}},{key:"callBackFromNative",value:function(e,t){var n=this.FunctionMap[e];return void 0===n?void(this.FunctionMap[e]=void 0):(n(t),void(this.FunctionMap[e]=null))}},{key:"unRegisterListener",value:function(e,t){var n="Bridge.listenerInvokeFromNative('"+t+"',==param==)";this._removeListenerFunc(t),this._bridgeInterface.unRegisterListener(e,n)}},{key:"_addListenerFunc",value:function(e,t,n){var r=this.randomKey(10);return this.ListenerMap[r]={eventName:e,callback:t,scope:n||window},r}},{key:"_removeListenerFunc",value:function(e){delete this.ListenerMap[e]}},{key:"_addCallbackFunc",value:function(e){var t=this.randomKey(10);return this.FunctionMap[t]=e,"Bridge.callBackFromNative('"+t+"',==param==)"}},{key:"randomKey",value:function(e){for(var t="0123456789qwertyuioplkjhgfdsazxcvbnm",n=(new Date).getTime(),r="",o=0;o<e;o++)r+=t.charAt(Math.ceil(1e8*Math.random())%t.length);return n+r}},{key:"FunctionMap",get:function(){return Ae.get(this)}},{key:"ListenerMap",get:function(){return Be.get(this)}}]),e}(),Ce={invokeMethod:function(){return console.warn("this message from default bridge! there is noting happening here!!"),{}},printLog:function(){console.warn("this message from default bridge! there is noting happening here!!")},invokeMethodAsync:function(){console.warn("this message from default bridge! there is noting happening here!!")},registerListener:function(){console.warn("this message from default bridge! there is noting happening here!!")},unRegisterListener:function(){console.warn("this message from default bridge! there is noting happening here!!")},prepareSwitchPage:function(){console.warn("this message from default bridge! there is noting happening here!!")},onPageLoaded:function(){console.warn("this message from default bridge! there is noting happening here!!")},onMainLoaded:function(){console.warn("this message from default bridge! there is noting happening here!!")}},xe=arguments,Ne=window,Re=/^.*?(?=[^\/]*(\?|$))/,Se=/^(\w+:\/\/|\/)/,Fe=/^((http|https):\/\/|\/)/,$e={getBase:function(e){return e?Re.exec(e)[0]:""},isAbsolute:function(e){return Se.test(e)},isHttpAddress:function(e){return Fe.test(e)},resolve:function(e,t){return 1===xe.length&&(t=e,e=$e.getBaseLocationUrl()),$e.isAbsolute(t)?t:e+"/"+t},getBaseLocationUrl:function(){var e=$e.getBase(location.href);return $e.getBaseLocationUrl=function(){return e},Ne.getBaseLocationUrl()}},De=!1,Ue={BasePath:"",RunEnvironment:"product",ConfigPath:"configuration",JsLibraryPath:"js-library",BundlePath:"bundles",Terminal:"none",Runtime:"web",NativeInterface:void 0,NativeBridgeClass:void 0},Je={};Object.defineProperty(Je,"version",{value:"1.2.0"}),Object.defineProperty(Je,"config",{value:function(e){if(T.hasProp(Je,"hasReady"))return void console.error("The container has been initialized and can not be modified");void 0!==e.BundlePath&&"string"==typeof e.BundlePath&&(Ue.BundlePath=e.BundlePath),void 0!==e.BasePath&&"string"==typeof e.BasePath&&(Ue.BasePath=e.BasePath),void 0!==e.ConfigPath&&"string"==typeof e.ConfigPath&&(Ue.ConfigPath=e.ConfigPath),void 0!==e.RunEnvironment&&"string"==typeof e.RunEnvironment&&("product"!==e.RunEnvironment&&"development"!==e.RunEnvironment||(Ue.RunEnvironment=e.RunEnvironment)),void 0!==e.Extra&&"object"===C(e.Extra)&&(Ue.Extra=e.Extra),Object.defineProperty(Ue,"Online",{value:$e.isHttpAddress(Ue.BasePath)});var t=e.RuntimeMapping||{AndroidInterface:"mobile",iOSInterface:"mobile",PCInterface:"pc"};for(var n in t)if(n in window){Ue.Runtime=t[n]||"web",Ue.NativeInterface=n,Ue.NativeBridgeClass=e.NativeBridgeClass||"IcrJsBridge";break}var r="none";ce.params.terminal&&(r=ce.params.terminal.toLowerCase()),Ue.Terminal=r}}),Object.defineProperty(Je,"runMidway",{value:function(e){if(!De){De=!0;var t=e&&e.file?e.file:"config.json",n=e&&e.code?e.code:void 0,r=e&&e.version?e.version:void 0;if("web"!==Ue.Runtime&&void 0!==Ue.NativeInterface){var o=new Te(window[Ue.NativeInterface]);window.Bridge=o,"true"===ce.params.iframeBridge&&C(window.top)&&(window.top.Bridge=o)}return s(Ue,n,r,t).then(function(e){var t=new X;return t.load(e).done(function(){Object.defineProperty(Je,"hasReady",{value:!0}),Object.defineProperty(Je,"Settings",{value:Ue}),Object.freeze(Ue),console.log("Preload Over")})}).fail(function(){console.error("Unable to read the online player's configuration file")})}}}),Object.defineProperty(Je,"MidwayModule",{value:j}),Object.defineProperty(Je,"FixPropertyConfig",{value:O}),Object.defineProperty(Je,"Bundle",{value:Oe}),function(e){n(),t(),r(),e.Midway||(e.Midway=Je)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:window)});
//# sourceMappingURL=midway.umd.js.map
